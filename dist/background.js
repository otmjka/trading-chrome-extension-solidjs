var ve={exports:{}},Tt;function Hr(){if(Tt)return ve.exports;Tt=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(d,b,p){return Function.prototype.apply.call(d,b,p)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:n=function(d){return Object.getOwnPropertyNames(d)};function r(m){console&&console.warn&&console.warn(m)}var s=Number.isNaN||function(d){return d!==d};function a(){a.init.call(this)}ve.exports=a,ve.exports.once=k,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function i(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(m){if(typeof m!="number"||m<0||s(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");o=m}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(d){if(typeof d!="number"||d<0||s(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this};function c(m){return m._maxListeners===void 0?a.defaultMaxListeners:m._maxListeners}a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(d){for(var b=[],p=1;p<arguments.length;p++)b.push(arguments[p]);var y=d==="error",S=this._events;if(S!==void 0)y=y&&S.error===void 0;else if(!y)return!1;if(y){var I;if(b.length>0&&(I=b[0]),I instanceof Error)throw I;var G=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw G.context=I,G}var ie=S[d];if(ie===void 0)return!1;if(typeof ie=="function")t(ie,this,b);else for(var wt=ie.length,zr=h(ie,wt),p=0;p<wt;++p)t(zr[p],this,b);return!0};function l(m,d,b,p){var y,S,I;if(i(b),S=m._events,S===void 0?(S=m._events=Object.create(null),m._eventsCount=0):(S.newListener!==void 0&&(m.emit("newListener",d,b.listener?b.listener:b),S=m._events),I=S[d]),I===void 0)I=S[d]=b,++m._eventsCount;else if(typeof I=="function"?I=S[d]=p?[b,I]:[I,b]:p?I.unshift(b):I.push(b),y=c(m),y>0&&I.length>y&&!I.warned){I.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=m,G.type=d,G.count=I.length,r(G)}return m}a.prototype.addListener=function(d,b){return l(this,d,b,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(d,b){return l(this,d,b,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(m,d,b){var p={fired:!1,wrapFn:void 0,target:m,type:d,listener:b},y=g.bind(p);return y.listener=b,p.wrapFn=y,y}a.prototype.once=function(d,b){return i(b),this.on(d,E(this,d,b)),this},a.prototype.prependOnceListener=function(d,b){return i(b),this.prependListener(d,E(this,d,b)),this},a.prototype.removeListener=function(d,b){var p,y,S,I,G;if(i(b),y=this._events,y===void 0)return this;if(p=y[d],p===void 0)return this;if(p===b||p.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete y[d],y.removeListener&&this.emit("removeListener",d,p.listener||b));else if(typeof p!="function"){for(S=-1,I=p.length-1;I>=0;I--)if(p[I]===b||p[I].listener===b){G=p[I].listener,S=I;break}if(S<0)return this;S===0?p.shift():N(p,S),p.length===1&&(y[d]=p[0]),y.removeListener!==void 0&&this.emit("removeListener",d,G||b)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(d){var b,p,y;if(p=this._events,p===void 0)return this;if(p.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):p[d]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete p[d]),this;if(arguments.length===0){var S=Object.keys(p),I;for(y=0;y<S.length;++y)I=S[y],I!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=p[d],typeof b=="function")this.removeListener(d,b);else if(b!==void 0)for(y=b.length-1;y>=0;y--)this.removeListener(d,b[y]);return this};function v(m,d,b){var p=m._events;if(p===void 0)return[];var y=p[d];return y===void 0?[]:typeof y=="function"?b?[y.listener||y]:[y]:b?T(y):h(y,y.length)}a.prototype.listeners=function(d){return v(this,d,!0)},a.prototype.rawListeners=function(d){return v(this,d,!1)},a.listenerCount=function(m,d){return typeof m.listenerCount=="function"?m.listenerCount(d):f.call(m,d)},a.prototype.listenerCount=f;function f(m){var d=this._events;if(d!==void 0){var b=d[m];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function h(m,d){for(var b=new Array(d),p=0;p<d;++p)b[p]=m[p];return b}function N(m,d){for(;d+1<m.length;d++)m[d]=m[d+1];m.pop()}function T(m){for(var d=new Array(m.length),b=0;b<d.length;++b)d[b]=m[b].listener||m[b];return d}function k(m,d){return new Promise(function(b,p){function y(I){m.removeListener(d,S),p(I)}function S(){typeof m.removeListener=="function"&&m.removeListener("error",y),b([].slice.call(arguments))}C(m,d,S,{once:!0}),d!=="error"&&F(m,y,{once:!0})})}function F(m,d,b){typeof m.on=="function"&&C(m,"error",d,b)}function C(m,d,b,p){if(typeof m.on=="function")p.once?m.once(d,b):m.on(d,b);else if(typeof m.addEventListener=="function")m.addEventListener(d,function y(S){p.once&&m.removeEventListener(d,y),b(S)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}return ve.exports}var Qr=Hr(),A;(function(e){e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"})(A||(A={}));function tt(e,t){return e!==null&&typeof e=="object"&&"$typeName"in e&&typeof e.$typeName=="string"?t===void 0?!0:t.typeName===e.$typeName:!1}var u;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(u||(u={}));function qr(){let e=0,t=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,(n&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Fe(e,t,n){for(let a=0;a<28;a=a+7){const o=e>>>a,i=!(!(o>>>7)&&t==0),c=(i?o|128:o)&255;if(n.push(c),!i)return}const r=e>>>28&15|(t&7)<<4,s=t>>3!=0;if(n.push((s?r|128:r)&255),!!s){for(let a=3;a<31;a=a+7){const o=t>>>a,i=!!(o>>>7),c=(i?o|128:o)&255;if(n.push(c),!i)return}n.push(t>>>31&1)}}const _e=4294967296;function _t(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,s=0;function a(o,i){const c=Number(e.slice(o,i));s*=n,r=r*n+c,r>=_e&&(s=s+(r/_e|0),r=r%_e)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?Bn(r,s):nt(r,s)}function es(e,t){let n=nt(e,t);const r=n.hi&2147483648;r&&(n=Bn(n.lo,n.hi));const s=Un(n.lo,n.hi);return r?"-"+s:s}function Un(e,t){if({lo:e,hi:t}=ts(e,t),t<=2097151)return String(_e*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,s=t>>16&65535;let a=n+r*6777216+s*6710656,o=r+s*8147497,i=s*2;const c=1e7;return a>=c&&(o+=Math.floor(a/c),a%=c),o>=c&&(i+=Math.floor(o/c),o%=c),i.toString()+Rt(o)+Rt(a)}function ts(e,t){return{lo:e>>>0,hi:t>>>0}}function nt(e,t){return{lo:e|0,hi:t|0}}function Bn(e,t){return t=~t,e?e=~e+1:t+=1,nt(e,t)}const Rt=e=>{const t=String(e);return"0000000".slice(t.length)+t};function kt(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function ns(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;(e&128)!==0&&n<10;n++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var Lt={};const _=rs();function rs(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof Lt!="object"||Lt.BUF_BIGINT_DISABLE!=="1")){const n=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){const i=typeof o=="bigint"?o:BigInt(o);if(i>r||i<n)throw new Error(`invalid int64: ${o}`);return i},uParse(o){const i=typeof o=="bigint"?o:BigInt(o);if(i>a||i<s)throw new Error(`invalid uint64: ${o}`);return i},enc(o){return e.setBigInt64(0,this.parse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(o){return e.setBigInt64(0,this.uParse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(o,i){return e.setInt32(0,o,!0),e.setInt32(4,i,!0),e.getBigInt64(0,!0)},uDec(o,i){return e.setInt32(0,o,!0),e.setInt32(4,i,!0),e.getBigUint64(0,!0)}}}return{zero:"0",supported:!1,parse(n){return typeof n!="string"&&(n=n.toString()),Ot(n),n},uParse(n){return typeof n!="string"&&(n=n.toString()),Ut(n),n},enc(n){return typeof n!="string"&&(n=n.toString()),Ot(n),_t(n)},uEnc(n){return typeof n!="string"&&(n=n.toString()),Ut(n),_t(n)},dec(n,r){return es(n,r)},uDec(n,r){return Un(n,r)}}}function Ot(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function Ut(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}function z(e,t){switch(e){case u.STRING:return"";case u.BOOL:return!1;case u.DOUBLE:case u.FLOAT:return 0;case u.INT64:case u.UINT64:case u.SFIXED64:case u.FIXED64:case u.SINT64:return t?"0":_.zero;case u.BYTES:return new Uint8Array(0);default:return 0}}function ss(e,t){switch(e){case u.BOOL:return t===!1;case u.STRING:return t==="";case u.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}const Vn=2,K=Symbol.for("reflect unsafe local");function Cn(e,t){const n=e[t.localName].case;return n===void 0?n:t.fields.find(r=>r.localName===n)}function as(e,t){const n=t.localName;if(t.oneof)return e[t.oneof.localName].case===n;if(t.presence!=Vn)return e[n]!==void 0&&Object.prototype.hasOwnProperty.call(e,n);switch(t.fieldKind){case"list":return e[n].length>0;case"map":return Object.keys(e[n]).length>0;case"scalar":return!ss(t.scalar,e[n]);case"enum":return e[n]!==t.enum.values[0].number}throw new Error("message field with implicit presence")}function de(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==void 0}function Gn(e,t){if(t.oneof){const n=e[t.oneof.localName];return n.case===t.localName?n.value:void 0}return e[t.localName]}function Yn(e,t,n){t.oneof?e[t.oneof.localName]={case:t.localName,value:n}:e[t.localName]=n}function os(e,t){const n=t.localName;if(t.oneof){const r=t.oneof.localName;e[r].case===n&&(e[r]={case:void 0})}else if(t.presence!=Vn)delete e[n];else switch(t.fieldKind){case"map":e[n]={};break;case"list":e[n]=[];break;case"enum":e[n]=t.enum.values[0].number;break;case"scalar":e[n]=z(t.scalar,t.longAsString);break}}function W(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function rt(e,t){var n,r,s,a;if(W(e)&&K in e&&"add"in e&&"field"in e&&typeof e.field=="function"){if(t!==void 0){const o=t,i=e.field();return o.listKind==i.listKind&&o.scalar===i.scalar&&((n=o.message)===null||n===void 0?void 0:n.typeName)===((r=i.message)===null||r===void 0?void 0:r.typeName)&&((s=o.enum)===null||s===void 0?void 0:s.typeName)===((a=i.enum)===null||a===void 0?void 0:a.typeName)}return!0}return!1}function st(e,t){var n,r,s,a;if(W(e)&&K in e&&"has"in e&&"field"in e&&typeof e.field=="function"){if(t!==void 0){const o=t,i=e.field();return o.mapKey===i.mapKey&&o.mapKind==i.mapKind&&o.scalar===i.scalar&&((n=o.message)===null||n===void 0?void 0:n.typeName)===((r=i.message)===null||r===void 0?void 0:r.typeName)&&((s=o.enum)===null||s===void 0?void 0:s.typeName)===((a=i.enum)===null||a===void 0?void 0:a.typeName)}return!0}return!1}function at(e,t){return W(e)&&K in e&&"desc"in e&&W(e.desc)&&e.desc.kind==="message"&&(t===void 0||e.desc.typeName==t.typeName)}function is(e){return Dn(e.$typeName)}function pe(e){const t=e.fields[0];return Dn(e.typeName)&&t!==void 0&&t.fieldKind=="scalar"&&t.name=="value"&&t.number==1}function Dn(e){return e.startsWith("google.protobuf.")&&["DoubleValue","FloatValue","Int64Value","UInt64Value","Int32Value","UInt32Value","BoolValue","StringValue","BytesValue"].includes(e.substring(16))}const us=999,cs=998,Re=2;function D(e,t){if(tt(t,e))return t;const n=bs(e);return t!==void 0&&ls(e,n,t),n}function ls(e,t,n){for(const r of e.members){let s=n[r.localName];if(s==null)continue;let a;if(r.kind=="oneof"){const o=Cn(n,r);if(!o)continue;a=o,s=Gn(n,o)}else a=r;switch(a.fieldKind){case"message":s=ot(a,s);break;case"scalar":s=Fn(a,s);break;case"list":s=ds(a,s);break;case"map":s=fs(a,s);break}Yn(t,a,s)}return t}function Fn(e,t){return e.scalar==u.BYTES?it(t):t}function fs(e,t){if(W(t)){if(e.scalar==u.BYTES)return Bt(t,it);if(e.mapKind=="message")return Bt(t,n=>ot(e,n))}return t}function ds(e,t){if(Array.isArray(t)){if(e.scalar==u.BYTES)return t.map(it);if(e.listKind=="message")return t.map(n=>ot(e,n))}return t}function ot(e,t){if(e.fieldKind=="message"&&!e.oneof&&pe(e.message))return Fn(e.message.fields[0],t);if(W(t)){if(e.message.typeName=="google.protobuf.Struct"&&e.parent.typeName!=="google.protobuf.Value")return t;if(!tt(t,e.message))return D(e.message,t)}return t}function it(e){return Array.isArray(e)?new Uint8Array(e):e}function Bt(e,t){const n={};for(const r of Object.entries(e))n[r[0]]=t(r[1]);return n}const ms=Symbol(),Vt=new WeakMap;function bs(e){let t;if(gs(e)){const n=Vt.get(e);let r,s;if(n)({prototype:r,members:s}=n);else{r={},s=new Set;for(const a of e.members)a.kind!="oneof"&&(a.fieldKind!="scalar"&&a.fieldKind!="enum"||a.presence!=Re&&(s.add(a),r[a.localName]=xe(a)));Vt.set(e,{prototype:r,members:s})}t=Object.create(r),t.$typeName=e.typeName;for(const a of e.members)s.has(a)||a.kind=="field"&&(a.fieldKind=="message"||(a.fieldKind=="scalar"||a.fieldKind=="enum")&&a.presence!=Re)||(t[a.localName]=xe(a))}else{t={$typeName:e.typeName};for(const n of e.members)(n.kind=="oneof"||n.presence==Re)&&(t[n.localName]=xe(n))}return t}function gs(e){switch(e.file.edition){case us:return!1;case cs:return!0;default:return e.fields.some(t=>t.presence!=Re&&t.fieldKind!="message"&&!t.oneof)}}function xe(e){if(e.kind=="oneof")return{case:void 0};if(e.fieldKind=="list")return[];if(e.fieldKind=="map")return{};if(e.fieldKind=="message")return ms;const t=e.getDefaultValue();return t!==void 0?e.fieldKind=="scalar"&&e.longAsString?t.toString():t:e.fieldKind=="scalar"?z(e.scalar,e.longAsString):e.enum.values[0].number}const hs=["FieldValueInvalidError","FieldListRangeError","ForeignFieldError"];class U extends Error{constructor(t,n,r="FieldValueInvalidError"){super(n),this.name=r,this.field=()=>t}}function ps(e){return e instanceof Error&&hs.includes(e.name)&&"field"in e&&typeof e.field=="function"}const Ke=Symbol.for("@bufbuild/protobuf/text-encoding");function ut(){if(globalThis[Ke]==null){const e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[Ke]={encodeUtf8(n){return e.encode(n)},decodeUtf8(n){return t.decode(n)},checkUtf8(n){try{return encodeURIComponent(n),!0}catch{return!1}}}}return globalThis[Ke]}var R;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(R||(R={}));const xn=34028234663852886e22,Kn=-34028234663852886e22,Zn=4294967295,Mn=2147483647,Wn=-2147483648;class Pn{constructor(t=ut().encodeUtf8){this.encodeUtf8=t,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let t=0;for(let s=0;s<this.chunks.length;s++)t+=this.chunks[s].length;let n=new Uint8Array(t),r=0;for(let s=0;s<this.chunks.length;s++)n.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Ct(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Ze(t),kt(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.encodeUtf8(t);return this.uint32(n.byteLength),this.raw(n)}float(t){ys(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){Ct(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){Ze(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return Ze(t),t=(t<<1^t>>31)>>>0,kt(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),s=_.enc(t);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),s=_.uEnc(t);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}int64(t){let n=_.enc(t);return Fe(n.lo,n.hi,this.buf),this}sint64(t){const n=_.enc(t),r=n.hi>>31,s=n.lo<<1^r,a=(n.hi<<1|n.lo>>>31)^r;return Fe(s,a,this.buf),this}uint64(t){const n=_.uEnc(t);return Fe(n.lo,n.hi,this.buf),this}}class ct{constructor(t,n=ut().decodeUtf8){this.decodeUtf8=n,this.varint64=qr,this.uint32=ns,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength)}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t,n){let r=this.pos;switch(t){case R.Varint:for(;this.buf[this.pos++]&128;);break;case R.Bit64:this.pos+=4;case R.Bit32:this.pos+=4;break;case R.LengthDelimited:let s=this.uint32();this.pos+=s;break;case R.StartGroup:for(;;){const[a,o]=this.tag();if(o===R.EndGroup){if(n!==void 0&&a!==n)throw new Error("invalid end group tag");break}this.skip(o,a)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return _.dec(...this.varint64())}uint64(){return _.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,_.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return _.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return _.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.decodeUtf8(this.bytes())}}function Ze(e){if(typeof e=="string")e=Number(e);else if(typeof e!="number")throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>Mn||e<Wn)throw new Error("invalid int32: "+e)}function Ct(e){if(typeof e=="string")e=Number(e);else if(typeof e!="number")throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>Zn||e<0)throw new Error("invalid uint32: "+e)}function ys(e){if(typeof e=="string"){const t=e;if(e=Number(e),Number.isNaN(e)&&t!=="NaN")throw new Error("invalid float32: "+t)}else if(typeof e!="number")throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>xn||e<Kn))throw new Error("invalid float32: "+e)}function X(e,t){const n=e.fieldKind=="list"?rt(t,e):e.fieldKind=="map"?st(t,e):lt(e,t);if(n===!0)return;let r;switch(e.fieldKind){case"list":r=`expected ${$n(e)}, got ${L(t)}`;break;case"map":r=`expected ${jn(e)}, got ${L(t)}`;break;default:r=ke(e,t,n)}return new U(e,r)}function Gt(e,t,n){const r=lt(e,n);if(r!==!0)return new U(e,`list item #${t+1}: ${ke(e,n,r)}`)}function Es(e,t,n){const r=Jn(t,e.mapKey);if(r!==!0)return new U(e,`invalid map key: ${ke({scalar:e.mapKey},t,r)}`);const s=lt(e,n);if(s!==!0)return new U(e,`map entry ${L(t)}: ${ke(e,n,s)}`)}function lt(e,t){return e.scalar!==void 0?Jn(t,e.scalar):e.enum!==void 0?e.enum.open?Number.isInteger(t):e.enum.values.some(n=>n.number===t):at(t,e.message)}function Jn(e,t){switch(t){case u.DOUBLE:return typeof e=="number";case u.FLOAT:return typeof e!="number"?!1:Number.isNaN(e)||!Number.isFinite(e)?!0:e>xn||e<Kn?`${e.toFixed()} out of range`:!0;case u.INT32:case u.SFIXED32:case u.SINT32:return typeof e!="number"||!Number.isInteger(e)?!1:e>Mn||e<Wn?`${e.toFixed()} out of range`:!0;case u.FIXED32:case u.UINT32:return typeof e!="number"||!Number.isInteger(e)?!1:e>Zn||e<0?`${e.toFixed()} out of range`:!0;case u.BOOL:return typeof e=="boolean";case u.STRING:return typeof e!="string"?!1:ut().checkUtf8(e)||"invalid UTF8";case u.BYTES:return e instanceof Uint8Array;case u.INT64:case u.SFIXED64:case u.SINT64:if(typeof e=="bigint"||typeof e=="number"||typeof e=="string"&&e.length>0)try{return _.parse(e),!0}catch{return`${e} out of range`}return!1;case u.FIXED64:case u.UINT64:if(typeof e=="bigint"||typeof e=="number"||typeof e=="string"&&e.length>0)try{return _.uParse(e),!0}catch{return`${e} out of range`}return!1}}function ke(e,t,n){return n=typeof n=="string"?`: ${n}`:`, got ${L(t)}`,e.scalar!==void 0?`expected ${Ns(e.scalar)}`+n:e.enum!==void 0?`expected ${e.enum.toString()}`+n:`expected ${Xn(e.message)}`+n}function L(e){switch(typeof e){case"object":return e===null?"null":e instanceof Uint8Array?`Uint8Array(${e.length})`:Array.isArray(e)?`Array(${e.length})`:rt(e)?$n(e.field()):st(e)?jn(e.field()):at(e)?Xn(e.desc):tt(e)?`message ${e.$typeName}`:"object";case"string":return e.length>30?"string":`"${e.split('"').join('\\"')}"`;case"boolean":return String(e);case"number":return String(e);case"bigint":return String(e)+"n";default:return typeof e}}function Xn(e){return`ReflectMessage (${e.typeName})`}function $n(e){switch(e.listKind){case"message":return`ReflectList (${e.message.toString()})`;case"enum":return`ReflectList (${e.enum.toString()})`;case"scalar":return`ReflectList (${u[e.scalar]})`}}function jn(e){switch(e.mapKind){case"message":return`ReflectMap (${u[e.mapKey]}, ${e.message.toString()})`;case"enum":return`ReflectMap (${u[e.mapKey]}, ${e.enum.toString()})`;case"scalar":return`ReflectMap (${u[e.mapKey]}, ${u[e.scalar]})`}}function Ns(e){switch(e){case u.STRING:return"string";case u.BOOL:return"boolean";case u.INT64:case u.SINT64:case u.SFIXED64:return"bigint (int64)";case u.UINT64:case u.FIXED64:return"bigint (uint64)";case u.BYTES:return"Uint8Array";case u.DOUBLE:return"number (float64)";case u.FLOAT:return"number (float32)";case u.FIXED32:case u.UINT32:return"number (uint32)";case u.INT32:case u.SFIXED32:case u.SINT32:return"number (int32)"}}function V(e,t,n=!0){return new zn(e,t,n)}class zn{get sortedFields(){var t;return(t=this._sortedFields)!==null&&t!==void 0?t:this._sortedFields=this.desc.fields.concat().sort((n,r)=>n.number-r.number)}constructor(t,n,r=!0){this.lists=new Map,this.maps=new Map,this.check=r,this.desc=t,this.message=this[K]=n??D(t),this.fields=t.fields,this.oneofs=t.oneofs,this.members=t.members}findNumber(t){return this._fieldsByNumber||(this._fieldsByNumber=new Map(this.desc.fields.map(n=>[n.number,n]))),this._fieldsByNumber.get(t)}oneofCase(t){return ue(this.message,t),Cn(this.message,t)}isSet(t){return ue(this.message,t),as(this.message,t)}clear(t){ue(this.message,t),os(this.message,t)}get(t){ue(this.message,t);const n=Gn(this.message,t);switch(t.fieldKind){case"list":let r=this.lists.get(t);return(!r||r[K]!==n)&&this.lists.set(t,r=new Is(t,n,this.check)),r;case"map":let s=this.maps.get(t);return(!s||s[K]!==n)&&this.maps.set(t,s=new As(t,n,this.check)),s;case"message":return dt(t,n,this.check);case"scalar":return n===void 0?z(t.scalar,!1):mt(t,n);case"enum":return n??t.enum.values[0].number}}set(t,n){if(ue(this.message,t),this.check){const s=X(t,n);if(s)throw s}let r;t.fieldKind=="message"?r=ft(t,n):st(n)||rt(n)?r=n[K]:r=bt(t,n),Yn(this.message,t,r)}getUnknown(){return this.message.$unknown}setUnknown(t){this.message.$unknown=t}}function ue(e,t){if(t.parent.typeName!==e.$typeName)throw new U(t,`cannot use ${t.toString()} with message ${e.$typeName}`,"ForeignFieldError")}class Is{field(){return this._field}get size(){return this._arr.length}constructor(t,n,r){this._field=t,this._arr=this[K]=n,this.check=r}get(t){const n=this._arr[t];return n===void 0?void 0:Me(this._field,n,this.check)}set(t,n){if(t<0||t>=this._arr.length)throw new U(this._field,`list item #${t+1}: out of range`);if(this.check){const r=Gt(this._field,t,n);if(r)throw r}this._arr[t]=Yt(this._field,n)}add(t){if(this.check){const n=Gt(this._field,this._arr.length,t);if(n)throw n}this._arr.push(Yt(this._field,t))}clear(){this._arr.splice(0,this._arr.length)}[Symbol.iterator](){return this.values()}keys(){return this._arr.keys()}*values(){for(const t of this._arr)yield Me(this._field,t,this.check)}*entries(){for(let t=0;t<this._arr.length;t++)yield[t,Me(this._field,this._arr[t],this.check)]}}class As{constructor(t,n,r=!0){this.obj=this[K]=n??{},this.check=r,this._field=t}field(){return this._field}set(t,n){if(this.check){const r=Es(this._field,t,n);if(r)throw r}return this.obj[Se(t)]=vs(this._field,n),this}delete(t){const n=Se(t),r=Object.prototype.hasOwnProperty.call(this.obj,n);return r&&delete this.obj[n],r}clear(){for(const t of Object.keys(this.obj))delete this.obj[t]}get(t){let n=this.obj[Se(t)];return n!==void 0&&(n=We(this._field,n,this.check)),n}has(t){return Object.prototype.hasOwnProperty.call(this.obj,Se(t))}*keys(){for(const t of Object.keys(this.obj))yield Dt(t,this._field.mapKey)}*entries(){for(const t of Object.entries(this.obj))yield[Dt(t[0],this._field.mapKey),We(this._field,t[1],this.check)]}[Symbol.iterator](){return this.entries()}get size(){return Object.keys(this.obj).length}*values(){for(const t of Object.values(this.obj))yield We(this._field,t,this.check)}forEach(t,n){for(const r of this.entries())t.call(n,r[1],r[0],this)}}function ft(e,t){return at(t)?is(t.message)&&!e.oneof&&e.fieldKind=="message"?t.message.value:t.desc.typeName=="google.protobuf.Struct"&&e.parent.typeName!="google.protobuf.Value"?Qn(t.message):t.message:t}function dt(e,t,n){return t!==void 0&&(pe(e.message)&&!e.oneof&&e.fieldKind=="message"?t={$typeName:e.message.typeName,value:mt(e.message.fields[0],t)}:e.message.typeName=="google.protobuf.Struct"&&e.parent.typeName!="google.protobuf.Value"&&W(t)&&(t=Hn(t))),new zn(e.message,t,n)}function Yt(e,t){return e.listKind=="message"?ft(e,t):bt(e,t)}function Me(e,t,n){return e.listKind=="message"?dt(e,t,n):mt(e,t)}function vs(e,t){return e.mapKind=="message"?ft(e,t):bt(e,t)}function We(e,t,n){return e.mapKind=="message"?dt(e,t,n):t}function Se(e){return typeof e=="string"||typeof e=="number"?e:String(e)}function Dt(e,t){switch(t){case u.STRING:return e;case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:{const n=Number.parseInt(e);if(Number.isFinite(n))return n;break}case u.BOOL:switch(e){case"true":return!0;case"false":return!1}break;case u.UINT64:case u.FIXED64:try{return _.uParse(e)}catch{}break;default:try{return _.parse(e)}catch{}break}return e}function mt(e,t){switch(e.scalar){case u.INT64:case u.SFIXED64:case u.SINT64:"longAsString"in e&&e.longAsString&&typeof t=="string"&&(t=_.parse(t));break;case u.FIXED64:case u.UINT64:"longAsString"in e&&e.longAsString&&typeof t=="string"&&(t=_.uParse(t));break}return t}function bt(e,t){switch(e.scalar){case u.INT64:case u.SFIXED64:case u.SINT64:"longAsString"in e&&e.longAsString?t=String(t):(typeof t=="string"||typeof t=="number")&&(t=_.parse(t));break;case u.FIXED64:case u.UINT64:"longAsString"in e&&e.longAsString?t=String(t):(typeof t=="string"||typeof t=="number")&&(t=_.uParse(t));break}return t}function Hn(e){const t={$typeName:"google.protobuf.Struct",fields:{}};if(W(e))for(const[n,r]of Object.entries(e))t.fields[n]=er(r);return t}function Qn(e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=qn(r);return t}function qn(e){switch(e.kind.case){case"structValue":return Qn(e.kind.value);case"listValue":return e.kind.value.values.map(qn);case"nullValue":case void 0:return null;default:return e.kind.value}}function er(e){const t={$typeName:"google.protobuf.Value",kind:{case:void 0}};switch(typeof e){case"number":t.kind={case:"numberValue",value:e};break;case"string":t.kind={case:"stringValue",value:e};break;case"boolean":t.kind={case:"boolValue",value:e};break;case"object":if(e===null)t.kind={case:"nullValue",value:0};else if(Array.isArray(e)){const n={$typeName:"google.protobuf.ListValue",values:[]};if(Array.isArray(e))for(const r of e)n.values.push(er(r));t.kind={case:"listValue",value:n}}else t.kind={case:"structValue",value:Hn(e)};break}return t}function gt(e){const t=ws();let n=e.length*3/4;e[e.length-2]=="="?n-=2:e[e.length-1]=="="&&(n-=1);let r=new Uint8Array(n),s=0,a=0,o,i=0;for(let c=0;c<e.length;c++){if(o=t[e.charCodeAt(c)],o===void 0)switch(e[c]){case"=":a=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string")}switch(a){case 0:i=o,a=1;break;case 1:r[s++]=i<<2|(o&48)>>4,i=o,a=2;break;case 2:r[s++]=(i&15)<<4|(o&60)>>2,i=o,a=3;break;case 3:r[s++]=(i&3)<<6|o,a=0;break}}if(a==1)throw Error("invalid base64 string");return r.subarray(0,s)}function Ss(e,t="std"){const n=tr(t),r=t=="std";let s="",a=0,o,i=0;for(let c=0;c<e.length;c++)switch(o=e[c],a){case 0:s+=n[o>>2],i=(o&3)<<4,a=1;break;case 1:s+=n[i|o>>4],i=(o&15)<<2,a=2;break;case 2:s+=n[i|o>>6],s+=n[o&63],a=0;break}return a&&(s+=n[i],r&&(s+="=",a==1&&(s+="="))),s}let we,Ft,Q;function tr(e){return we||(we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ft=we.slice(0,-2).concat("-","_")),e=="url"?Ft:we}function ws(){if(!Q){Q=[];const e=tr("std");for(let t=0;t<e.length;t++)Q[e[t].charCodeAt(0)]=t;Q[45]=e.indexOf("+"),Q[95]=e.indexOf("/")}return Q}function me(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let s=e.charAt(r);switch(s){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(s),t=!1;break;default:t&&(t=!1,s=s.toUpperCase()),n.push(s);break}}return n.join("")}const Ts=new Set(["constructor","toString","toJSON","valueOf"]);function be(e){return Ts.has(e)?e+"$":e}function ht(e){for(const t of e.field)de(t,"jsonName")||(t.jsonName=me(t.name));e.nestedType.forEach(ht)}function _s(e,t){const n=e.values.find(r=>r.name===t);if(!n)throw new Error(`cannot parse ${e} default value: ${t}`);return n.number}function Rs(e,t){switch(e){case u.STRING:return t;case u.BYTES:{const n=ks(t);if(n===!1)throw new Error(`cannot parse ${u[e]} default value: ${t}`);return n}case u.INT64:case u.SFIXED64:case u.SINT64:return _.parse(t);case u.UINT64:case u.FIXED64:return _.uParse(t);case u.DOUBLE:case u.FLOAT:switch(t){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(t)}case u.BOOL:return t==="true";case u.INT32:case u.UINT32:case u.SINT32:case u.FIXED32:case u.SFIXED32:return parseInt(t,10)}}function ks(e){const t=[],n={tail:e,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(r){if(this.tail.length>=r){const s=this.tail.substring(0,r);return this.tail=this.tail.substring(r),s}return!1}};for(;n.next();)switch(n.c){case"\\":if(n.next())switch(n.c){case"\\":t.push(n.c.charCodeAt(0));break;case"b":t.push(8);break;case"f":t.push(12);break;case"n":t.push(10);break;case"r":t.push(13);break;case"t":t.push(9);break;case"v":t.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const r=n.c,s=n.take(2);if(s===!1)return!1;const a=parseInt(r+s,8);if(Number.isNaN(a))return!1;t.push(a);break}case"x":{const r=n.c,s=n.take(2);if(s===!1)return!1;const a=parseInt(r+s,16);if(Number.isNaN(a))return!1;t.push(a);break}case"u":{const r=n.c,s=n.take(4);if(s===!1)return!1;const a=parseInt(r+s,16);if(Number.isNaN(a))return!1;const o=new Uint8Array(4);new DataView(o.buffer).setInt32(0,a,!0),t.push(o[0],o[1],o[2],o[3]);break}case"U":{const r=n.c,s=n.take(8);if(s===!1)return!1;const a=_.uEnc(r+s),o=new Uint8Array(8),i=new DataView(o.buffer);i.setInt32(0,a.lo,!0),i.setInt32(4,a.hi,!0),t.push(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);break}}break;default:t.push(n.c.charCodeAt(0))}return new Uint8Array(t)}function*$e(e){switch(e.kind){case"file":for(const t of e.messages)yield t,yield*$e(t);yield*e.enums,yield*e.services,yield*e.extensions;break;case"message":for(const t of e.nestedMessages)yield t,yield*$e(t);yield*e.nestedEnums,yield*e.nestedExtensions;break}}function nr(...e){const t=Ls();if(!e.length)return t;if("$typeName"in e[0]&&e[0].$typeName=="google.protobuf.FileDescriptorSet"){for(const r of e[0].file)Mt(r,t);return t}if("$typeName"in e[0]){let o=function(i){const c=[];for(const l of i.dependency){if(t.getFile(l)!=null||a.has(l))continue;const g=s(l);if(!g)throw new Error(`Unable to resolve ${l}, imported by ${i.name}`);"kind"in g?t.addFile(g,!1,!0):(a.add(g.name),c.push(g))}return c.concat(...c.map(o))};var n=o;const r=e[0],s=e[1],a=new Set;for(const i of[r,...o(r)].reverse())Mt(i,t)}else for(const r of e)for(const s of r.files)t.addFile(s);return t}function Ls(){const e=new Map,t=new Map,n=new Map;return{kind:"registry",types:e,extendees:t,[Symbol.iterator](){return e.values()},get files(){return n.values()},addFile(r,s,a){if(n.set(r.proto.name,r),!s)for(const o of $e(r))this.add(o);if(a)for(const o of r.dependencies)this.addFile(o,s,a)},add(r){if(r.kind=="extension"){let s=t.get(r.extendee.typeName);s||t.set(r.extendee.typeName,s=new Map),s.set(r.number,r)}e.set(r.typeName,r)},get(r){return e.get(r)},getFile(r){return n.get(r)},getMessage(r){const s=e.get(r);return s?.kind=="message"?s:void 0},getEnum(r){const s=e.get(r);return s?.kind=="enum"?s:void 0},getExtension(r){const s=e.get(r);return s?.kind=="extension"?s:void 0},getExtensionFor(r,s){var a;return(a=t.get(r.typeName))===null||a===void 0?void 0:a.get(s)},getService(r){const s=e.get(r);return s?.kind=="service"?s:void 0}}}const Os=998,Us=999,Bs=9,ge=10,fe=11,Vs=12,xt=14,pt=3,Cs=2,Kt=1,Gs=0,Pe=1,Zt=2,Ys=3,Ds=1,Fs=2,xs=1,rr={998:{fieldPresence:1,enumType:2,repeatedFieldEncoding:2,utf8Validation:3,messageEncoding:1,jsonFormat:2,enforceNamingStyle:2},999:{fieldPresence:2,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2},1e3:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2}};function Mt(e,t){var n,r;const s={kind:"file",proto:e,deprecated:(r=(n=e.options)===null||n===void 0?void 0:n.deprecated)!==null&&r!==void 0?r:!1,edition:Ws(e),name:e.name.replace(/\.proto$/,""),dependencies:Ps(e,t),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${e.name}`}},a=new Map,o={get(i){return a.get(i)},add(i){var c;Y(((c=i.proto.options)===null||c===void 0?void 0:c.mapEntry)===!0),a.set(i.typeName,i)}};for(const i of e.enumType)sr(i,s,void 0,t);for(const i of e.messageType)ar(i,s,void 0,t,o);for(const i of e.service)Ks(i,s,t);je(s,t);for(const i of a.values())ze(i,t,o);for(const i of s.messages)ze(i,t,o),je(i,t);t.addFile(s,!0)}function je(e,t){switch(e.kind){case"file":for(const n of e.proto.extension){const r=He(n,e,t);e.extensions.push(r),t.add(r)}break;case"message":for(const n of e.proto.extension){const r=He(n,e,t);e.nestedExtensions.push(r),t.add(r)}for(const n of e.nestedMessages)je(n,t);break}}function ze(e,t,n){const r=e.proto.oneofDecl.map(a=>Ms(a,e)),s=new Set;for(const a of e.proto.field){const o=$s(a,r),i=He(a,e,t,o,n);e.fields.push(i),e.field[i.localName]=i,o===void 0?e.members.push(i):(o.fields.push(i),s.has(o)||(s.add(o),e.members.push(o)))}for(const a of r.filter(o=>s.has(o)))e.oneofs.push(a);for(const a of e.nestedMessages)ze(a,t,n)}function sr(e,t,n,r){var s,a,o,i,c;const l=Js(e.name,e.value),g={kind:"enum",proto:e,deprecated:(a=(s=e.options)===null||s===void 0?void 0:s.deprecated)!==null&&a!==void 0?a:!1,file:t,parent:n,open:!0,name:e.name,typeName:Ue(e,n,t),value:{},values:[],sharedPrefix:l,toString(){return`enum ${this.typeName}`}};g.open=Qs(g),r.add(g);for(const E of e.value){const v=E.name;g.values.push(g.value[E.number]={kind:"enum_value",proto:E,deprecated:(i=(o=E.options)===null||o===void 0?void 0:o.deprecated)!==null&&i!==void 0?i:!1,parent:g,name:v,localName:be(l==null?v:v.substring(l.length)),number:E.number,toString(){return`enum value ${g.typeName}.${v}`}})}((c=n?.nestedEnums)!==null&&c!==void 0?c:t.enums).push(g)}function ar(e,t,n,r,s){var a,o,i,c;const l={kind:"message",proto:e,deprecated:(o=(a=e.options)===null||a===void 0?void 0:a.deprecated)!==null&&o!==void 0?o:!1,file:t,parent:n,name:e.name,typeName:Ue(e,n,t),fields:[],field:{},oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`}};((i=e.options)===null||i===void 0?void 0:i.mapEntry)===!0?s.add(l):(((c=n?.nestedMessages)!==null&&c!==void 0?c:t.messages).push(l),r.add(l));for(const g of e.enumType)sr(g,t,l,r);for(const g of e.nestedType)ar(g,t,l,r,s)}function Ks(e,t,n){var r,s;const a={kind:"service",proto:e,deprecated:(s=(r=e.options)===null||r===void 0?void 0:r.deprecated)!==null&&s!==void 0?s:!1,file:t,name:e.name,typeName:Ue(e,void 0,t),methods:[],method:{},toString(){return`service ${this.typeName}`}};t.services.push(a),n.add(a);for(const o of e.method){const i=Zs(o,a,n);a.methods.push(i),a.method[i.localName]=i}}function Zs(e,t,n){var r,s,a,o;let i;e.clientStreaming&&e.serverStreaming?i="bidi_streaming":e.clientStreaming?i="client_streaming":e.serverStreaming?i="server_streaming":i="unary";const c=n.getMessage(x(e.inputType)),l=n.getMessage(x(e.outputType));Y(c,`invalid MethodDescriptorProto: input_type ${e.inputType} not found`),Y(l,`invalid MethodDescriptorProto: output_type ${e.inputType} not found`);const g=e.name;return{kind:"rpc",proto:e,deprecated:(s=(r=e.options)===null||r===void 0?void 0:r.deprecated)!==null&&s!==void 0?s:!1,parent:t,name:g,localName:be(g.length?be(g[0].toLowerCase()+g.substring(1)):g),methodKind:i,input:c,output:l,idempotency:(o=(a=e.options)===null||a===void 0?void 0:a.idempotencyLevel)!==null&&o!==void 0?o:Gs,toString(){return`rpc ${t.typeName}.${g}`}}}function Ms(e,t){return{kind:"oneof",proto:e,deprecated:!1,parent:t,fields:[],name:e.name,localName:be(me(e.name)),toString(){return`oneof ${t.typeName}.${this.name}`}}}function He(e,t,n,r,s){var a,o,i;const c=s===void 0,l={kind:"field",proto:e,deprecated:(o=(a=e.options)===null||a===void 0?void 0:a.deprecated)!==null&&o!==void 0?o:!1,name:e.name,number:e.number,scalar:void 0,message:void 0,enum:void 0,presence:js(e,r,c,t),listKind:void 0,mapKind:void 0,mapKey:void 0,delimitedEncoding:void 0,packed:void 0,longAsString:!1,getDefaultValue:void 0};if(c){const f=t.kind=="file"?t:t.file,h=t.kind=="file"?void 0:t,N=Ue(e,h,f);l.kind="extension",l.file=f,l.parent=h,l.oneof=void 0,l.typeName=N,l.jsonName=`[${N}]`,l.toString=()=>`extension ${N}`;const T=n.getMessage(x(e.extendee));Y(T,`invalid FieldDescriptorProto: extendee ${e.extendee} not found`),l.extendee=T}else{const f=t;Y(f.kind=="message"),l.parent=f,l.oneof=r,l.localName=r?me(e.name):be(me(e.name)),l.jsonName=e.jsonName,l.toString=()=>`field ${f.typeName}.${e.name}`}const g=e.label,E=e.type,v=(i=e.options)===null||i===void 0?void 0:i.jstype;if(g===pt){const f=E==fe?s?.get(x(e.typeName)):void 0;if(f){l.fieldKind="map";const{key:h,value:N}=Hs(f);return l.mapKey=h.scalar,l.mapKind=N.fieldKind,l.message=N.message,l.delimitedEncoding=!1,l.enum=N.enum,l.scalar=N.scalar,l}switch(l.fieldKind="list",E){case fe:case ge:l.listKind="message",l.message=n.getMessage(x(e.typeName)),Y(l.message),l.delimitedEncoding=Wt(e,t);break;case xt:l.listKind="enum",l.enum=n.getEnum(x(e.typeName)),Y(l.enum);break;default:l.listKind="scalar",l.scalar=E,l.longAsString=v==Kt;break}return l.packed=zs(e,t),l}switch(E){case fe:case ge:l.fieldKind="message",l.message=n.getMessage(x(e.typeName)),Y(l.message,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),l.delimitedEncoding=Wt(e,t),l.getDefaultValue=()=>{};break;case xt:{const f=n.getEnum(x(e.typeName));Y(f!==void 0,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),l.fieldKind="enum",l.enum=n.getEnum(x(e.typeName)),l.getDefaultValue=()=>de(e,"defaultValue")?_s(f,e.defaultValue):void 0;break}default:{l.fieldKind="scalar",l.scalar=E,l.longAsString=v==Kt,l.getDefaultValue=()=>de(e,"defaultValue")?Rs(E,e.defaultValue):void 0;break}}return l}function Ws(e){switch(e.syntax){case"":case"proto2":return Os;case"proto3":return Us;case"editions":if(e.edition in rr)return e.edition;throw new Error(`${e.name}: unsupported edition`);default:throw new Error(`${e.name}: unsupported syntax "${e.syntax}"`)}}function Ps(e,t){return e.dependency.map(n=>{const r=t.getFile(n);if(!r)throw new Error(`Cannot find ${n}, imported by ${e.name}`);return r})}function Js(e,t){const n=Xs(e)+"_";for(const r of t){if(!r.name.toLowerCase().startsWith(n))return;const s=r.name.substring(n.length);if(s.length==0||/^\d/.test(s))return}return n}function Xs(e){return(e.substring(0,1)+e.substring(1).replace(/[A-Z]/g,t=>"_"+t)).toLowerCase()}function Ue(e,t,n){let r;return t?r=`${t.typeName}.${e.name}`:n.proto.package.length>0?r=`${n.proto.package}.${e.name}`:r=`${e.name}`,r}function x(e){return e.startsWith(".")?e.substring(1):e}function $s(e,t){if(!de(e,"oneofIndex")||e.proto3Optional)return;const n=t[e.oneofIndex];return Y(n,`invalid FieldDescriptorProto: oneof #${e.oneofIndex} for field #${e.number} not found`),n}function js(e,t,n,r){if(e.label==Cs)return Ys;if(e.label==pt)return Zt;if(t||e.proto3Optional||n)return Pe;const s=ee("fieldPresence",{proto:e,parent:r});return s==Zt&&(e.type==fe||e.type==ge)?Pe:s}function zs(e,t){if(e.label!=pt)return!1;switch(e.type){case Bs:case Vs:case ge:case fe:return!1}const n=e.options;return n&&de(n,"packed")?n.packed:Ds==ee("repeatedFieldEncoding",{proto:e,parent:t})}function Hs(e){const t=e.fields.find(r=>r.number===1),n=e.fields.find(r=>r.number===2);return Y(t&&t.fieldKind=="scalar"&&t.scalar!=u.BYTES&&t.scalar!=u.FLOAT&&t.scalar!=u.DOUBLE&&n&&n.fieldKind!="list"&&n.fieldKind!="map"),{key:t,value:n}}function Qs(e){var t;return xs==ee("enumType",{proto:e.proto,parent:(t=e.parent)!==null&&t!==void 0?t:e.file})}function Wt(e,t){return e.type==ge?!0:Fs==ee("messageEncoding",{proto:e,parent:t})}function ee(e,t){var n,r;const s=(n=t.proto.options)===null||n===void 0?void 0:n.features;if(s){const a=s[e];if(a!=0)return a}if("kind"in t){if(t.kind=="message")return ee(e,(r=t.parent)!==null&&r!==void 0?r:t.file);const a=rr[t.edition];if(!a)throw new Error(`feature default for edition ${t.edition} not found`);return a[e]}return ee(e,t.parent)}function Y(e,t){if(!e)throw new Error(t)}function qs(e){const t=ea(e);return t.messageType.forEach(ht),nr(t,()=>{}).getFile(t.name)}function ea(e){return Object.assign(Object.create({syntax:"",edition:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FileDescriptorProto",dependency:[],publicDependency:[],weakDependency:[],service:[],extension:[]},e),{messageType:e.messageType.map(or),enumType:e.enumType.map(ir)}))}function or(e){var t,n,r,s,a,o,i,c;return{$typeName:"google.protobuf.DescriptorProto",name:e.name,field:(n=(t=e.field)===null||t===void 0?void 0:t.map(ta))!==null&&n!==void 0?n:[],extension:[],nestedType:(s=(r=e.nestedType)===null||r===void 0?void 0:r.map(or))!==null&&s!==void 0?s:[],enumType:(o=(a=e.enumType)===null||a===void 0?void 0:a.map(ir))!==null&&o!==void 0?o:[],extensionRange:(c=(i=e.extensionRange)===null||i===void 0?void 0:i.map(l=>Object.assign({$typeName:"google.protobuf.DescriptorProto.ExtensionRange"},l)))!==null&&c!==void 0?c:[],oneofDecl:[],reservedRange:[],reservedName:[]}}function ta(e){return Object.assign(Object.create({label:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldDescriptorProto"},e),{options:e.options?na(e.options):void 0}))}function na(e){var t,n,r;return Object.assign(Object.create({ctype:0,packed:!1,jstype:0,lazy:!1,unverifiedLazy:!1,deprecated:!1,weak:!1,debugRedact:!1,retention:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldOptions"},e),{targets:(t=e.targets)!==null&&t!==void 0?t:[],editionDefaults:(r=(n=e.editionDefaults)===null||n===void 0?void 0:n.map(a=>Object.assign({$typeName:"google.protobuf.FieldOptions.EditionDefault"},a)))!==null&&r!==void 0?r:[],uninterpretedOption:[]}))}function ir(e){return{$typeName:"google.protobuf.EnumDescriptorProto",name:e.name,reservedName:[],reservedRange:[],value:e.value.map(t=>Object.assign({$typeName:"google.protobuf.EnumValueDescriptorProto"},t))}}function ye(e,t,...n){return n.reduce((r,s)=>r.nestedMessages[s],e.messages[t])}const ra=qs({name:"google/protobuf/descriptor.proto",package:"google.protobuf",messageType:[{name:"FileDescriptorSet",field:[{name:"file",number:1,type:11,label:3,typeName:".google.protobuf.FileDescriptorProto"}],extensionRange:[{start:536e6,end:536000001}]},{name:"FileDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"package",number:2,type:9,label:1},{name:"dependency",number:3,type:9,label:3},{name:"public_dependency",number:10,type:5,label:3},{name:"weak_dependency",number:11,type:5,label:3},{name:"message_type",number:4,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:5,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"service",number:6,type:11,label:3,typeName:".google.protobuf.ServiceDescriptorProto"},{name:"extension",number:7,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FileOptions"},{name:"source_code_info",number:9,type:11,label:1,typeName:".google.protobuf.SourceCodeInfo"},{name:"syntax",number:12,type:9,label:1},{name:"edition",number:14,type:14,label:1,typeName:".google.protobuf.Edition"}]},{name:"DescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"field",number:2,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"extension",number:6,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"nested_type",number:3,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"extension_range",number:5,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ExtensionRange"},{name:"oneof_decl",number:8,type:11,label:3,typeName:".google.protobuf.OneofDescriptorProto"},{name:"options",number:7,type:11,label:1,typeName:".google.protobuf.MessageOptions"},{name:"reserved_range",number:9,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ReservedRange"},{name:"reserved_name",number:10,type:9,label:3}],nestedType:[{name:"ExtensionRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ExtensionRangeOptions"}]},{name:"ReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"ExtensionRangeOptions",field:[{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"},{name:"declaration",number:2,type:11,label:3,typeName:".google.protobuf.ExtensionRangeOptions.Declaration",options:{retention:2}},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"verification",number:3,type:14,label:1,typeName:".google.protobuf.ExtensionRangeOptions.VerificationState",defaultValue:"UNVERIFIED",options:{retention:2}}],nestedType:[{name:"Declaration",field:[{name:"number",number:1,type:5,label:1},{name:"full_name",number:2,type:9,label:1},{name:"type",number:3,type:9,label:1},{name:"reserved",number:5,type:8,label:1},{name:"repeated",number:6,type:8,label:1}]}],enumType:[{name:"VerificationState",value:[{name:"DECLARATION",number:0},{name:"UNVERIFIED",number:1}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:3,type:5,label:1},{name:"label",number:4,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Label"},{name:"type",number:5,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Type"},{name:"type_name",number:6,type:9,label:1},{name:"extendee",number:2,type:9,label:1},{name:"default_value",number:7,type:9,label:1},{name:"oneof_index",number:9,type:5,label:1},{name:"json_name",number:10,type:9,label:1},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FieldOptions"},{name:"proto3_optional",number:17,type:8,label:1}],enumType:[{name:"Type",value:[{name:"TYPE_DOUBLE",number:1},{name:"TYPE_FLOAT",number:2},{name:"TYPE_INT64",number:3},{name:"TYPE_UINT64",number:4},{name:"TYPE_INT32",number:5},{name:"TYPE_FIXED64",number:6},{name:"TYPE_FIXED32",number:7},{name:"TYPE_BOOL",number:8},{name:"TYPE_STRING",number:9},{name:"TYPE_GROUP",number:10},{name:"TYPE_MESSAGE",number:11},{name:"TYPE_BYTES",number:12},{name:"TYPE_UINT32",number:13},{name:"TYPE_ENUM",number:14},{name:"TYPE_SFIXED32",number:15},{name:"TYPE_SFIXED64",number:16},{name:"TYPE_SINT32",number:17},{name:"TYPE_SINT64",number:18}]},{name:"Label",value:[{name:"LABEL_OPTIONAL",number:1},{name:"LABEL_REPEATED",number:3},{name:"LABEL_REQUIRED",number:2}]}]},{name:"OneofDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"options",number:2,type:11,label:1,typeName:".google.protobuf.OneofOptions"}]},{name:"EnumDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"value",number:2,type:11,label:3,typeName:".google.protobuf.EnumValueDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumOptions"},{name:"reserved_range",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto.EnumReservedRange"},{name:"reserved_name",number:5,type:9,label:3}],nestedType:[{name:"EnumReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"EnumValueDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumValueOptions"}]},{name:"ServiceDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"method",number:2,type:11,label:3,typeName:".google.protobuf.MethodDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ServiceOptions"}]},{name:"MethodDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"input_type",number:2,type:9,label:1},{name:"output_type",number:3,type:9,label:1},{name:"options",number:4,type:11,label:1,typeName:".google.protobuf.MethodOptions"},{name:"client_streaming",number:5,type:8,label:1,defaultValue:"false"},{name:"server_streaming",number:6,type:8,label:1,defaultValue:"false"}]},{name:"FileOptions",field:[{name:"java_package",number:1,type:9,label:1},{name:"java_outer_classname",number:8,type:9,label:1},{name:"java_multiple_files",number:10,type:8,label:1,defaultValue:"false"},{name:"java_generate_equals_and_hash",number:20,type:8,label:1,options:{deprecated:!0}},{name:"java_string_check_utf8",number:27,type:8,label:1,defaultValue:"false"},{name:"optimize_for",number:9,type:14,label:1,typeName:".google.protobuf.FileOptions.OptimizeMode",defaultValue:"SPEED"},{name:"go_package",number:11,type:9,label:1},{name:"cc_generic_services",number:16,type:8,label:1,defaultValue:"false"},{name:"java_generic_services",number:17,type:8,label:1,defaultValue:"false"},{name:"py_generic_services",number:18,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:23,type:8,label:1,defaultValue:"false"},{name:"cc_enable_arenas",number:31,type:8,label:1,defaultValue:"true"},{name:"objc_class_prefix",number:36,type:9,label:1},{name:"csharp_namespace",number:37,type:9,label:1},{name:"swift_prefix",number:39,type:9,label:1},{name:"php_class_prefix",number:40,type:9,label:1},{name:"php_namespace",number:41,type:9,label:1},{name:"php_metadata_namespace",number:44,type:9,label:1},{name:"ruby_package",number:45,type:9,label:1},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"OptimizeMode",value:[{name:"SPEED",number:1},{name:"CODE_SIZE",number:2},{name:"LITE_RUNTIME",number:3}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"MessageOptions",field:[{name:"message_set_wire_format",number:1,type:8,label:1,defaultValue:"false"},{name:"no_standard_descriptor_accessor",number:2,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"map_entry",number:7,type:8,label:1},{name:"deprecated_legacy_json_field_conflicts",number:11,type:8,label:1,options:{deprecated:!0}},{name:"features",number:12,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldOptions",field:[{name:"ctype",number:1,type:14,label:1,typeName:".google.protobuf.FieldOptions.CType",defaultValue:"STRING"},{name:"packed",number:2,type:8,label:1},{name:"jstype",number:6,type:14,label:1,typeName:".google.protobuf.FieldOptions.JSType",defaultValue:"JS_NORMAL"},{name:"lazy",number:5,type:8,label:1,defaultValue:"false"},{name:"unverified_lazy",number:15,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"weak",number:10,type:8,label:1,defaultValue:"false"},{name:"debug_redact",number:16,type:8,label:1,defaultValue:"false"},{name:"retention",number:17,type:14,label:1,typeName:".google.protobuf.FieldOptions.OptionRetention"},{name:"targets",number:19,type:14,label:3,typeName:".google.protobuf.FieldOptions.OptionTargetType"},{name:"edition_defaults",number:20,type:11,label:3,typeName:".google.protobuf.FieldOptions.EditionDefault"},{name:"features",number:21,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"feature_support",number:22,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],nestedType:[{name:"EditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"value",number:2,type:9,label:1}]},{name:"FeatureSupport",field:[{name:"edition_introduced",number:1,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"edition_deprecated",number:2,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"deprecation_warning",number:3,type:9,label:1},{name:"edition_removed",number:4,type:14,label:1,typeName:".google.protobuf.Edition"}]}],enumType:[{name:"CType",value:[{name:"STRING",number:0},{name:"CORD",number:1},{name:"STRING_PIECE",number:2}]},{name:"JSType",value:[{name:"JS_NORMAL",number:0},{name:"JS_STRING",number:1},{name:"JS_NUMBER",number:2}]},{name:"OptionRetention",value:[{name:"RETENTION_UNKNOWN",number:0},{name:"RETENTION_RUNTIME",number:1},{name:"RETENTION_SOURCE",number:2}]},{name:"OptionTargetType",value:[{name:"TARGET_TYPE_UNKNOWN",number:0},{name:"TARGET_TYPE_FILE",number:1},{name:"TARGET_TYPE_EXTENSION_RANGE",number:2},{name:"TARGET_TYPE_MESSAGE",number:3},{name:"TARGET_TYPE_FIELD",number:4},{name:"TARGET_TYPE_ONEOF",number:5},{name:"TARGET_TYPE_ENUM",number:6},{name:"TARGET_TYPE_ENUM_ENTRY",number:7},{name:"TARGET_TYPE_SERVICE",number:8},{name:"TARGET_TYPE_METHOD",number:9}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"OneofOptions",field:[{name:"features",number:1,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumOptions",field:[{name:"allow_alias",number:2,type:8,label:1},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"deprecated_legacy_json_field_conflicts",number:6,type:8,label:1,options:{deprecated:!0}},{name:"features",number:7,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumValueOptions",field:[{name:"deprecated",number:1,type:8,label:1,defaultValue:"false"},{name:"features",number:2,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"debug_redact",number:3,type:8,label:1,defaultValue:"false"},{name:"feature_support",number:4,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"ServiceOptions",field:[{name:"features",number:34,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"MethodOptions",field:[{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"idempotency_level",number:34,type:14,label:1,typeName:".google.protobuf.MethodOptions.IdempotencyLevel",defaultValue:"IDEMPOTENCY_UNKNOWN"},{name:"features",number:35,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"IdempotencyLevel",value:[{name:"IDEMPOTENCY_UNKNOWN",number:0},{name:"NO_SIDE_EFFECTS",number:1},{name:"IDEMPOTENT",number:2}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"UninterpretedOption",field:[{name:"name",number:2,type:11,label:3,typeName:".google.protobuf.UninterpretedOption.NamePart"},{name:"identifier_value",number:3,type:9,label:1},{name:"positive_int_value",number:4,type:4,label:1},{name:"negative_int_value",number:5,type:3,label:1},{name:"double_value",number:6,type:1,label:1},{name:"string_value",number:7,type:12,label:1},{name:"aggregate_value",number:8,type:9,label:1}],nestedType:[{name:"NamePart",field:[{name:"name_part",number:1,type:9,label:2},{name:"is_extension",number:2,type:8,label:2}]}]},{name:"FeatureSet",field:[{name:"field_presence",number:1,type:14,label:1,typeName:".google.protobuf.FeatureSet.FieldPresence",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPLICIT",edition:900},{value:"IMPLICIT",edition:999},{value:"EXPLICIT",edition:1e3}]}},{name:"enum_type",number:2,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnumType",options:{retention:1,targets:[6,1],editionDefaults:[{value:"CLOSED",edition:900},{value:"OPEN",edition:999}]}},{name:"repeated_field_encoding",number:3,type:14,label:1,typeName:".google.protobuf.FeatureSet.RepeatedFieldEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPANDED",edition:900},{value:"PACKED",edition:999}]}},{name:"utf8_validation",number:4,type:14,label:1,typeName:".google.protobuf.FeatureSet.Utf8Validation",options:{retention:1,targets:[4,1],editionDefaults:[{value:"NONE",edition:900},{value:"VERIFY",edition:999}]}},{name:"message_encoding",number:5,type:14,label:1,typeName:".google.protobuf.FeatureSet.MessageEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"LENGTH_PREFIXED",edition:900}]}},{name:"json_format",number:6,type:14,label:1,typeName:".google.protobuf.FeatureSet.JsonFormat",options:{retention:1,targets:[3,6,1],editionDefaults:[{value:"LEGACY_BEST_EFFORT",edition:900},{value:"ALLOW",edition:999}]}},{name:"enforce_naming_style",number:7,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnforceNamingStyle",options:{retention:2,targets:[1,2,3,4,5,6,7,8,9],editionDefaults:[{value:"STYLE_LEGACY",edition:900},{value:"STYLE2024",edition:1001}]}}],enumType:[{name:"FieldPresence",value:[{name:"FIELD_PRESENCE_UNKNOWN",number:0},{name:"EXPLICIT",number:1},{name:"IMPLICIT",number:2},{name:"LEGACY_REQUIRED",number:3}]},{name:"EnumType",value:[{name:"ENUM_TYPE_UNKNOWN",number:0},{name:"OPEN",number:1},{name:"CLOSED",number:2}]},{name:"RepeatedFieldEncoding",value:[{name:"REPEATED_FIELD_ENCODING_UNKNOWN",number:0},{name:"PACKED",number:1},{name:"EXPANDED",number:2}]},{name:"Utf8Validation",value:[{name:"UTF8_VALIDATION_UNKNOWN",number:0},{name:"VERIFY",number:2},{name:"NONE",number:3}]},{name:"MessageEncoding",value:[{name:"MESSAGE_ENCODING_UNKNOWN",number:0},{name:"LENGTH_PREFIXED",number:1},{name:"DELIMITED",number:2}]},{name:"JsonFormat",value:[{name:"JSON_FORMAT_UNKNOWN",number:0},{name:"ALLOW",number:1},{name:"LEGACY_BEST_EFFORT",number:2}]},{name:"EnforceNamingStyle",value:[{name:"ENFORCE_NAMING_STYLE_UNKNOWN",number:0},{name:"STYLE2024",number:1},{name:"STYLE_LEGACY",number:2}]}],extensionRange:[{start:1e3,end:9995},{start:9995,end:1e4},{start:1e4,end:10001}]},{name:"FeatureSetDefaults",field:[{name:"defaults",number:1,type:11,label:3,typeName:".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},{name:"minimum_edition",number:4,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"maximum_edition",number:5,type:14,label:1,typeName:".google.protobuf.Edition"}],nestedType:[{name:"FeatureSetEditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"overridable_features",number:4,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"fixed_features",number:5,type:11,label:1,typeName:".google.protobuf.FeatureSet"}]}]},{name:"SourceCodeInfo",field:[{name:"location",number:1,type:11,label:3,typeName:".google.protobuf.SourceCodeInfo.Location"}],nestedType:[{name:"Location",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"span",number:2,type:5,label:3,options:{packed:!0}},{name:"leading_comments",number:3,type:9,label:1},{name:"trailing_comments",number:4,type:9,label:1},{name:"leading_detached_comments",number:6,type:9,label:3}]}],extensionRange:[{start:536e6,end:536000001}]},{name:"GeneratedCodeInfo",field:[{name:"annotation",number:1,type:11,label:3,typeName:".google.protobuf.GeneratedCodeInfo.Annotation"}],nestedType:[{name:"Annotation",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"source_file",number:2,type:9,label:1},{name:"begin",number:3,type:5,label:1},{name:"end",number:4,type:5,label:1},{name:"semantic",number:5,type:14,label:1,typeName:".google.protobuf.GeneratedCodeInfo.Annotation.Semantic"}],enumType:[{name:"Semantic",value:[{name:"NONE",number:0},{name:"SET",number:1},{name:"ALIAS",number:2}]}]}]}],enumType:[{name:"Edition",value:[{name:"EDITION_UNKNOWN",number:0},{name:"EDITION_LEGACY",number:900},{name:"EDITION_PROTO2",number:998},{name:"EDITION_PROTO3",number:999},{name:"EDITION_2023",number:1e3},{name:"EDITION_2024",number:1001},{name:"EDITION_1_TEST_ONLY",number:1},{name:"EDITION_2_TEST_ONLY",number:2},{name:"EDITION_99997_TEST_ONLY",number:99997},{name:"EDITION_99998_TEST_ONLY",number:99998},{name:"EDITION_99999_TEST_ONLY",number:99999},{name:"EDITION_MAX",number:2147483647}]}]}),sa=ye(ra,1);var Pt;(function(e){e[e.DECLARATION=0]="DECLARATION",e[e.UNVERIFIED=1]="UNVERIFIED"})(Pt||(Pt={}));var Jt;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.GROUP=10]="GROUP",e[e.MESSAGE=11]="MESSAGE",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.ENUM=14]="ENUM",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(Jt||(Jt={}));var Xt;(function(e){e[e.OPTIONAL=1]="OPTIONAL",e[e.REPEATED=3]="REPEATED",e[e.REQUIRED=2]="REQUIRED"})(Xt||(Xt={}));var $t;(function(e){e[e.SPEED=1]="SPEED",e[e.CODE_SIZE=2]="CODE_SIZE",e[e.LITE_RUNTIME=3]="LITE_RUNTIME"})($t||($t={}));var jt;(function(e){e[e.STRING=0]="STRING",e[e.CORD=1]="CORD",e[e.STRING_PIECE=2]="STRING_PIECE"})(jt||(jt={}));var zt;(function(e){e[e.JS_NORMAL=0]="JS_NORMAL",e[e.JS_STRING=1]="JS_STRING",e[e.JS_NUMBER=2]="JS_NUMBER"})(zt||(zt={}));var Ht;(function(e){e[e.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",e[e.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",e[e.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(Ht||(Ht={}));var Qt;(function(e){e[e.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",e[e.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",e[e.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",e[e.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",e[e.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",e[e.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",e[e.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",e[e.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",e[e.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",e[e.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(Qt||(Qt={}));var qt;(function(e){e[e.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",e[e.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",e[e.IDEMPOTENT=2]="IDEMPOTENT"})(qt||(qt={}));var en;(function(e){e[e.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",e[e.EXPLICIT=1]="EXPLICIT",e[e.IMPLICIT=2]="IMPLICIT",e[e.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(en||(en={}));var tn;(function(e){e[e.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED"})(tn||(tn={}));var nn;(function(e){e[e.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",e[e.PACKED=1]="PACKED",e[e.EXPANDED=2]="EXPANDED"})(nn||(nn={}));var rn;(function(e){e[e.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",e[e.VERIFY=2]="VERIFY",e[e.NONE=3]="NONE"})(rn||(rn={}));var sn;(function(e){e[e.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",e[e.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",e[e.DELIMITED=2]="DELIMITED"})(sn||(sn={}));var an;(function(e){e[e.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",e[e.ALLOW=1]="ALLOW",e[e.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(an||(an={}));var on;(function(e){e[e.ENFORCE_NAMING_STYLE_UNKNOWN=0]="ENFORCE_NAMING_STYLE_UNKNOWN",e[e.STYLE2024=1]="STYLE2024",e[e.STYLE_LEGACY=2]="STYLE_LEGACY"})(on||(on={}));var un;(function(e){e[e.NONE=0]="NONE",e[e.SET=1]="SET",e[e.ALIAS=2]="ALIAS"})(un||(un={}));var cn;(function(e){e[e.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",e[e.EDITION_LEGACY=900]="EDITION_LEGACY",e[e.EDITION_PROTO2=998]="EDITION_PROTO2",e[e.EDITION_PROTO3=999]="EDITION_PROTO3",e[e.EDITION_2023=1e3]="EDITION_2023",e[e.EDITION_2024=1001]="EDITION_2024",e[e.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",e[e.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",e[e.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",e[e.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",e[e.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY",e[e.EDITION_MAX=2147483647]="EDITION_MAX"})(cn||(cn={}));const ln={readUnknownFields:!0};function aa(e){return e?Object.assign(Object.assign({},ln),e):ln}function Ee(e,t,n){const r=V(e,void 0,!1);return ur(r,new ct(t),aa(n),!1,t.byteLength),r.message}function ur(e,t,n,r,s){var a;const o=r?t.len:t.pos+s;let i,c;const l=(a=e.getUnknown())!==null&&a!==void 0?a:[];for(;t.pos<o&&([i,c]=t.tag(),!(r&&c==R.EndGroup));){const g=e.findNumber(i);if(!g){const E=t.skip(c,i);n.readUnknownFields&&l.push({no:i,wireType:c,data:E});continue}cr(e,t,g,c,n)}if(r&&(c!=R.EndGroup||i!==s))throw new Error("invalid end group tag");l.length>0&&e.setUnknown(l)}function cr(e,t,n,r,s){switch(n.fieldKind){case"scalar":e.set(n,te(t,n.scalar));break;case"enum":e.set(n,te(t,u.INT32));break;case"message":e.set(n,yt(t,s,n,e.get(n)));break;case"list":ia(t,r,e.get(n),s);break;case"map":oa(t,e.get(n),s);break}}function oa(e,t,n){const r=t.field();let s,a;const o=e.pos+e.uint32();for(;e.pos<o;){const[i]=e.tag();switch(i){case 1:s=te(e,r.mapKey);break;case 2:switch(r.mapKind){case"scalar":a=te(e,r.scalar);break;case"enum":a=e.int32();break;case"message":a=yt(e,n,r);break}break}}if(s===void 0&&(s=z(r.mapKey,!1)),a===void 0)switch(r.mapKind){case"scalar":a=z(r.scalar,!1);break;case"enum":a=r.enum.values[0].number;break;case"message":a=V(r.message,void 0,!1);break}t.set(s,a)}function ia(e,t,n,r){var s;const a=n.field();if(a.listKind==="message"){n.add(yt(e,r,a));return}const o=(s=a.scalar)!==null&&s!==void 0?s:u.INT32;if(!(t==R.LengthDelimited&&o!=u.STRING&&o!=u.BYTES)){n.add(te(e,o));return}const c=e.uint32()+e.pos;for(;e.pos<c;)n.add(te(e,o))}function yt(e,t,n,r){const s=n.delimitedEncoding,a=r??V(n.message,void 0,!1);return ur(a,e,t,s,s?n.number:e.uint32()),a}function te(e,t){switch(t){case u.STRING:return e.string();case u.BOOL:return e.bool();case u.DOUBLE:return e.double();case u.FLOAT:return e.float();case u.INT32:return e.int32();case u.INT64:return e.int64();case u.UINT64:return e.uint64();case u.FIXED64:return e.fixed64();case u.BYTES:return e.bytes();case u.FIXED32:return e.fixed32();case u.SFIXED32:return e.sfixed32();case u.SFIXED64:return e.sfixed64();case u.SINT64:return e.sint64();case u.UINT32:return e.uint32();case u.SINT32:return e.sint32()}}function H(e,t){var n;const r=Ee(sa,gt(e));return r.messageType.forEach(ht),r.dependency=(n=t?.map(a=>a.proto.name))!==null&&n!==void 0?n:[],nr(r,a=>t?.find(o=>o.proto.name===a)).getFile(r.name)}const lr=H("Chlnb29nbGUvcHJvdG9idWYvYW55LnByb3RvEg9nb29nbGUucHJvdG9idWYiJgoDQW55EhAKCHR5cGVfdXJsGAEgASgJEg0KBXZhbHVlGAIgASgMQnYKE2NvbS5nb29nbGUucHJvdG9idWZCCEFueVByb3RvUAFaLGdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2FueXBiogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),ua=ye(lr,0),ca=3,fn={writeUnknownFields:!0};function la(e){return e?Object.assign(Object.assign({},fn),e):fn}function fr(e,t,n){return Le(new Pn,la(n),V(e,t)).finish()}function Le(e,t,n){var r;for(const s of n.sortedFields){if(!n.isSet(s)){if(s.presence==ca)throw new Error(`cannot encode ${s} to binary: required field not set`);continue}dr(e,t,n,s)}if(t.writeUnknownFields)for(const{no:s,wireType:a,data:o}of(r=n.getUnknown())!==null&&r!==void 0?r:[])e.tag(s,a).raw(o);return e}function dr(e,t,n,r){var s;switch(r.fieldKind){case"scalar":case"enum":Oe(e,n.desc.typeName,r.name,(s=r.scalar)!==null&&s!==void 0?s:u.INT32,r.number,n.get(r));break;case"list":fa(e,t,r,n.get(r));break;case"message":mr(e,t,r,n.get(r));break;case"map":for(const[a,o]of n.get(r))da(e,t,r,a,o);break}}function Oe(e,t,n,r,s,a){br(e.tag(s,ma(r)),t,n,r,a)}function mr(e,t,n,r){n.delimitedEncoding?Le(e.tag(n.number,R.StartGroup),t,r).tag(n.number,R.EndGroup):Le(e.tag(n.number,R.LengthDelimited).fork(),t,r).join()}function fa(e,t,n,r){var s;if(n.listKind=="message"){for(const o of r)mr(e,t,n,o);return}const a=(s=n.scalar)!==null&&s!==void 0?s:u.INT32;if(n.packed){if(!r.size)return;e.tag(n.number,R.LengthDelimited).fork();for(const o of r)br(e,n.parent.typeName,n.name,a,o);e.join();return}for(const o of r)Oe(e,n.parent.typeName,n.name,a,n.number,o)}function da(e,t,n,r,s){var a;switch(e.tag(n.number,R.LengthDelimited).fork(),Oe(e,n.parent.typeName,n.name,n.mapKey,1,r),n.mapKind){case"scalar":case"enum":Oe(e,n.parent.typeName,n.name,(a=n.scalar)!==null&&a!==void 0?a:u.INT32,2,s);break;case"message":Le(e.tag(2,R.LengthDelimited).fork(),t,s).join();break}e.join()}function br(e,t,n,r,s){try{switch(r){case u.STRING:e.string(s);break;case u.BOOL:e.bool(s);break;case u.DOUBLE:e.double(s);break;case u.FLOAT:e.float(s);break;case u.INT32:e.int32(s);break;case u.INT64:e.int64(s);break;case u.UINT64:e.uint64(s);break;case u.FIXED64:e.fixed64(s);break;case u.BYTES:e.bytes(s);break;case u.FIXED32:e.fixed32(s);break;case u.SFIXED32:e.sfixed32(s);break;case u.SFIXED64:e.sfixed64(s);break;case u.SINT64:e.sint64(s);break;case u.UINT32:e.uint32(s);break;case u.SINT32:e.sint32(s);break}}catch(a){throw a instanceof Error?new Error(`cannot encode field ${t}.${n} to binary: ${a.message}`):a}}function ma(e){switch(e){case u.BYTES:case u.STRING:return R.LengthDelimited;case u.DOUBLE:case u.FIXED64:case u.SFIXED64:return R.Bit64;case u.FIXED32:case u.SFIXED32:case u.FLOAT:return R.Bit32;default:return R.Varint}}function ba(e,t,n){let r=!1;return n||(n=D(ua),r=!0),n.value=fr(e,t),n.typeUrl=pa(t.$typeName),r?n:void 0}function ga(e,t){if(e.typeUrl==="")return!1;const n=typeof t=="string"?t:t.typeName,r=gr(e.typeUrl);return n===r}function ha(e,t){if(e.typeUrl==="")return;const n=t.kind=="message"?t:t.getMessage(gr(e.typeUrl));if(!(!n||!ga(e,n)))return Ee(n,e.value)}function pa(e){return`type.googleapis.com/${e}`}function gr(e){const t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw new Error(`invalid type url: ${e}`);return n}const Et=H("Chxnb29nbGUvcHJvdG9idWYvc3RydWN0LnByb3RvEg9nb29nbGUucHJvdG9idWYihAEKBlN0cnVjdBIzCgZmaWVsZHMYASADKAsyIy5nb29nbGUucHJvdG9idWYuU3RydWN0LkZpZWxkc0VudHJ5GkUKC0ZpZWxkc0VudHJ5EgsKA2tleRgBIAEoCRIlCgV2YWx1ZRgCIAEoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZToCOAEi6gEKBVZhbHVlEjAKCm51bGxfdmFsdWUYASABKA4yGi5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlSAASFgoMbnVtYmVyX3ZhbHVlGAIgASgBSAASFgoMc3RyaW5nX3ZhbHVlGAMgASgJSAASFAoKYm9vbF92YWx1ZRgEIAEoCEgAEi8KDHN0cnVjdF92YWx1ZRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIABIwCgpsaXN0X3ZhbHVlGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZUgAQgYKBGtpbmQiMwoJTGlzdFZhbHVlEiYKBnZhbHVlcxgBIAMoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZSobCglOdWxsVmFsdWUSDgoKTlVMTF9WQUxVRRAAQn8KE2NvbS5nb29nbGUucHJvdG9idWZCC1N0cnVjdFByb3RvUAFaL2dvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3N0cnVjdHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),ya=ye(Et,0),hr=ye(Et,1),Ea=ye(Et,2);var Qe;(function(e){e[e.NULL_VALUE=0]="NULL_VALUE"})(Qe||(Qe={}));function Na(e,t){pr(t,e);const n=Aa(e.$unknown,t),[r,s,a]=Be(t);for(const o of n)cr(r,new ct(o.data),s,o.wireType,{readUnknownFields:!0});return a()}function Ia(e,t,n){var r;pr(t,e);const s=((r=e.$unknown)!==null&&r!==void 0?r:[]).filter(l=>l.no!==t.number),[a,o]=Be(t,n),i=new Pn;dr(i,{writeUnknownFields:!0},a,o);const c=new ct(i.finish());for(;c.pos<c.len;){const[l,g]=c.tag(),E=c.skip(g,l);s.push({no:l,wireType:g,data:E})}e.$unknown=s}function Aa(e,t){if(e===void 0)return[];if(t.fieldKind==="enum"||t.fieldKind==="scalar"){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.number)return[e[n]];return[]}return e.filter(n=>n.no===t.number)}function Be(e,t){const n=e.typeName,r=Object.assign(Object.assign({},e),{kind:"field",parent:e.extendee,localName:n}),s=Object.assign(Object.assign({},e.extendee),{fields:[r],members:[r],oneofs:[]}),a=D(s,t!==void 0?{[n]:t}:void 0);return[V(s,a),r,()=>{const o=a[n];if(o===void 0){const i=e.message;return pe(i)?z(i.fields[0].scalar,i.fields[0].longAsString):D(i)}return o}]}function pr(e,t){if(e.extendee.typeName!=t.$typeName)throw new Error(`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}const va=3,Sa=2,dn={alwaysEmitImplicit:!1,enumAsInteger:!1,useProtoFieldName:!1};function wa(e){return e?Object.assign(Object.assign({},dn),e):dn}function Ta(e,t,n){return Ne(V(e,t),wa(n))}function _a(e,t,n){var r;const s=Ta(e,t,n);return JSON.stringify(s,null,(r=n?.prettySpaces)!==null&&r!==void 0?r:0)}function Ne(e,t){var n;const r=Oa(e,t);if(r!==void 0)return r;const s={};for(const a of e.sortedFields){if(!e.isSet(a)){if(a.presence==va)throw new Error(`cannot encode ${a} to JSON: required field not set`);if(!t.alwaysEmitImplicit||a.presence!==Sa)continue}const o=mn(a,e.get(a),t);o!==void 0&&(s[La(a,t)]=o)}if(t.registry){const a=new Set;for(const{no:o}of(n=e.getUnknown())!==null&&n!==void 0?n:[])if(!a.has(o)){a.add(o);const i=t.registry.getExtensionFor(e.desc,o);if(!i)continue;const c=Na(e.message,i),[l,g]=Be(i,c),E=mn(g,l.get(g),t);E!==void 0&&(s[i.jsonName]=E)}}return s}function mn(e,t,n){switch(e.fieldKind){case"scalar":return Ve(e,t);case"message":return Ne(t,n);case"enum":return Nt(e.enum,t,n.enumAsInteger);case"list":return ka(t,n);case"map":return Ra(t,n)}}function Ra(e,t){const n=e.field(),r={};switch(n.mapKind){case"scalar":for(const[s,a]of e)r[s]=Ve(n,a);break;case"message":for(const[s,a]of e)r[s]=Ne(a,t);break;case"enum":for(const[s,a]of e)r[s]=Nt(n.enum,a,t.enumAsInteger);break}return t.alwaysEmitImplicit||e.size>0?r:void 0}function ka(e,t){const n=e.field(),r=[];switch(n.listKind){case"scalar":for(const s of e)r.push(Ve(n,s));break;case"enum":for(const s of e)r.push(Nt(n.enum,s,t.enumAsInteger));break;case"message":for(const s of e)r.push(Ne(s,t));break}return t.alwaysEmitImplicit||r.length>0?r:void 0}function Nt(e,t,n){var r;if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: expected number, got ${L(t)}`);if(e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const s=e.value[t];return(r=s?.name)!==null&&r!==void 0?r:t}function Ve(e,t){var n,r,s,a,o,i;switch(e.scalar){case u.INT32:case u.SFIXED32:case u.SINT32:case u.FIXED32:case u.UINT32:if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: ${(n=X(e,t))===null||n===void 0?void 0:n.message}`);return t;case u.FLOAT:case u.DOUBLE:if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: ${(r=X(e,t))===null||r===void 0?void 0:r.message}`);return Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case u.STRING:if(typeof t!="string")throw new Error(`cannot encode ${e} to JSON: ${(s=X(e,t))===null||s===void 0?void 0:s.message}`);return t;case u.BOOL:if(typeof t!="boolean")throw new Error(`cannot encode ${e} to JSON: ${(a=X(e,t))===null||a===void 0?void 0:a.message}`);return t;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:if(typeof t!="bigint"&&typeof t!="string")throw new Error(`cannot encode ${e} to JSON: ${(o=X(e,t))===null||o===void 0?void 0:o.message}`);return t.toString();case u.BYTES:if(t instanceof Uint8Array)return Ss(t);throw new Error(`cannot encode ${e} to JSON: ${(i=X(e,t))===null||i===void 0?void 0:i.message}`)}}function La(e,t){return t.useProtoFieldName?e.name:e.jsonName}function Oa(e,t){if(e.desc.typeName.startsWith("google.protobuf."))switch(e.desc.typeName){case"google.protobuf.Any":return Ua(e.message,t);case"google.protobuf.Timestamp":return Ca(e.message);case"google.protobuf.Duration":return Ba(e.message);case"google.protobuf.FieldMask":return Va(e.message);case"google.protobuf.Struct":return yr(e.message);case"google.protobuf.Value":return It(e.message);case"google.protobuf.ListValue":return Er(e.message);default:if(pe(e.desc)){const n=e.desc.fields[0];return Ve(n,e.get(n))}return}}function Ua(e,t){if(e.typeUrl==="")return{};const{registry:n}=t;let r,s;if(n&&(r=ha(e,n),r&&(s=n.getMessage(r.$typeName))),!s||!r)throw new Error(`cannot encode message ${e.$typeName} to JSON: "${e.typeUrl}" is not in the type registry`);let a=Ne(V(s,r),t);return(s.typeName.startsWith("google.protobuf.")||a===null||Array.isArray(a)||typeof a!="object")&&(a={value:a}),a["@type"]=e.typeUrl,a}function Ba(e){if(Number(e.seconds)>315576e6||Number(e.seconds)<-315576e6)throw new Error(`cannot encode message ${e.$typeName} to JSON: value out of range`);let t=e.seconds.toString();if(e.nanos!==0){let n=Math.abs(e.nanos).toString();n="0".repeat(9-n.length)+n,n.substring(3)==="000000"?n=n.substring(0,3):n.substring(6)==="000"&&(n=n.substring(0,6)),t+="."+n,e.nanos<0&&Number(e.seconds)==0&&(t="-"+t)}return t+"s"}function Va(e){return e.paths.map(t=>{if(t.match(/_[0-9]?_/g)||t.match(/[A-Z]/g))throw new Error(`cannot encode message ${e.$typeName} to JSON: lowerCamelCase of path name "`+t+'" is irreversible');return me(t)}).join(",")}function yr(e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=It(r);return t}function It(e){switch(e.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(e.kind.value))throw new Error(`${e.$typeName} cannot be NaN or Infinity`);return e.kind.value;case"boolValue":return e.kind.value;case"stringValue":return e.kind.value;case"structValue":return yr(e.kind.value);case"listValue":return Er(e.kind.value);default:throw new Error(`${e.$typeName} must have a value`)}}function Er(e){return e.values.map(It)}function Ca(e){const t=Number(e.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot encode message ${e.$typeName} to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);if(e.nanos<0)throw new Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be negative`);let n="Z";if(e.nanos>0){const r=(e.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?n="."+r.substring(0,3)+"Z":r.substring(6)==="000"?n="."+r.substring(0,6)+"Z":n="."+r+"Z"}return new Date(t).toISOString().replace(".000Z",n)}const bn={ignoreUnknownFields:!1};function Ga(e){return e?Object.assign(Object.assign({},bn),e):bn}function Ya(e,t,n){return Da(e,Pa(t,e.typeName),n)}function Da(e,t,n){const r=V(e);try{ne(r,t,Ga(n))}catch(s){throw ps(s)?new Error(`cannot decode ${s.field()} from JSON: ${s.message}`,{cause:s}):s}return r.message}function ne(e,t,n){var r;if(Ja(e,t,n))return;if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode ${e.desc} from JSON: ${L(t)}`);const s=new Map,a=new Map;for(const o of e.desc.fields)a.set(o.name,o).set(o.jsonName,o);for(const[o,i]of Object.entries(t)){const c=a.get(o);if(c){if(c.oneof){if(i===null&&c.fieldKind=="scalar")continue;const l=s.get(c.oneof);if(l!==void 0)throw new U(c.oneof,`oneof set multiple times by ${l.name} and ${c.name}`);s.set(c.oneof,c)}gn(e,c,i,n)}else{let l;if(o.startsWith("[")&&o.endsWith("]")&&(l=(r=n.registry)===null||r===void 0?void 0:r.getExtension(o.substring(1,o.length-1)))&&l.extendee.typeName===e.desc.typeName){const[g,E,v]=Be(l);gn(g,E,i,n),Ia(e.message,l,v())}if(!l&&!n.ignoreUnknownFields)throw new Error(`cannot decode ${e.desc} from JSON: key "${o}" is unknown`)}}}function gn(e,t,n,r){switch(t.fieldKind){case"scalar":Ma(e,t,n);break;case"enum":Za(e,t,n,r);break;case"message":Ka(e,t,n,r);break;case"list":xa(e.get(t),n,r);break;case"map":Fa(e.get(t),n,r);break}}function Fa(e,t,n){if(t===null)return;const r=e.field();if(typeof t!="object"||Array.isArray(t))throw new U(r,"expected object, got "+L(t));for(const[s,a]of Object.entries(t)){if(a===null)throw new U(r,"map value must not be null");let o;switch(r.mapKind){case"message":const c=V(r.message);ne(c,a,n),o=c;break;case"enum":if(o=At(r.enum,a,n.ignoreUnknownFields,!0),o===Ce)return;break;case"scalar":o=Ye(r,a,!0);break}const i=Wa(r.mapKey,s);e.set(i,o)}}function xa(e,t,n){if(t===null)return;const r=e.field();if(!Array.isArray(t))throw new U(r,"expected Array, got "+L(t));for(const s of t){if(s===null)throw new U(r,"list item must not be null");switch(r.listKind){case"message":const a=V(r.message);ne(a,s,n),e.add(a);break;case"enum":const o=At(r.enum,s,n.ignoreUnknownFields,!0);o!==Ce&&e.add(o);break;case"scalar":e.add(Ye(r,s,!0));break}}}function Ka(e,t,n,r){if(n===null&&t.message.typeName!="google.protobuf.Value"){e.clear(t);return}const s=e.isSet(t)?e.get(t):V(t.message);ne(s,n,r),e.set(t,s)}function Za(e,t,n,r){const s=At(t.enum,n,r.ignoreUnknownFields,!1);s===Ge?e.clear(t):s!==Ce&&e.set(t,s)}function Ma(e,t,n){const r=Ye(t,n,!1);r===Ge?e.clear(t):e.set(t,r)}const Ce=Symbol();function At(e,t,n,r){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:r?e.values[0].number:Ge;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const s=e.values.find(a=>a.name===t);if(s!==void 0)return s.number;if(n)return Ce;break}throw new Error(`cannot decode ${e} from JSON: ${L(t)}`)}const Ge=Symbol();function Ye(e,t,n){if(t===null)return n?z(e.scalar,!1):Ge;switch(e.scalar){case u.DOUBLE:case u.FLOAT:if(t==="NaN")return NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(typeof t=="number"){if(Number.isNaN(t))throw new U(e,"unexpected NaN number");if(!Number.isFinite(t))throw new U(e,"unexpected infinite number");break}if(typeof t=="string"){if(t===""||t.trim().length!==t.length)break;const r=Number(t);if(!Number.isFinite(r))break;return r}break;case u.INT32:case u.FIXED32:case u.SFIXED32:case u.SINT32:case u.UINT32:return Nr(t);case u.BYTES:if(typeof t=="string"){if(t==="")return new Uint8Array(0);try{return gt(t)}catch(r){const s=r instanceof Error?r.message:String(r);throw new U(e,s)}}break}return t}function Wa(e,t){switch(e){case u.BOOL:switch(t){case"true":return!0;case"false":return!1}return t;case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:return Nr(t);default:return t}}function Nr(e){if(typeof e=="string"){if(e===""||e.trim().length!==e.length)return e;const t=Number(e);return Number.isNaN(t)?e:t}return e}function Pa(e,t){try{return JSON.parse(e)}catch(n){const r=n instanceof Error?n.message:String(n);throw new Error(`cannot decode message ${t} from JSON: ${r}`,{cause:n})}}function Ja(e,t,n){if(!e.desc.typeName.startsWith("google.protobuf."))return!1;switch(e.desc.typeName){case"google.protobuf.Any":return Xa(e.message,t,n),!0;case"google.protobuf.Timestamp":return $a(e.message,t),!0;case"google.protobuf.Duration":return ja(e.message,t),!0;case"google.protobuf.FieldMask":return za(e.message,t),!0;case"google.protobuf.Struct":return Ir(e.message,t),!0;case"google.protobuf.Value":return vt(e.message,t),!0;case"google.protobuf.ListValue":return Ar(e.message,t),!0;default:if(pe(e.desc)){const r=e.desc.fields[0];return t===null?e.clear(r):e.set(r,Ye(r,t,!0)),!0}return!1}}function Xa(e,t,n){var r;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${e.$typeName} from JSON: expected object but got ${L(t)}`);if(Object.keys(t).length==0)return;const s=t["@type"];if(typeof s!="string"||s=="")throw new Error(`cannot decode message ${e.$typeName} from JSON: "@type" is empty`);const a=s.includes("/")?s.substring(s.lastIndexOf("/")+1):s;if(!a.length)throw new Error(`cannot decode message ${e.$typeName} from JSON: "@type" is invalid`);const o=(r=n.registry)===null||r===void 0?void 0:r.getMessage(a);if(!o)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${s} is not in the type registry`);const i=V(o);if(a.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value")){const c=t.value;ne(i,c,n)}else{const c=Object.assign({},t);delete c["@type"],ne(i,c,n)}ba(i.desc,i.message,e)}function $a(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);const n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]{1,9}))?(?:Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);const r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw new Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot decode message ${e.$typeName} from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);e.seconds=_.parse(r/1e3),e.nanos=0,n[7]&&(e.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9)}function ja(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);const n=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);const r=Number(n[1]);if(r>315576e6||r<-315576e6)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);if(e.seconds=_.parse(r),typeof n[2]!="string")return;const s=n[2]+"0".repeat(9-n[2].length);e.nanos=parseInt(s),(r<0||Object.is(r,-0))&&(e.nanos=-e.nanos)}function za(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);if(t==="")return;function n(r){if(r.includes("_"))throw new Error(`cannot decode message ${e.$typeName} from JSON: path names must be lowerCamelCase`);const s=r.replace(/[A-Z]/g,a=>"_"+a.toLowerCase());return s[0]==="_"?s.substring(1):s}e.paths=t.split(",").map(n)}function Ir(e,t){if(typeof t!="object"||t==null||Array.isArray(t))throw new Error(`cannot decode message ${e.$typeName} from JSON ${L(t)}`);for(const[n,r]of Object.entries(t)){const s=D(hr);vt(s,r),e.fields[n]=s}}function vt(e,t){switch(typeof t){case"number":e.kind={case:"numberValue",value:t};break;case"string":e.kind={case:"stringValue",value:t};break;case"boolean":e.kind={case:"boolValue",value:t};break;case"object":if(t===null)e.kind={case:"nullValue",value:Qe.NULL_VALUE};else if(Array.isArray(t)){const n=D(Ea);Ar(n,t),e.kind={case:"listValue",value:n}}else{const n=D(ya);Ir(n,t),e.kind={case:"structValue",value:n}}break;default:throw new Error(`cannot decode message ${e.$typeName} from JSON ${L(t)}`)}return e}function Ar(e,t){if(!Array.isArray(t))throw new Error(`cannot decode message ${e.$typeName} from JSON ${L(t)}`);for(const n of t){const r=D(hr);vt(r,n),e.values.push(r)}}function hn(e){const t=A[e];return typeof t!="string"?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}class w extends Error{constructor(t,n=A.Unknown,r,s,a){super(Ha(t,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=n,this.metadata=new Headers(r??{}),this.details=s??[],this.cause=a}static from(t,n=A.Unknown){return t instanceof w?t:t instanceof Error?t.name=="AbortError"?new w(t.message,A.Canceled):new w(t.message,n,void 0,void 0,t):new w(String(t),n,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===w.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const n=t.kind==="message"?{getMessage:s=>s===t.typeName?t:void 0}:t,r=[];for(const s of this.details){if("desc"in s){n.getMessage(s.desc.typeName)&&r.push(D(s.desc,s.value));continue}const a=n.getMessage(s.type);if(a)try{r.push(Ee(a,s.value))}catch{}}return r}}function Ha(e,t){return e.length?`[${hn(t)}] ${e}`:`[${hn(t)}]`}function Qa(e,t,n){try{const r=gt(e);return t?Ee(t,r,n):r}catch(r){throw w.from(r,A.DataLoss)}}function qa(e,t){const n={};for(const r of e.methods){const s=t(r);s!=null&&(n[r.localName]=s)}return n}const pn=1;function yn(e){let t,n=new Uint8Array(0);function r(s){const a=new Uint8Array(n.length+s.length);a.set(n),a.set(s,n.length),n=a}return new ReadableStream({start(){t=e.getReader()},async pull(s){let a;for(;;){if(a===void 0&&n.byteLength>=5){let c=0;for(let l=1;l<5;l++)c=(c<<8)+n[l];a={flags:n[0],length:c}}if(a!==void 0&&n.byteLength>=a.length+5)break;const i=await t.read();if(i.done)break;r(i.value)}if(a===void 0){if(n.byteLength==0){s.close();return}s.error(new w("premature end of stream",A.DataLoss));return}const o=n.subarray(5,5+a.length);n=n.subarray(5+a.length),s.enqueue({flags:a.flags,data:o})}})}function En(e,t){const n=new Uint8Array(t.length+5);n.set(t,5);const r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.setUint8(0,e),r.setUint32(1,t.length),n}var eo=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(i,c){o=e[a](o),s(i,c,o.done,o.value)})}}function s(a,o,i,c){Promise.resolve(c).then(function(l){a({value:l,done:i})},o)}},he=function(e){return this instanceof he?(this.v=e,this):new he(e)},to=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(h){return Promise.resolve(h).then(f,E)}}function i(f,h){r[f]&&(s[f]=function(N){return new Promise(function(T,k){a.push([f,N,T,k])>1||c(f,N)})},h&&(s[f]=h(s[f])))}function c(f,h){try{l(r[f](h))}catch(N){v(a[0][3],N)}}function l(f){f.value instanceof he?Promise.resolve(f.value.v).then(g,E):v(a[0][2],f)}function g(f){c("next",f)}function E(f){c("throw",f)}function v(f,h){f(h),a.shift(),a.length&&c(a[0][0],a[0][1])}},no=function(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,a){t[s]=e[s]?function(o){return(n=!n)?{value:he(e[s](o)),done:!1}:a?a(o):o}:a}};function ro(e){return to(this,arguments,function*(){yield he(yield*no(eo(e)))})}var vr=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(i,c){o=e[a](o),s(i,c,o.done,o.value)})}}function s(a,o,i,c){Promise.resolve(c).then(function(l){a({value:l,done:i})},o)}},re=function(e){return this instanceof re?(this.v=e,this):new re(e)},so=function(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,a){t[s]=e[s]?function(o){return(n=!n)?{value:re(e[s](o)),done:!1}:a?a(o):o}:a}},ao=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(h){return Promise.resolve(h).then(f,E)}}function i(f,h){r[f]&&(s[f]=function(N){return new Promise(function(T,k){a.push([f,N,T,k])>1||c(f,N)})},h&&(s[f]=h(s[f])))}function c(f,h){try{l(r[f](h))}catch(N){v(a[0][3],N)}}function l(f){f.value instanceof re?Promise.resolve(f.value.v).then(g,E):v(a[0][2],f)}function g(f){c("next",f)}function E(f){c("throw",f)}function v(f,h){f(h),a.shift(),a.length&&c(a[0][0],a[0][1])}};function oo(e,t){return qa(e,n=>{switch(n.methodKind){case"unary":return io(t,n);case"server_streaming":return uo(t,n);case"client_streaming":return co(t,n);case"bidi_streaming":return lo(t,n);default:return null}})}function io(e,t){return async function(n,r){var s,a;const o=await e.unary(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues);return(s=r?.onHeader)===null||s===void 0||s.call(r,o.header),(a=r?.onTrailer)===null||a===void 0||a.call(r,o.trailer),o.message}}function uo(e,t){return function(n,r){return Sr(e.stream(t,r?.signal,r?.timeoutMs,r?.headers,ro([n]),r?.contextValues),r)}}function co(e,t){return async function(n,r){var s,a,o,i,c,l;const g=await e.stream(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues);(c=r?.onHeader)===null||c===void 0||c.call(r,g.header);let E,v=0;try{for(var f=!0,h=vr(g.message),N;N=await h.next(),s=N.done,!s;f=!0)i=N.value,f=!1,E=i,v++}catch(T){a={error:T}}finally{try{!f&&!s&&(o=h.return)&&await o.call(h)}finally{if(a)throw a.error}}if(!E)throw new w("protocol error: missing response message",A.Unimplemented);if(v>1)throw new w("protocol error: received extra messages for client streaming method",A.Unimplemented);return(l=r?.onTrailer)===null||l===void 0||l.call(r,g.trailer),E}}function lo(e,t){return function(n,r){return Sr(e.stream(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues),r)}}function Sr(e,t){const n=function(){return ao(this,arguments,function*(){var r,s;const a=yield re(e);(r=t?.onHeader)===null||r===void 0||r.call(t,a.header),yield re(yield*so(vr(a.message))),(s=t?.onTrailer)===null||s===void 0||s.call(t,a.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function fo(...e){const t=new AbortController,n=e.filter(s=>s!==void 0).concat(t.signal);for(const s of n){if(s.aborted){r.apply(s);break}s.addEventListener("abort",r)}function r(){t.signal.aborted||t.abort(wr(this));for(const s of n)s.removeEventListener("abort",r)}return t}function mo(e){const t=new AbortController,n=()=>{t.abort(new w("the operation timed out",A.DeadlineExceeded))};let r;return e!==void 0&&(e<=0?n():r=setTimeout(n,e)),{signal:t.signal,cleanup:()=>clearTimeout(r)}}function wr(e){if(!e.aborted)return;if(e.reason!==void 0)return e.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function Nn(){return{get(e){return e.id in this?this[e.id]:e.defaultValue},set(e,t){return this[e.id]=t,this},delete(e){return delete this[e.id],this}}}const Je=128;function In(e){const t=new Headers,n=new TextDecoder().decode(e).split(`\r
`);for(const r of n){if(r==="")continue;const s=r.indexOf(":");if(s>0){const a=r.substring(0,s).trim(),o=r.substring(s+1).trim();t.append(a,o)}}return t}const bo="Content-Type",go="Grpc-Timeout",se="Grpc-Status",Tr="Grpc-Message",ho="Grpc-Status-Details-Bin",An="User-Agent",Xe="X-User-Agent",po="X-Grpc-Web",yo="application/grpc-web+proto",Eo="application/grpc-web+json";function No(e,t,...n){return n.reduce((r,s)=>r.nestedMessages[s],e.messages[t])}function Io(e,t,...n){if(n.length>0)throw new Error;return e.services[t]}const Ao=H("CgxzdGF0dXMucHJvdG8SCmdvb2dsZS5ycGMiTgoGU3RhdHVzEgwKBGNvZGUYASABKAUSDwoHbWVzc2FnZRgCIAEoCRIlCgdkZXRhaWxzGAMgAygLMhQuZ29vZ2xlLnByb3RvYnVmLkFueUJeCg5jb20uZ29vZ2xlLnJwY0ILU3RhdHVzUHJvdG9QAVo3Z29vZ2xlLmdvbGFuZy5vcmcvZ2VucHJvdG8vZ29vZ2xlYXBpcy9ycGMvc3RhdHVzO3N0YXR1c6ICA1JQQ2IGcHJvdG8z",[lr]),vo=No(Ao,0),So="0";function _r(e){var t;const n=e.get(ho);if(n!=null){const s=Qa(n,vo);if(s.code==0)return;const a=new w(s.message,s.code,e);return a.details=s.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),a}const r=e.get(se);if(r!=null){if(r===So)return;const s=parseInt(r,10);return s in A?new w(decodeURIComponent((t=e.get(Tr))!==null&&t!==void 0?t:""),s,e):new w(`invalid grpc-status: ${r}`,A.Internal,e)}}function vn(e,t){return e.toString().replace(/\/?$/,`/${t.parent.typeName}/${t.name}`)}function Rr(e,t){return D(e,t)}function wo(e,t){function n(r){return r.done===!0?r:{done:r.done,value:Rr(e,r.value)}}return{[Symbol.asyncIterator](){const r=t[Symbol.asyncIterator](),s={next:()=>r.next().then(n)};return r.throw!==void 0&&(s.throw=a=>r.throw(a).then(n)),r.return!==void 0&&(s.return=a=>r.return(a).then(n)),s}}}function kr(e,t){var n;return(n=t?.concat().reverse().reduce((r,s)=>s(r),e))!==null&&n!==void 0?n:e}function To(e){var t;const n=Object.assign({},e);return(t=n.ignoreUnknownFields)!==null&&t!==void 0||(n.ignoreUnknownFields=!0),n}function Sn(e,t,n,r){const s=t?wn(e.input,r):Tn(e.input,n);return{parse:(t?wn(e.output,r):Tn(e.output,n)).parse,serialize:s.serialize}}function wn(e,t){return{parse(n){try{return Ee(e,n,t)}catch(r){const s=r instanceof Error?r.message:String(r);throw new w(`parse binary: ${s}`,A.Internal)}},serialize(n){try{return fr(e,n,t)}catch(r){const s=r instanceof Error?r.message:String(r);throw new w(`serialize binary: ${s}`,A.Internal)}}}}function Tn(e,t){var n,r;const s=(n=t?.textEncoder)!==null&&n!==void 0?n:new TextEncoder,a=(r=t?.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=To(t);return{parse(i){try{const c=a.decode(i);return Ya(e,c,o)}catch(c){throw w.from(c,A.InvalidArgument)}},serialize(i){try{const c=_a(e,i,o);return s.encode(c)}catch(c){throw w.from(c,A.Internal)}}}}function _o(e){const t=kr(e.next,e.interceptors),[n,r,s]=Lr(e),a=Object.assign(Object.assign({},e.req),{message:Rr(e.req.method.input,e.req.message),signal:n});return t(a).then(o=>(s(),o),r)}function Ro(e){const t=kr(e.next,e.interceptors),[n,r,s]=Lr(e),a=Object.assign(Object.assign({},e.req),{message:wo(e.req.method.input,e.req.message),signal:n});let o=!1;return n.addEventListener("abort",function(){var i,c;const l=e.req.message[Symbol.asyncIterator]();o||(i=l.throw)===null||i===void 0||i.call(l,this.reason).catch(()=>{}),(c=l.return)===null||c===void 0||c.call(l).catch(()=>{})}),t(a).then(i=>Object.assign(Object.assign({},i),{message:{[Symbol.asyncIterator](){const c=i.message[Symbol.asyncIterator]();return{next(){return c.next().then(l=>(l.done==!0&&(o=!0,s()),l),r)}}}}}),r)}function Lr(e){const{signal:t,cleanup:n}=mo(e.timeoutMs),r=fo(e.signal,t);return[r.signal,function(a){const o=w.from(t.aborted?wr(t):a);return r.abort(o),n(),Promise.reject(o)},function(){n(),r.abort()}]}function ko(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function _n(e,t){const n=_r(e);if(n)throw t.forEach((r,s)=>{n.metadata.append(s,r)}),n;if(!t.has(se)&&!e.has(se))throw new w("protocol error: missing status",A.Internal)}function Rn(e,t,n,r){const s=new Headers(n??{});s.set(bo,e?yo:Eo),s.set(po,"1");let a="connect-es/2.0.2";return a=s.has(An)?s.get(An):s.has(Xe)?s.get(Xe):a,s.set(Xe,a),t!==void 0&&s.set(go,`${t}m`),s}function Lo(e){switch(e){case 400:return A.Internal;case 401:return A.Unauthenticated;case 403:return A.PermissionDenied;case 404:return A.Unimplemented;case 429:return A.Unavailable;case 502:return A.Unavailable;case 503:return A.Unavailable;case 504:return A.Unavailable;default:return A.Unknown}}function kn(e,t){var n;if(e>=200&&e<300)return{foundStatus:t.has(se),headerError:_r(t)};throw new w(decodeURIComponent((n=t.get(Tr))!==null&&n!==void 0?n:`HTTP ${e}`),Lo(e),t)}var $=function(e){return this instanceof $?(this.v=e,this):new $(e)},Oo=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(h){return Promise.resolve(h).then(f,E)}}function i(f,h){r[f]&&(s[f]=function(N){return new Promise(function(T,k){a.push([f,N,T,k])>1||c(f,N)})},h&&(s[f]=h(s[f])))}function c(f,h){try{l(r[f](h))}catch(N){v(a[0][3],N)}}function l(f){f.value instanceof $?Promise.resolve(f.value.v).then(g,E):v(a[0][2],f)}function g(f){c("next",f)}function E(f){c("throw",f)}function v(f,h){f(h),a.shift(),a.length&&c(a[0][0],a[0][1])}};const Ln={redirect:"error"};function Uo(e){var t;ko();const n=(t=e.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(r,s,a,o,i,c){const{serialize:l,parse:g}=Sn(r,n,e.jsonOptions,e.binaryOptions);return a=a===void 0?e.defaultTimeoutMs:a<=0?void 0:a,await _o({interceptors:e.interceptors,signal:s,timeoutMs:a,req:{stream:!1,service:r.parent,method:r,requestMethod:"POST",url:vn(e.baseUrl,r),header:Rn(n,a,o),contextValues:c??Nn(),message:i},next:async E=>{var v;const h=await((v=e.fetch)!==null&&v!==void 0?v:globalThis.fetch)(E.url,Object.assign(Object.assign({},Ln),{method:E.requestMethod,headers:E.header,signal:E.signal,body:En(0,l(E.message))})),{headerError:N}=kn(h.status,h.headers);if(!h.body)throw N!==void 0?N:"missing response body";const T=yn(h.body).getReader();let k,F;for(;;){const C=await T.read();if(C.done)break;const{flags:m,data:d}=C.value;if((m&pn)===pn)throw new w("protocol error: received unsupported compressed output",A.Internal);if(m===Je){if(k!==void 0)throw"extra trailer";k=In(d);continue}if(F!==void 0)throw new w("extra message",A.Unimplemented);F=g(d)}if(k===void 0)throw N!==void 0?N:new w("missing trailer",h.headers.has(se)?A.Unimplemented:A.Unknown);if(_n(k,h.headers),F===void 0)throw new w("missing message",k.has(se)?A.Unimplemented:A.Unknown);return{stream:!1,service:r.parent,method:r,header:h.headers,message:F,trailer:k}}})},async stream(r,s,a,o,i,c){const{serialize:l,parse:g}=Sn(r,n,e.jsonOptions,e.binaryOptions);function E(f,h,N,T,k){return Oo(this,arguments,function*(){const C=yn(f).getReader();if(h){if(!(yield $(C.read())).done)throw"extra data for trailers-only";return yield $(void 0)}let m=!1;for(;;){const d=yield $(C.read());if(d.done)break;const{flags:b,data:p}=d.value;if((b&Je)===Je){if(m)throw"extra trailer";m=!0;const y=In(p);_n(y,T),y.forEach((S,I)=>N.set(I,S));continue}if(m)throw"extra message";yield yield $(g(p))}if("throwIfAborted"in k&&k.throwIfAborted(),!m)throw"missing trailer"})}async function v(f){if(r.methodKind!="server_streaming")throw"The fetch API does not support streaming request bodies";const h=await f[Symbol.asyncIterator]().next();if(h.done==!0)throw"missing request message";return En(0,l(h.value))}return a=a===void 0?e.defaultTimeoutMs:a<=0?void 0:a,Ro({interceptors:e.interceptors,signal:s,timeoutMs:a,req:{stream:!0,service:r.parent,method:r,requestMethod:"POST",url:vn(e.baseUrl,r),header:Rn(n,a,o),contextValues:c??Nn(),message:i},next:async f=>{var h;const T=await((h=e.fetch)!==null&&h!==void 0?h:globalThis.fetch)(f.url,Object.assign(Object.assign({},Ln),{method:f.requestMethod,headers:f.header,signal:f.signal,body:await v(f.message)})),{foundStatus:k,headerError:F}=kn(T.status,T.headers);if(F!=null)throw F;if(!T.body)throw"missing response body";const C=new Headers;return Object.assign(Object.assign({},f),{header:T.headers,trailer:C,message:E(T.body,k,C,T.headers,f.signal)})}})}}}const Bo=H("CgxvcmRlcnMucHJvdG8SBm9yZGVycyILCglQb3NpdGlvbnMiKQoMRGVsZXRlT3JkZXJzEgwKBG1pbnQYASABKAkSCwoDaWRzGAIgAygDIkEKGFBsYWNlTGltaXRPcmRlcnNSZXNwb25jZRIYChB0b2tlbl9vcmRlcnNfbnVtGAEgASgNEgsKA2lkcxgCIAMoAyJCChBUb2tlbkxpbWl0T3JkZXJzEgwKBG1pbnQYASABKAkSIAoGb3JkZXJzGAIgAygLMhAub3JkZXJzLkFwaU9yZGVyIsMBCghBcGlPcmRlchIPCgJpZBgBIAEoA0gAiAEBEhQKDHNsaXBwYWdlX2JwcxgCIAEoDRILCgN0aXAYAyABKAQSHgoGdGFyZ2V0GAQgASgLMg4ub3JkZXJzLlRhcmdldBIaCgRzaWRlGAUgASgOMgwub3JkZXJzLlNpZGUSHgoGYW1vdW50GAYgASgLMg4ub3JkZXJzLkFtb3VudBIgCgd0cmlnZ2VyGAcgASgOMg8ub3JkZXJzLlRyaWdnZXJCBQoDX2lkIrgBCgZUYXJnZXQSJAoFcHJpY2UYASABKAsyEy5vcmRlcnMuVGFyZ2V0UHJpY2VIABImCgZwcm9maXQYAiABKAsyFC5vcmRlcnMuVGFyZ2V0UHJvZml0SAASLwoLbW92aW5nX3BlcmMYAyABKAsyGC5vcmRlcnMuVGFyZ2V0TW92aW5nUGVyY0gAEiAKBm1hcmtldBgEIAEoCzIOLm9yZGVycy5NYXJrZXRIAEINCgt0YXJnZXRfdHlwZSJCCgtUYXJnZXRQcmljZRINCgVwcmljZRgBIAEoAhIkCglkaXJlY3Rpb24YAiABKA4yES5vcmRlcnMuRGlyZWN0aW9uIkkKDFRhcmdldFByb2ZpdBITCgtwcm9maXRfcGVyYxgBIAEoAhIkCglkaXJlY3Rpb24YAiABKA4yES5vcmRlcnMuRGlyZWN0aW9uInIKEFRhcmdldE1vdmluZ1BlcmMSEgoKcHJpY2VfcGVyYxgBIAEoAhIWCglsb2NhbF9hdGgYAiABKAJIAIgBARIkCglkaXJlY3Rpb24YAyABKA4yES5vcmRlcnMuRGlyZWN0aW9uQgwKCl9sb2NhbF9hdGgiCAoGTWFya2V0IjwKBkFtb3VudBISCghwZXJjX2JwcxgBIAEoDUgAEg8KBWZpeGVkGAIgASgESABCDQoLYW1vdW50X3R5cGUqJwoHVHJpZ2dlchINCglJTU1FRElBVEUQABINCglNSUdSQVRJT04QASoZCgRTaWRlEgcKA0JVWRAAEggKBFNFTEwQASohCglEaXJlY3Rpb24SCQoFQUJPVkUQABIJCgVCRUxPVxABYgZwcm90bzM");var Or=(e=>(e[e.IMMEDIATE=0]="IMMEDIATE",e[e.MIGRATION=1]="MIGRATION",e))(Or||{}),Ur=(e=>(e[e.BUY=0]="BUY",e[e.SELL=1]="SELL",e))(Ur||{}),Br=(e=>(e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW",e))(Br||{});const Vr=H("Cgxjb21tb24ucHJvdG8SBmNvbW1vbiIxCg1Ub2tlbkxhbXBvcnRzEg4KBmFtb3VudBgBIAEoBBIQCghkZWNpbWFscxgCIAEoDSIYCgdEZWNpbWFsEg0KBXZhbHVlGAEgASgJIhwKDFRva2VuQWRkcmVzcxIMCgRtaW50GAEgASgJIiIKDVVuaXhUaW1lc3RhbXASEQoJdGltZXN0YW1wGAEgASgDKh4KCVF1b3RlS2luZBIHCgNTT0wQABIICgRVU0RDEAFiBnByb3RvMw"),Vo=H("Cgt0eG5jYi5wcm90bxIFdHhuY2IigwEKDkxhbmRlZFR4blN0YXRlEh8KBmZhaWxlZBgBIAEoCzINLnR4bmNiLkZhaWxlZEgAEiUKCWNvbmZpcm1lZBgCIAEoCzIQLnR4bmNiLkNvbmZpcm1lZEgAEhsKBGxvc3QYAyABKAsyCy50eG5jYi5Mb3N0SABCDAoKc3RhdGVfdHlwZSI+CgRMb3N0EhIKCnNpZ25hdHVyZXMYASADKAkSFQoIb3JkZXJfaWQYAiABKANIAIgBAUILCglfb3JkZXJfaWQiiQEKBkZhaWxlZBIRCglzbG90X2RpZmYYASABKAUSHAoEdGlwcxgCIAEoCzIOLnR4bmNiLlR4blRpcHMSCgoCY3UYAyABKA0SCwoDZXJyGAQgASgJEhEKCXNpZ25hdHVyZRgFIAEoCRIVCghvcmRlcl9pZBgGIAEoA0gAiAEBQgsKCV9vcmRlcl9pZCKjAQoJQ29uZmlybWVkEhEKCXNsb3RfZGlmZhgBIAEoBRIiCgZ0cmFkZXMYAiADKAsyEi50eG5jYi5QYXJzZWRUcmFkZRIcCgR0aXBzGAMgASgLMg4udHhuY2IuVHhuVGlwcxIKCgJjdRgEIAEoDRIRCglzaWduYXR1cmUYBSABKAkSFQoIb3JkZXJfaWQYBiABKANIAIgBAUILCglfb3JkZXJfaWQiUwoLUGFyc2VkVHJhZGUSGQoDYnV5GAEgASgLMgoudHhuY2IuQnV5SAASGwoEc2VsbBgCIAEoCzILLnR4bmNiLlNlbGxIAEIMCgp0cmFkZV90eXBlIrsBCgNCdXkSDAoEbWludBgBIAEoCRIOCgZ0aWNrZXIYAiABKAkSIwoEYmFzZRgDIAEoCzIVLmNvbW1vbi5Ub2tlbkxhbXBvcnRzEg0KBXF1b3RlGAQgASgEEhsKAm1jGAUgASgLMg8uY29tbW9uLkRlY2ltYWwSHgoFcHJpY2UYBiABKAsyDy5jb21tb24uRGVjaW1hbBIlCgpxb3V0ZV9raW5kGAcgASgOMhEuY29tbW9uLlF1b3RlS2luZCK1AQoEU2VsbBIMCgRtaW50GAEgASgJEg4KBnRpY2tlchgCIAEoCRIlCgZ0b2tlbnMYAyABKAsyFS5jb21tb24uVG9rZW5MYW1wb3J0cxINCgVxdW90ZRgEIAEoBBIcCgNwbmwYBSABKAsyDy5jb21tb24uRGVjaW1hbBIbCgJtYxgGIAEoCzIPLmNvbW1vbi5EZWNpbWFsEh4KBXByaWNlGAcgASgLMg8uY29tbW9uLkRlY2ltYWwiKQoHVHhuVGlwcxIQCghwcmlvcml0eRgBIAEoBBIMCgRqaXRvGAIgASgEIiMKEFRyYW5zYWN0aW9uRXJyb3ISDwoHbWVzc2FnZRgBIAEoCWIGcHJvdG8z",[Vr]),Co=H("CgtjYWJhbC5wcm90bxIFY2FiYWwixwEKClVzZXJBY3Rpb24SGQoDYnV5GAEgASgLMgouY2FiYWwuQnV5SAASGwoEc2VsbBgCIAEoCzILLmNhYmFsLlNlbGxIABIzChF0b2tlbl90cmFkZV9zdGF0cxgDIAEoCzIWLmNhYmFsLlRva2VuVHJhZGVTdGF0c0gAEhsKBHBpbmcYBCABKAsyCy5jYWJhbC5QaW5nSAASGwoEcG9uZxgFIAEoCzILLmNhYmFsLlBvbmdIAEISChB1c2VyX2FjdGlvbl9raW5kIg8KDVRyYWRlRXZlbnRTdWIiDwoNVXNlckFjdGlvblN1YiIeCgtFY2hvUmVxdWVzdBIPCgdtZXNzYWdlGAEgASgJIh8KDEVjaG9SZXNwb25zZRIPCgdtZXNzYWdlGAEgASgJIpMBChFUcmFkZUV2ZW50UmVxdWVzdBIoCgNzdWIYASABKAsyGS5jYWJhbC5Ub2tlblRyYWRlRXZlbnRTdWJIABIbCgRwaW5nGAIgASgLMgsuY2FiYWwuUGluZ0gAEhsKBHBvbmcYAyABKAsyCy5jYWJhbC5Qb25nSABCGgoYdHJhZGVfZXZlbnRfcmVxdWVzdF9raW5kIiIKElRva2VuVHJhZGVFdmVudFN1YhIMCgRtaW50GAEgASgJIiIKElRva2VuU3RhdHVzUmVxdWVzdBIMCgRtaW50GAEgASgJIsEBChJUcmFkZUV2ZW50UmVzcG9uc2USKAoLdHJhZGVfZXZlbnQYASABKAsyES5jYWJhbC5UcmFkZUV2ZW50SAASKgoMdG9rZW5fc3RhdHVzGAIgASgLMhIuY2FiYWwuVG9rZW5TdGF0dXNIABIbCgRwaW5nGAMgASgLMgsuY2FiYWwuUGluZ0gAEhsKBHBvbmcYBCABKAsyCy5jYWJhbC5Qb25nSABCGwoZdHJhZGVfZXZlbnRfcmVzcG9uc2Vfa2luZCIVCgRQaW5nEg0KBWNvdW50GAEgASgEIhUKBFBvbmcSDQoFY291bnQYASABKAQi5AEKDFVzZXJSZXNwb25zZRIsCgx0cmFkZV9zdGF0dXMYASABKAsyFC5jYWJhbC5UcmFkZVJlc3BvbnNlSAASLQoLdHJhZGVfc3RhdHMYAiABKAsyFi5jYWJhbC5Ub2tlblRyYWRlU3RhdHNIABInCgZ0eG5fY2IYAyABKAsyFS50eG5jYi5MYW5kZWRUeG5TdGF0ZUgAEhsKBHBpbmcYBCABKAsyCy5jYWJhbC5QaW5nSAASGwoEcG9uZxgFIAEoCzILLmNhYmFsLlBvbmdIAEIUChJ1c2VyX3Jlc3BvbnNlX2tpbmQiIwoTVG9rZW5UcmFkZVN0YXRzQ2FsbBIMCgRtaW50GAEgASgJIh0KDVRyYWRlUmVzcG9uc2USDAoEc2xvdBgCIAEoBCKQAgoLVG9rZW5TdGF0dXMSDAoEbWludBgBIAEoCRIPCgdwb29sX2lkGAIgASgJEiIKCXBvb2xfa2luZBgDIAEoDjIPLmNhYmFsLlBvb2xLaW5kEjAKEG1pZ3JhdGlvbl9zdGF0dXMYBCABKA4yFi5jYWJhbC5NaWdyYXRpb25TdGF0dXMSDgoGc3VwcGx5GAUgASgEEhAKCGJhc2VfbGlxGAYgASgEEhEKCXF1b3RlX2xpcRgHIAEoBBIlCgpxb3V0ZV9raW5kGAggASgOMhEuY29tbW9uLlF1b3RlS2luZBIUCgd0YXhfYnBzGAkgASgNSACIAQESDgoGdGlja2VyGAogASgJQgoKCF90YXhfYnBzIo0CCg9Ub2tlblRyYWRlU3RhdHMSDAoEbWludBgBIAEoCRIVCg10b2tlbl9iYWxhbmNlGAIgASgEEhEKCWJ1eV9xb3V0ZRgDIAEoBBISCgpzZWxsX3FvdXRlGAQgASgEEhAKCGJ1eV9iYXNlGAUgASgEEhEKCXNlbGxfYmFzZRgGIAEoBBIMCgRidXlzGAcgASgNEg0KBXNlbGxzGAggASgNEhMKC3NvbF9iYWxhbmNlGAkgASgEEhgKEGxhc3RfdHJhZGVkX3Nsb3QYCiABKAQSFgoOdG9rZW5fZGVjaW1hbHMYCyABKA0SJQoKcW91dGVfa2luZBgMIAEoDjIRLmNvbW1vbi5RdW90ZUtpbmQi+QIKClRyYWRlRXZlbnQSJAoDYnV5GAEgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIlCgRzZWxsGAIgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIoCgdkZXBvc2l0GAMgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIpCgh3aXRoZHJhdxgEIAEoCzIVLmNhYmFsLlRyYWRlRXZlbnREYXRhSAASMAoPbWlncmF0aW9uX3N0YXJ0GAUgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIuCg1taWdyYXRpb25fZW5kGAYgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIoCghidXJuX2xpcRgHIAEoCzIULmNhYmFsLkJ1cm5FdmVudERhdGFIABIpCglidXJuX21pbnQYCCABKAsyFC5jYWJhbC5CdXJuRXZlbnREYXRhSABCEgoQdHJhZGVfZXZlbnRfa2luZCJtCg5UcmFkZUV2ZW50RGF0YRISCgphbW91bnRfc29sGAEgASgEEhAKCGJhc2VfbGlxGAIgASgEEhEKCXF1b3RlX2xpcRgDIAEoBBIiCglwb29sX2tpbmQYBCABKA4yDy5jYWJhbC5Qb29sS2luZCItCg1CdXJuRXZlbnREYXRhEg4KBmFtb3VudBgBIAEoBBIMCgRsZWZ0GAIgASgEIrQCCgNCdXkSDgoGYW1vdW50GAEgASgEEgwKBG1pbnQYAiABKAkSFAoMc2xpcHBhZ2VfYnBzGAMgASgNEgsKA3RpcBgEIAEoBBIZCgxwcmlvcml0eV9mZWUYBSABKARIAIgBARISCgVub25jZRgGIAEoBEgBiAEBEhkKDHNsb3RfbGF0ZW5jeRgHIAEoDUgCiAEBEi0KCWV4cGlyZV9hdBgIIAEoCzIVLmNvbW1vbi5Vbml4VGltZXN0YW1wSAOIAQESKgoKcW91dGVfa2luZBgJIAEoDjIRLmNvbW1vbi5RdW90ZUtpbmRIBIgBAUIPCg1fcHJpb3JpdHlfZmVlQggKBl9ub25jZUIPCg1fc2xvdF9sYXRlbmN5QgwKCl9leHBpcmVfYXRCDQoLX3FvdXRlX2tpbmQi/gEKBFNlbGwSEgoKYW1vdW50X2JwcxgBIAEoDRIMCgRtaW50GAIgASgJEhQKDHNsaXBwYWdlX2JwcxgDIAEoDRILCgN0aXAYBCABKAQSGQoMcHJpb3JpdHlfZmVlGAUgASgESACIAQESEgoFbm9uY2UYBiABKARIAYgBARIZCgxzbG90X2xhdGVuY3kYByABKA1IAogBARItCglleHBpcmVfYXQYCCABKAsyFS5jb21tb24uVW5peFRpbWVzdGFtcEgDiAEBQg8KDV9wcmlvcml0eV9mZWVCCAoGX25vbmNlQg8KDV9zbG90X2xhdGVuY3lCDAoKX2V4cGlyZV9hdCotCg9Vc2VyVHJhZGVTdGF0dXMSDAoIYWNjZXB0ZWQQABIMCghyZWplY3RlZBABKlUKD01pZ3JhdGlvblN0YXR1cxIMCghtaWdyYXRlZBAAEg0KCW1pZ3JhdGluZxABEhEKDXByZV9taWdyYXRpb24QAhISCg5ub25fbWlncmF0YWJsZRADKnIKCFBvb2xLaW5kEggKBHB1bXAQABILCgdyYXlfYW1tEAESDAoIbW9vbnNob3QQAhILCgdtZXRlb3JhEAMSDAoIcmF5X2NsbW0QBBIMCghyYXlfY3BtbRAFEgwKCHB1bXBfYW1tEAYSCgoGcmF5X2xsEAcy8gQKCENhYmFsUnBjEkAKD1VzZXJBY3Rpdml0eVVuaRIULmNhYmFsLlVzZXJBY3Rpb25TdWIaEy5jYWJhbC5Vc2VyUmVzcG9uc2UiADABEkAKCVRyYWRlc1VuaRIULmNhYmFsLlRyYWRlRXZlbnRTdWIaGS5jYWJhbC5UcmFkZUV2ZW50UmVzcG9uc2UiADABEkMKDlN1YnNjcmliZVRva2VuEhkuY2FiYWwuVG9rZW5UcmFkZUV2ZW50U3ViGhQuY2FiYWwuVHJhZGVSZXNwb25zZSIAEicKCVRyYWRlUGluZxILLmNhYmFsLlBpbmcaCy5jYWJhbC5Qb25nIgASJgoIVXNlclBpbmcSCy5jYWJhbC5QaW5nGgsuY2FiYWwuUG9uZyIAEjEKCk1hcmtldFNlbGwSCy5jYWJhbC5TZWxsGhQuY2FiYWwuVHJhZGVSZXNwb25zZSIAEi8KCU1hcmtldEJ1eRIKLmNhYmFsLkJ1eRoULmNhYmFsLlRyYWRlUmVzcG9uc2UiABJHChNHZXRUb2tlbkxpbWl0T3JkZXJzEhQuY29tbW9uLlRva2VuQWRkcmVzcxoYLm9yZGVycy5Ub2tlbkxpbWl0T3JkZXJzIgASUAoQUGxhY2VMaW1pdE9yZGVycxIYLm9yZGVycy5Ub2tlbkxpbWl0T3JkZXJzGiAub3JkZXJzLlBsYWNlTGltaXRPcmRlcnNSZXNwb25jZSIAEk0KEURlbGV0ZUxpbWl0T3JkZXJzEhQub3JkZXJzLkRlbGV0ZU9yZGVycxogLm9yZGVycy5QbGFjZUxpbWl0T3JkZXJzUmVzcG9uY2UiAGIGcHJvdG8z",[Bo,Vo,Vr]),Go=Io(Co,0),Yo=({apiKey:e,apiUrl:t})=>Uo({baseUrl:t,interceptors:[n=>async r=>(r.header.set("auth",e),await n(r))]}),Do=({apiKey:e,apiUrl:t})=>{const n=Yo({apiKey:e,apiUrl:t});return oo(Go,n)},Fo={log:()=>{},info:()=>{}};var Cr=(e=>(e[e.pingUserInterval=8e3]="pingUserInterval",e[e.pingTradeInterval=8e3]="pingTradeInterval",e))(Cr||{});const q={api_secret_key:"",quick_buy_amount:.001,quick_sell_amount:.001,buy_presets:[.5,1,2,5],sell_presets:[.5,1,2,5],buy_tip:.001,sell_tip:.001,buy_slippage:20,sell_slippage:20};var qe=(e=>(e.UA="UA",e.TRADE="TRADE",e))(qe||{}),ce=(e=>(e.ping="ping",e.pingFinally="pingFinally",e))(ce||{}),B=(e=>(e.userActivityConnected="userActivityConnected",e.userActivityStreamMessage="userActivityStreamMessage",e.userActivityPing="userActivityPing",e.userActivityPong="userActivityPong",e.userActivityError="userActivityError",e.tradeStats="tradeStats",e))(B||{}),O=(e=>(e.tradeConnected="tradeConnected",e.tradeDisconnected="tradeDisconnected",e.tradeStreamMessage="tradeStreamMessage",e.tradePing="tradePing",e.tradePong="tradePong",e.tradeError="tradeError",e.tradeEvent="tradeEvent",e.tokenStatus="tokenStatus",e))(O||{}),M=(e=>(e.connected="connected",e.message="message",e.ping="ping",e.pong="pong",e.error="error",e))(M||{});class On{nameStream;streamInstance;reconnect=!0;onMessage;pingUserTimeout;isPinging=!1;log;onePongReceived;_resolveOnePong;_rejectedOnePong;clientConnectToStream;clientIsPong;streamPinger;constructor({nameStream:t,clientConnectToStream:n,clientIsPong:r,streamPinger:s,onMessage:a,debug:o=!1}){this.nameStream=t,this.log=o?console:Fo,this.clientConnectToStream=n,this.clientIsPong=r,this.streamPinger=s,this.onMessage=a,this.isPinging=!1}async start(){try{this.log.log(`[${this.nameStream}]: start`),this.streamInstance=this.connectToStream(),this.onePongReceived=new Promise((t,n)=>{this._resolveOnePong=t,this._rejectedOnePong=n}),setTimeout(()=>this.listen(),0),this.isPinging=!0,setTimeout(()=>this.ping(),0),await this.onePongReceived,this.onMessage("connected")}catch(t){this.onErrorAndDestoy("start error",t.message),this._rejectedOnePong&&this._rejectedOnePong()}}connectToStream(){try{return this.log.log(`[${this.nameStream}]: start connect`),this.clientConnectToStream()}catch(t){throw new Error(t.message)}}async listen(){if(this.log.log(`[${this.nameStream}]: start listening`),!this.streamInstance)throw new Error(`[${this.nameStream}]: streamInstance is undefined error`);try{for await(const t of this.streamInstance)this.log.log(`[${this.nameStream}]: received message`,t),this.clientIsPong(t)&&this._resolveOnePong&&this._resolveOnePong(),this.onMessage("message",t)}catch(t){console.error(t)}}async ping(){try{this.log.log(`[${this.nameStream}]: start ping`);const t=this.checkForError({errorCase:ce.ping});if(t)throw console.error("!!!",t),new Error(t);const n=await this.streamPinger({count:BigInt(Date.now())});this.log.log(`[${this.nameStream}]: ping result `,n)}catch(t){this.onErrorAndDestoy(`[${this.nameStream}]: ping error `,t)}finally{this.log.log(`[${this.nameStream}]: ping finally`);const t=this.checkForError({errorCase:ce.pingFinally});if(t){console.error(t);return}t||(clearTimeout(this.pingUserTimeout),this.pingUserTimeout=setTimeout(()=>this.ping(),Cr.pingUserInterval))}}checkForError({errorCase:t}){if(!this.streamInstance)return`[${this.nameStream}]: streamInstance is undefined error`;if(t===ce.ping||t===ce.pingFinally){if(!this.isPinging)return`[${this.nameStream}]: isPinging: ${this.isPinging}`;if(!this.streamPinger)return`[${this.nameStream}]: streamInstance is undefined error`}}destroy(){this.log.log("destroy cabal UAStream"),this.streamInstance=void 0,this.onePongReceived=void 0,this.isPinging=!1,clearTimeout(this.pingUserTimeout),this.pingUserTimeout=void 0}onErrorAndDestoy(t,n){console.error(t),this.onMessage("error",n.message),this.destroy()}}function Te(e){return BigInt(Math.round(e*1e9))}class xo extends Qr.EventEmitter{client;userActivityStream;tradesStream;ready;constructor({apiKey:t,apiUrl:n}){super(),this.client=Do({apiKey:t,apiUrl:n}),this.ready=!1}createUAStream(){return this.handleUserActivityMessage=this.handleUserActivityMessage.bind(this),this.userActivityStream=new On({nameStream:qe.UA,clientConnectToStream:()=>this.client.userActivityUni({}),clientIsPong:t=>t.userResponseKind.case==="pong",streamPinger:({count:t})=>this.client.userPing({count:t}),onMessage:this.handleUserActivityMessage,debug:!0}),this.userActivityStream}destroyUAStrem(){this.ready=!1,this.userActivityStream?.destroy(),this.userActivityStream=void 0}createTradeStream(){this.handleTradeMessage=this.handleTradeMessage.bind(this),this.tradesStream=new On({nameStream:qe.TRADE,clientConnectToStream:()=>this.client.tradesUni({}),clientIsPong:t=>t.tradeEventResponseKind.case==="pong",streamPinger:({count:t})=>this.client.tradePing({count:t}),onMessage:this.handleTradeMessage,debug:!0})}destroyTStrem(){this.ready=!1,this.tradesStream?.destroy(),this.tradesStream=void 0}async start(){try{this.ready=!0,this.createUAStream(),await this.userActivityStream?.start(),this.handleUserActivityMessage(M.connected),this.createTradeStream(),await this.tradesStream?.start()}catch{this.ready=!1,console.log("Cabal Service Error"),this.stop()}}stop(){this.destroyUAStrem(),this.destroyTStrem()}async subscribeToken(t){try{const n=await this.client.subscribeToken({mint:t});return console.log("subscribeToken",n),n}catch(n){console.error("subscribeToken",n)}}async placeLimitOrders({mint:t}){try{debugger;const n=await this.client.placeLimitOrders({mint:t,orders:[{slippageBps:q.sell_slippage,tip:Te(q.sell_tip),target:{targetType:{case:"price",value:{price:.0027,direction:Br.ABOVE}}},side:Ur.SELL,amount:{amountType:{case:"percBps",value:500}},trigger:Or.IMMEDIATE}]});return console.log("sell result::::",n),n}catch(n){console.error("error token sell",n)}}async marketSell({mint:t,percents:n}){try{debugger;if(n>100||n<=0)throw new Error("should be in range of [0;100]");const r={amountBps:n*100,mint:t,slippageBps:q.sell_slippage,tip:Te(q.sell_tip)};console.log("### sell params",r);const s=await this.client.marketSell(r);return console.log("sell result::::",s),s}catch(r){console.error("error token sell",r)}}async marketBuy({amount:t,mint:n}){try{debugger;const r={amount:Te(t),mint:n,slippageBps:q.buy_slippage,tip:Te(q.buy_tip)};console.log("### buy params",r);const s=await this.client.marketBuy(r);return console.log("buy",s),s}catch(r){console.error("token buy",r)}}handleTradeMessage=(t,n)=>{if(this.ready)switch(t){case M.connected:this.emit(O.tradeConnected);break;case M.error:console.error("[[CabalService]]: trade stream error"),this.stop(),this.emit(O.tradeError);break;case M.message:this.processTradeMessage(n);break;default:console.log(`[handleUserActivityMessage]: unknown message type ${t}`)}};handleUserActivityMessage=(t,n)=>{if(this.ready)switch(t){case M.connected:this.emit(B.userActivityConnected);break;case M.error:console.error("[[CabalService]]: UA stream error"),this.stop(),this.emit(B.userActivityError);break;case M.message:this.processUserActivityMessage(n);break;default:console.log(`[handleUserActivityMessage]: unknown message type ${t}`)}};processUserActivityMessage(t){const n=t.userResponseKind.case;switch(n){case"tradeStatus":break;case"tradeStats":this.emit(B.tradeStats,t.userResponseKind);break;case"txnCb":break;case"ping":break;case"pong":this.emit(B.userActivityPong,{count:t.userResponseKind.value});break;default:console.log(`[handleUserActivityMessage]: unknown case message: ${n}`)}}processTradeMessage(t){const n=t.tradeEventResponseKind.case;switch(n){case"tradeEvent":this.emit(O.tradeEvent,{value:t.tradeEventResponseKind.value.tradeEventKind});break;case"tokenStatus":this.emit(O.tokenStatus,{value:t.tradeEventResponseKind});break;case"ping":this.emit(O.tradePing,{value:t.tradeEventResponseKind.value});break;case"pong":this.emit(O.tradePong,{count:t.tradeEventResponseKind.value});break;default:console.log(`[processTradeMessage]: unknown case message: ${n}`)}}}const ae={apiKey:"2jaUfUpLFJorLTgMLbGKPz88KEeJstYucei3RuxM5h4V",apiUrl:"https://cabalbot.tech:11111",showUAConnected:!0,showTradeEventLog:!0,showTokenStatus:!0,showSendMessageResponseLog:!0,showSubscribeTokenReceiveMsg:!0,showTradeStats:!0};var Gr=(e=>(e[e.reconnectTimeout=500]="reconnectTimeout",e))(Gr||{}),Z=(e=>(e.CabalEvent="CABAL_EVENT",e))(Z||{}),le=(e=>(e.INIT_CABAL="INIT_CABAL",e.SUBSCRIBE_TOKEN="SUBSCRIBE_TOKEN",e.BUY_MARKET="BUY_MARKET",e.SELL_MARKET="SELL_MARKET",e))(le||{});const Ko=({cabalTradeEvent:e,mint:t})=>{try{const n=Date.now(),r=e.value.value,s=e.value.case,{amountSol:a,baseLiq:o,quoteLiq:i,poolKind:c}=r;return{type:s,value:{mint:t,timestamp:n,amountSol:a.toString(),baseLiq:o.toString(),quoteLiq:i.toString(),poolKind:c}}}catch{console.error("error while parsing ",e)}},Zo=e=>{const t=e.value,n=t.mint;return{type:Z.CabalEvent,eventName:B.tradeStats,data:{mint:n,tokenBalance:t.tokenBalance.toString(),buyQoute:t.buyQoute.toString(),sellQoute:t.sellQoute.toString(),buyBase:t.buyBase.toString(),sellBase:t.sellBase.toString(),buys:t.buys,sells:t.sells,solBalance:t.solBalance.toString(),lastTradedSlot:t.lastTradedSlot.toString(),tokenDecimals:t.tokenDecimals,qouteKind:t.qouteKind}}},Mo=e=>{const t=e.value.value;return{mint:t.mint,poolId:t.poolId,poolKind:t.poolKind,migrationStatus:t.migrationStatus,supply:t.supply.toString(),baseLiq:t.baseLiq.toString(),quoteLiq:t.quoteLiq.toString(),qouteKind:t.qouteKind,taxBps:t.taxBps,ticker:t.ticker}},De=()=>new Promise((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},n=>{if(chrome.runtime.lastError)return console.log("$$$"),t(chrome.runtime.lastError);e(n)})}),Wo=async({sendResponse:e,getListener:t,getCabalInstance:n,getIsReady:r,message:s})=>{const o=(await De())[0]?.id,i=t(o);console.log("### Buy Market ###",o,i?.mint);const c=n(),{mint:l,amountSol:g}=s.data;c&&l&&g&&c.marketBuy({amount:g,mint:l}),e({isReady:r()})},Po=async({sendResponse:e,getListener:t,getCabalInstance:n,getIsReady:r,message:s})=>{const o=(await De())[0]?.id,i=t(o);console.log("### Buy Market ###",o,i?.mint);const c=n(),{mint:l,amountBps:g}=s.data;c&&l&&g&&c.marketSell({percents:g,mint:l}),e({isReady:r()})},Jo=async({sendResponse:e,getListener:t,getCabalInstance:n,getIsReady:r,message:s})=>{try{const o=(await De())[0]?.id,i=t(o);ae.showSubscribeTokenReceiveMsg&&console.log("### SUBSCRIBE_TOKEN ###",o,s);const c=n(),l=s.data.mint;c&&i&&l&&c.subscribeToken(l),e({isReady:r()})}catch(a){console.error("handleSubscribeTokenMessage error",a)}};var Yr=(e=>(e.gmgnai="https://gmgn.ai/sol/token/",e))(Yr||{});const Xo=e=>e.split(Yr.gmgnai)[1],$o=async({sendResponse:e,message:t,state:n})=>{const s=(await De())[0]?.id;if(console.log("### INIT_CABAL ###",s),!s)return;n.setActiveTab(s);const a=Xo(t.data.url);console.log(t.data.url),console.log(a),n.listeners.push({tabId:s,url:t.data.url,mint:a}),e({isReady:n.isReady,url:t?.data?.url,mint:a})},jo=({getIsReady:e,getListener:t,getCabalInstance:n,setActiveTab:r,getListeners:s})=>(a,o,i)=>{switch(console.log("%%% %%% receive",a,o),a.type){case le.INIT_CABAL:return $o({sendResponse:i,message:a,state:{isReady:e(),listeners:s(),setActiveTab:r}}),!0;case le.SUBSCRIBE_TOKEN:return Jo({sendResponse:i,getListener:t,getCabalInstance:n,getIsReady:e,message:a}),!0;case le.BUY_MARKET:return Wo({sendResponse:i,getListener:t,getCabalInstance:n,getIsReady:e,message:a}),!0;case le.SELL_MARKET:return Po({sendResponse:i,getListener:t,getCabalInstance:n,getIsReady:e,message:a}),!0;default:console.log("no handler for event",a);break}},zo=({getListener:e,setActiveTab:t})=>n=>{console.log("Активная вкладка сменилась. ID вкладки:",n.tabId);const r=e(n.tabId);r&&(t(r.tabId),chrome.tabs.get(n.tabId,function(s){console.log("URL новой активной вкладки:",s.url),console.log("URL listener",r.url),console.log("mint",r.mint)}))},P=({message:e,getActiveTab:t})=>{const n=t();n&&chrome.tabs.sendMessage(n,e,r=>{chrome.runtime.lastError?console.error("Error sending message:",chrome.runtime.lastError.message):console.log("Message sent to active tab:",e)})};console.log("start background service 5");let Dr=null,Ie=!1,Ae=!1,oe=!1,j;const Ho=()=>oe,St=()=>Dr,et=e=>Dr=e;let Fr;const xr=[],Qo=()=>xr,Kr=e=>{Fr=e},Zr={mint:null},Mr=e=>Zr.mint=e,qo=()=>Zr.mint,J=()=>Fr,Wr=e=>e?xr.find(t=>t.tabId===e):void 0,ei=jo({getIsReady:Ho,getListener:Wr,getCabalInstance:St,setActiveTab:Kr,getListeners:Qo}),ti=zo({getListener:Wr,setActiveTab:Kr});chrome.runtime.onMessage.addListener(ei);chrome.tabs.onActivated.addListener(ti);const ni=()=>{console.log("UA CONNECTED"),Ie=!0,Xr()},ri=e=>{try{P({getActiveTab:J,message:{type:Z.CabalEvent,eventName:B.userActivityPong,data:{count:e.count.count.toString(),isReady:oe}}})}catch(t){console.error("error in handleUserActivityPong",t)}},si=e=>{try{ae.showTradeStats&&console.log("handleUserActivityTradeStats",e);const t=Zo(e),n=t.data.mint;Mr(n),P({getActiveTab:J,message:t})}catch(t){console.error("error in handleUserActivityTradeStats",t)}},ai=()=>{Ie=!1,Ae=!1,oe=!1,console.error("User Activity Stream Error"),jr(),P({getActiveTab:J,message:{type:Z.CabalEvent,eventName:B.userActivityError}})},oi=()=>{Ae=!0,Xr(),P({getActiveTab:J,message:{type:Z.CabalEvent,eventName:O.tradeConnected}})},ii=e=>{P({getActiveTab:J,message:{type:Z.CabalEvent,eventName:O.tradePong,data:{count:e.count.count.toString(),isReady:oe}}})},ui=e=>{try{ae.showTokenStatus&&console.log("handleTradeTokenStatus",e);const t=Mo(e);Mr(t.mint);const n={type:Z.CabalEvent,eventName:O.tokenStatus,data:t};P({getActiveTab:J,message:n})}catch(t){console.error("error in handleTradeTokenStatus",t)}},ci=e=>{try{const t=Ko({mint:qo()||"!no mint!",cabalTradeEvent:e});if(!t)throw new Error("cant parse trade event",t);ae.showTradeEventLog&&console.log("handleTradeEvent",t);const n={type:Z.CabalEvent,eventName:O.tradeEvent,data:t};P({getActiveTab:J,message:n})}catch(t){console.error("error in handleTradeEvent",t)}},li=()=>{Ie=!1,Ae=!1,oe=!1,console.error("Trade Stream Error"),jr();const e={type:Z.CabalEvent,eventName:O.tradeError};P({getActiveTab:J,message:e})},Pr={[B.userActivityConnected]:ni,[B.userActivityPong]:ri,[B.tradeStats]:si,[B.userActivityError]:ai,[O.tradeConnected]:oi,[O.tradePong]:ii,[O.tokenStatus]:ui,[O.tradeEvent]:ci,[O.tradeError]:li},fi=e=>{for(let[t,n]of Object.entries(Pr))e.on(t,n)},Jr=e=>{for(let[t,n]of Object.entries(Pr))e.off(t,n)};function Xr(){Ie&&Ae&&(oe=!0,console.log("Both streams connected successfully"))}const $r=()=>{console.log("initializeCabalService");const e=St();e&&(Jr(e),e.stop(),et(null));{const t=new xo({apiKey:ae.apiKey,apiUrl:ae.apiUrl});fi(t),t.start(),et(t)}};function jr(){j&&clearTimeout(j),Ie=!1,Ae=!1,j=setTimeout(()=>{console.log("Attempting to reconnect..."),$r()},Gr.reconnectTimeout)}const di=()=>(j&&clearTimeout(j),$r(),()=>{j&&clearTimeout(j);const e=St();e&&(Jr(e),e.stop(),et(null))}),mi=di();chrome.runtime.onSuspend.addListener(()=>{console.log("### Sleep ###"),mi()});
