var Ne={exports:{}},St;function Xr(){if(St)return Ne.exports;St=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(d,b,h){return Function.prototype.apply.call(d,b,h)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:n=function(d){return Object.getOwnPropertyNames(d)};function r(m){console&&console.warn&&console.warn(m)}var a=Number.isNaN||function(d){return d!==d};function s(){s.init.call(this)}Ne.exports=s,Ne.exports.once=O,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function i(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(m){if(typeof m!="number"||m<0||a(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");o=m}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(d){if(typeof d!="number"||d<0||a(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this};function c(m){return m._maxListeners===void 0?s.defaultMaxListeners:m._maxListeners}s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(d){for(var b=[],h=1;h<arguments.length;h++)b.push(arguments[h]);var y=d==="error",w=this._events;if(w!==void 0)y=y&&w.error===void 0;else if(!y)return!1;if(y){var I;if(b.length>0&&(I=b[0]),I instanceof Error)throw I;var Y=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw Y.context=I,Y}var oe=w[d];if(oe===void 0)return!1;if(typeof oe=="function")t(oe,this,b);else for(var At=oe.length,Jr=p(oe,At),h=0;h<At;++h)t(Jr[h],this,b);return!0};function l(m,d,b,h){var y,w,I;if(i(b),w=m._events,w===void 0?(w=m._events=Object.create(null),m._eventsCount=0):(w.newListener!==void 0&&(m.emit("newListener",d,b.listener?b.listener:b),w=m._events),I=w[d]),I===void 0)I=w[d]=b,++m._eventsCount;else if(typeof I=="function"?I=w[d]=h?[b,I]:[I,b]:h?I.unshift(b):I.push(b),y=c(m),y>0&&I.length>y&&!I.warned){I.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=m,Y.type=d,Y.count=I.length,r(Y)}return m}s.prototype.addListener=function(d,b){return l(this,d,b,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(d,b){return l(this,d,b,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(m,d,b){var h={fired:!1,wrapFn:void 0,target:m,type:d,listener:b},y=g.bind(h);return y.listener=b,h.wrapFn=y,y}s.prototype.once=function(d,b){return i(b),this.on(d,E(this,d,b)),this},s.prototype.prependOnceListener=function(d,b){return i(b),this.prependListener(d,E(this,d,b)),this},s.prototype.removeListener=function(d,b){var h,y,w,I,Y;if(i(b),y=this._events,y===void 0)return this;if(h=y[d],h===void 0)return this;if(h===b||h.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete y[d],y.removeListener&&this.emit("removeListener",d,h.listener||b));else if(typeof h!="function"){for(w=-1,I=h.length-1;I>=0;I--)if(h[I]===b||h[I].listener===b){Y=h[I].listener,w=I;break}if(w<0)return this;w===0?h.shift():N(h,w),h.length===1&&(y[d]=h[0]),y.removeListener!==void 0&&this.emit("removeListener",d,Y||b)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(d){var b,h,y;if(h=this._events,h===void 0)return this;if(h.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):h[d]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete h[d]),this;if(arguments.length===0){var w=Object.keys(h),I;for(y=0;y<w.length;++y)I=w[y],I!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=h[d],typeof b=="function")this.removeListener(d,b);else if(b!==void 0)for(y=b.length-1;y>=0;y--)this.removeListener(d,b[y]);return this};function S(m,d,b){var h=m._events;if(h===void 0)return[];var y=h[d];return y===void 0?[]:typeof y=="function"?b?[y.listener||y]:[y]:b?_(y):p(y,y.length)}s.prototype.listeners=function(d){return S(this,d,!0)},s.prototype.rawListeners=function(d){return S(this,d,!1)},s.listenerCount=function(m,d){return typeof m.listenerCount=="function"?m.listenerCount(d):f.call(m,d)},s.prototype.listenerCount=f;function f(m){var d=this._events;if(d!==void 0){var b=d[m];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function p(m,d){for(var b=new Array(d),h=0;h<d;++h)b[h]=m[h];return b}function N(m,d){for(;d+1<m.length;d++)m[d]=m[d+1];m.pop()}function _(m){for(var d=new Array(m.length),b=0;b<d.length;++b)d[b]=m[b].listener||m[b];return d}function O(m,d){return new Promise(function(b,h){function y(I){m.removeListener(d,w),h(I)}function w(){typeof m.removeListener=="function"&&m.removeListener("error",y),b([].slice.call(arguments))}G(m,d,w,{once:!0}),d!=="error"&&K(m,y,{once:!0})})}function K(m,d,b){typeof m.on=="function"&&G(m,"error",d,b)}function G(m,d,b,h){if(typeof m.on=="function")h.once?m.once(d,b):m.on(d,b);else if(typeof m.addEventListener=="function")m.addEventListener(d,function y(w){h.once&&m.removeEventListener(d,y),b(w)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}return Ne.exports}var $r=Xr(),A;(function(e){e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"})(A||(A={}));function He(e,t){return e!==null&&typeof e=="object"&&"$typeName"in e&&typeof e.$typeName=="string"?t===void 0?!0:t.typeName===e.$typeName:!1}var u;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(u||(u={}));function jr(){let e=0,t=0;for(let r=0;r<28;r+=7){let a=this.buf[this.pos++];if(e|=(a&127)<<r,(a&128)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,(n&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let a=this.buf[this.pos++];if(t|=(a&127)<<r,(a&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Ge(e,t,n){for(let s=0;s<28;s=s+7){const o=e>>>s,i=!(!(o>>>7)&&t==0),c=(i?o|128:o)&255;if(n.push(c),!i)return}const r=e>>>28&15|(t&7)<<4,a=t>>3!=0;if(n.push((a?r|128:r)&255),!!a){for(let s=3;s<31;s=s+7){const o=t>>>s,i=!!(o>>>7),c=(i?o|128:o)&255;if(n.push(c),!i)return}n.push(t>>>31&1)}}const ve=4294967296;function vt(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,a=0;function s(o,i){const c=Number(e.slice(o,i));a*=n,r=r*n+c,r>=ve&&(a=a+(r/ve|0),r=r%ve)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),t?Un(r,a):Qe(r,a)}function zr(e,t){let n=Qe(e,t);const r=n.hi&2147483648;r&&(n=Un(n.lo,n.hi));const a=Ln(n.lo,n.hi);return r?"-"+a:a}function Ln(e,t){if({lo:e,hi:t}=Hr(e,t),t<=2097151)return String(ve*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,a=t>>16&65535;let s=n+r*6777216+a*6710656,o=r+a*8147497,i=a*2;const c=1e7;return s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(i+=Math.floor(o/c),o%=c),i.toString()+wt(o)+wt(s)}function Hr(e,t){return{lo:e>>>0,hi:t>>>0}}function Qe(e,t){return{lo:e|0,hi:t|0}}function Un(e,t){return t=~t,e?e=~e+1:t+=1,Qe(e,t)}const wt=e=>{const t=String(e);return"0000000".slice(t.length)+t};function Tt(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function Qr(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;(e&128)!==0&&n<10;n++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var _t={};const R=qr();function qr(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof _t!="object"||_t.BUF_BIGINT_DISABLE!=="1")){const n=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),a=BigInt("0"),s=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){const i=typeof o=="bigint"?o:BigInt(o);if(i>r||i<n)throw new Error(`invalid int64: ${o}`);return i},uParse(o){const i=typeof o=="bigint"?o:BigInt(o);if(i>s||i<a)throw new Error(`invalid uint64: ${o}`);return i},enc(o){return e.setBigInt64(0,this.parse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(o){return e.setBigInt64(0,this.uParse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(o,i){return e.setInt32(0,o,!0),e.setInt32(4,i,!0),e.getBigInt64(0,!0)},uDec(o,i){return e.setInt32(0,o,!0),e.setInt32(4,i,!0),e.getBigUint64(0,!0)}}}return{zero:"0",supported:!1,parse(n){return typeof n!="string"&&(n=n.toString()),Rt(n),n},uParse(n){return typeof n!="string"&&(n=n.toString()),kt(n),n},enc(n){return typeof n!="string"&&(n=n.toString()),Rt(n),vt(n)},uEnc(n){return typeof n!="string"&&(n=n.toString()),kt(n),vt(n)},dec(n,r){return zr(n,r)},uDec(n,r){return Ln(n,r)}}}function Rt(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function kt(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}function z(e,t){switch(e){case u.STRING:return"";case u.BOOL:return!1;case u.DOUBLE:case u.FLOAT:return 0;case u.INT64:case u.UINT64:case u.SFIXED64:case u.FIXED64:case u.SINT64:return t?"0":R.zero;case u.BYTES:return new Uint8Array(0);default:return 0}}function ea(e,t){switch(e){case u.BOOL:return t===!1;case u.STRING:return t==="";case u.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}const Bn=2,P=Symbol.for("reflect unsafe local");function Cn(e,t){const n=e[t.localName].case;return n===void 0?n:t.fields.find(r=>r.localName===n)}function ta(e,t){const n=t.localName;if(t.oneof)return e[t.oneof.localName].case===n;if(t.presence!=Bn)return e[n]!==void 0&&Object.prototype.hasOwnProperty.call(e,n);switch(t.fieldKind){case"list":return e[n].length>0;case"map":return Object.keys(e[n]).length>0;case"scalar":return!ea(t.scalar,e[n]);case"enum":return e[n]!==t.enum.values[0].number}throw new Error("message field with implicit presence")}function le(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==void 0}function Vn(e,t){if(t.oneof){const n=e[t.oneof.localName];return n.case===t.localName?n.value:void 0}return e[t.localName]}function Gn(e,t,n){t.oneof?e[t.oneof.localName]={case:t.localName,value:n}:e[t.localName]=n}function na(e,t){const n=t.localName;if(t.oneof){const r=t.oneof.localName;e[r].case===n&&(e[r]={case:void 0})}else if(t.presence!=Bn)delete e[n];else switch(t.fieldKind){case"map":e[n]={};break;case"list":e[n]=[];break;case"enum":e[n]=t.enum.values[0].number;break;case"scalar":e[n]=z(t.scalar,t.longAsString);break}}function X(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function qe(e,t){var n,r,a,s;if(X(e)&&P in e&&"add"in e&&"field"in e&&typeof e.field=="function"){if(t!==void 0){const o=t,i=e.field();return o.listKind==i.listKind&&o.scalar===i.scalar&&((n=o.message)===null||n===void 0?void 0:n.typeName)===((r=i.message)===null||r===void 0?void 0:r.typeName)&&((a=o.enum)===null||a===void 0?void 0:a.typeName)===((s=i.enum)===null||s===void 0?void 0:s.typeName)}return!0}return!1}function et(e,t){var n,r,a,s;if(X(e)&&P in e&&"has"in e&&"field"in e&&typeof e.field=="function"){if(t!==void 0){const o=t,i=e.field();return o.mapKey===i.mapKey&&o.mapKind==i.mapKind&&o.scalar===i.scalar&&((n=o.message)===null||n===void 0?void 0:n.typeName)===((r=i.message)===null||r===void 0?void 0:r.typeName)&&((a=o.enum)===null||a===void 0?void 0:a.typeName)===((s=i.enum)===null||s===void 0?void 0:s.typeName)}return!0}return!1}function tt(e,t){return X(e)&&P in e&&"desc"in e&&X(e.desc)&&e.desc.kind==="message"&&(t===void 0||e.desc.typeName==t.typeName)}function ra(e){return Yn(e.$typeName)}function ge(e){const t=e.fields[0];return Yn(e.typeName)&&t!==void 0&&t.fieldKind=="scalar"&&t.name=="value"&&t.number==1}function Yn(e){return e.startsWith("google.protobuf.")&&["DoubleValue","FloatValue","Int64Value","UInt64Value","Int32Value","UInt32Value","BoolValue","StringValue","BytesValue"].includes(e.substring(16))}const aa=999,sa=998,we=2;function F(e,t){if(He(t,e))return t;const n=la(e);return t!==void 0&&oa(e,n,t),n}function oa(e,t,n){for(const r of e.members){let a=n[r.localName];if(a==null)continue;let s;if(r.kind=="oneof"){const o=Cn(n,r);if(!o)continue;s=o,a=Vn(n,o)}else s=r;switch(s.fieldKind){case"message":a=nt(s,a);break;case"scalar":a=Dn(s,a);break;case"list":a=ua(s,a);break;case"map":a=ia(s,a);break}Gn(t,s,a)}return t}function Dn(e,t){return e.scalar==u.BYTES?rt(t):t}function ia(e,t){if(X(t)){if(e.scalar==u.BYTES)return Ot(t,rt);if(e.mapKind=="message")return Ot(t,n=>nt(e,n))}return t}function ua(e,t){if(Array.isArray(t)){if(e.scalar==u.BYTES)return t.map(rt);if(e.listKind=="message")return t.map(n=>nt(e,n))}return t}function nt(e,t){if(e.fieldKind=="message"&&!e.oneof&&ge(e.message))return Dn(e.message.fields[0],t);if(X(t)){if(e.message.typeName=="google.protobuf.Struct"&&e.parent.typeName!=="google.protobuf.Value")return t;if(!He(t,e.message))return F(e.message,t)}return t}function rt(e){return Array.isArray(e)?new Uint8Array(e):e}function Ot(e,t){const n={};for(const r of Object.entries(e))n[r[0]]=t(r[1]);return n}const ca=Symbol(),Lt=new WeakMap;function la(e){let t;if(fa(e)){const n=Lt.get(e);let r,a;if(n)({prototype:r,members:a}=n);else{r={},a=new Set;for(const s of e.members)s.kind!="oneof"&&(s.fieldKind!="scalar"&&s.fieldKind!="enum"||s.presence!=we&&(a.add(s),r[s.localName]=Ye(s)));Lt.set(e,{prototype:r,members:a})}t=Object.create(r),t.$typeName=e.typeName;for(const s of e.members)a.has(s)||s.kind=="field"&&(s.fieldKind=="message"||(s.fieldKind=="scalar"||s.fieldKind=="enum")&&s.presence!=we)||(t[s.localName]=Ye(s))}else{t={$typeName:e.typeName};for(const n of e.members)(n.kind=="oneof"||n.presence==we)&&(t[n.localName]=Ye(n))}return t}function fa(e){switch(e.file.edition){case aa:return!1;case sa:return!0;default:return e.fields.some(t=>t.presence!=we&&t.fieldKind!="message"&&!t.oneof)}}function Ye(e){if(e.kind=="oneof")return{case:void 0};if(e.fieldKind=="list")return[];if(e.fieldKind=="map")return{};if(e.fieldKind=="message")return ca;const t=e.getDefaultValue();return t!==void 0?e.fieldKind=="scalar"&&e.longAsString?t.toString():t:e.fieldKind=="scalar"?z(e.scalar,e.longAsString):e.enum.values[0].number}const da=["FieldValueInvalidError","FieldListRangeError","ForeignFieldError"];class B extends Error{constructor(t,n,r="FieldValueInvalidError"){super(n),this.name=r,this.field=()=>t}}function ma(e){return e instanceof Error&&da.includes(e.name)&&"field"in e&&typeof e.field=="function"}const De=Symbol.for("@bufbuild/protobuf/text-encoding");function at(){if(globalThis[De]==null){const e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[De]={encodeUtf8(n){return e.encode(n)},decodeUtf8(n){return t.decode(n)},checkUtf8(n){try{return encodeURIComponent(n),!0}catch{return!1}}}}return globalThis[De]}var k;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(k||(k={}));const Fn=34028234663852886e22,Kn=-34028234663852886e22,xn=4294967295,Zn=2147483647,Mn=-2147483648;class Wn{constructor(t=at().encodeUtf8){this.encodeUtf8=t,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let t=0;for(let a=0;a<this.chunks.length;a++)t+=this.chunks[a].length;let n=new Uint8Array(t),r=0;for(let a=0;a<this.chunks.length;a++)n.set(this.chunks[a],r),r+=this.chunks[a].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(Ut(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Fe(t),Tt(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.encodeUtf8(t);return this.uint32(n.byteLength),this.raw(n)}float(t){ba(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){Ut(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){Fe(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return Fe(t),t=(t<<1^t>>31)>>>0,Tt(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),a=R.enc(t);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),a=R.uEnc(t);return r.setInt32(0,a.lo,!0),r.setInt32(4,a.hi,!0),this.raw(n)}int64(t){let n=R.enc(t);return Ge(n.lo,n.hi,this.buf),this}sint64(t){const n=R.enc(t),r=n.hi>>31,a=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return Ge(a,s,this.buf),this}uint64(t){const n=R.uEnc(t);return Ge(n.lo,n.hi,this.buf),this}}class st{constructor(t,n=at().decodeUtf8){this.decodeUtf8=n,this.varint64=jr,this.uint32=Qr,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength)}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t,n){let r=this.pos;switch(t){case k.Varint:for(;this.buf[this.pos++]&128;);break;case k.Bit64:this.pos+=4;case k.Bit32:this.pos+=4;break;case k.LengthDelimited:let a=this.uint32();this.pos+=a;break;case k.StartGroup:for(;;){const[s,o]=this.tag();if(o===k.EndGroup){if(n!==void 0&&s!==n)throw new Error("invalid end group tag");break}this.skip(o,s)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return R.dec(...this.varint64())}uint64(){return R.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,R.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return R.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return R.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.decodeUtf8(this.bytes())}}function Fe(e){if(typeof e=="string")e=Number(e);else if(typeof e!="number")throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>Zn||e<Mn)throw new Error("invalid int32: "+e)}function Ut(e){if(typeof e=="string")e=Number(e);else if(typeof e!="number")throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>xn||e<0)throw new Error("invalid uint32: "+e)}function ba(e){if(typeof e=="string"){const t=e;if(e=Number(e),Number.isNaN(e)&&t!=="NaN")throw new Error("invalid float32: "+t)}else if(typeof e!="number")throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>Fn||e<Kn))throw new Error("invalid float32: "+e)}function $(e,t){const n=e.fieldKind=="list"?qe(t,e):e.fieldKind=="map"?et(t,e):ot(e,t);if(n===!0)return;let r;switch(e.fieldKind){case"list":r=`expected ${Xn(e)}, got ${L(t)}`;break;case"map":r=`expected ${$n(e)}, got ${L(t)}`;break;default:r=Te(e,t,n)}return new B(e,r)}function Bt(e,t,n){const r=ot(e,n);if(r!==!0)return new B(e,`list item #${t+1}: ${Te(e,n,r)}`)}function ga(e,t,n){const r=Pn(t,e.mapKey);if(r!==!0)return new B(e,`invalid map key: ${Te({scalar:e.mapKey},t,r)}`);const a=ot(e,n);if(a!==!0)return new B(e,`map entry ${L(t)}: ${Te(e,n,a)}`)}function ot(e,t){return e.scalar!==void 0?Pn(t,e.scalar):e.enum!==void 0?e.enum.open?Number.isInteger(t):e.enum.values.some(n=>n.number===t):tt(t,e.message)}function Pn(e,t){switch(t){case u.DOUBLE:return typeof e=="number";case u.FLOAT:return typeof e!="number"?!1:Number.isNaN(e)||!Number.isFinite(e)?!0:e>Fn||e<Kn?`${e.toFixed()} out of range`:!0;case u.INT32:case u.SFIXED32:case u.SINT32:return typeof e!="number"||!Number.isInteger(e)?!1:e>Zn||e<Mn?`${e.toFixed()} out of range`:!0;case u.FIXED32:case u.UINT32:return typeof e!="number"||!Number.isInteger(e)?!1:e>xn||e<0?`${e.toFixed()} out of range`:!0;case u.BOOL:return typeof e=="boolean";case u.STRING:return typeof e!="string"?!1:at().checkUtf8(e)||"invalid UTF8";case u.BYTES:return e instanceof Uint8Array;case u.INT64:case u.SFIXED64:case u.SINT64:if(typeof e=="bigint"||typeof e=="number"||typeof e=="string"&&e.length>0)try{return R.parse(e),!0}catch{return`${e} out of range`}return!1;case u.FIXED64:case u.UINT64:if(typeof e=="bigint"||typeof e=="number"||typeof e=="string"&&e.length>0)try{return R.uParse(e),!0}catch{return`${e} out of range`}return!1}}function Te(e,t,n){return n=typeof n=="string"?`: ${n}`:`, got ${L(t)}`,e.scalar!==void 0?`expected ${pa(e.scalar)}`+n:e.enum!==void 0?`expected ${e.enum.toString()}`+n:`expected ${Jn(e.message)}`+n}function L(e){switch(typeof e){case"object":return e===null?"null":e instanceof Uint8Array?`Uint8Array(${e.length})`:Array.isArray(e)?`Array(${e.length})`:qe(e)?Xn(e.field()):et(e)?$n(e.field()):tt(e)?Jn(e.desc):He(e)?`message ${e.$typeName}`:"object";case"string":return e.length>30?"string":`"${e.split('"').join('\\"')}"`;case"boolean":return String(e);case"number":return String(e);case"bigint":return String(e)+"n";default:return typeof e}}function Jn(e){return`ReflectMessage (${e.typeName})`}function Xn(e){switch(e.listKind){case"message":return`ReflectList (${e.message.toString()})`;case"enum":return`ReflectList (${e.enum.toString()})`;case"scalar":return`ReflectList (${u[e.scalar]})`}}function $n(e){switch(e.mapKind){case"message":return`ReflectMap (${u[e.mapKey]}, ${e.message.toString()})`;case"enum":return`ReflectMap (${u[e.mapKey]}, ${e.enum.toString()})`;case"scalar":return`ReflectMap (${u[e.mapKey]}, ${u[e.scalar]})`}}function pa(e){switch(e){case u.STRING:return"string";case u.BOOL:return"boolean";case u.INT64:case u.SINT64:case u.SFIXED64:return"bigint (int64)";case u.UINT64:case u.FIXED64:return"bigint (uint64)";case u.BYTES:return"Uint8Array";case u.DOUBLE:return"number (float64)";case u.FLOAT:return"number (float32)";case u.FIXED32:case u.UINT32:return"number (uint32)";case u.INT32:case u.SFIXED32:case u.SINT32:return"number (int32)"}}function V(e,t,n=!0){return new jn(e,t,n)}class jn{get sortedFields(){var t;return(t=this._sortedFields)!==null&&t!==void 0?t:this._sortedFields=this.desc.fields.concat().sort((n,r)=>n.number-r.number)}constructor(t,n,r=!0){this.lists=new Map,this.maps=new Map,this.check=r,this.desc=t,this.message=this[P]=n??F(t),this.fields=t.fields,this.oneofs=t.oneofs,this.members=t.members}findNumber(t){return this._fieldsByNumber||(this._fieldsByNumber=new Map(this.desc.fields.map(n=>[n.number,n]))),this._fieldsByNumber.get(t)}oneofCase(t){return ie(this.message,t),Cn(this.message,t)}isSet(t){return ie(this.message,t),ta(this.message,t)}clear(t){ie(this.message,t),na(this.message,t)}get(t){ie(this.message,t);const n=Vn(this.message,t);switch(t.fieldKind){case"list":let r=this.lists.get(t);return(!r||r[P]!==n)&&this.lists.set(t,r=new ha(t,n,this.check)),r;case"map":let a=this.maps.get(t);return(!a||a[P]!==n)&&this.maps.set(t,a=new ya(t,n,this.check)),a;case"message":return ut(t,n,this.check);case"scalar":return n===void 0?z(t.scalar,!1):ct(t,n);case"enum":return n??t.enum.values[0].number}}set(t,n){if(ie(this.message,t),this.check){const a=$(t,n);if(a)throw a}let r;t.fieldKind=="message"?r=it(t,n):et(n)||qe(n)?r=n[P]:r=lt(t,n),Gn(this.message,t,r)}getUnknown(){return this.message.$unknown}setUnknown(t){this.message.$unknown=t}}function ie(e,t){if(t.parent.typeName!==e.$typeName)throw new B(t,`cannot use ${t.toString()} with message ${e.$typeName}`,"ForeignFieldError")}class ha{field(){return this._field}get size(){return this._arr.length}constructor(t,n,r){this._field=t,this._arr=this[P]=n,this.check=r}get(t){const n=this._arr[t];return n===void 0?void 0:Ke(this._field,n,this.check)}set(t,n){if(t<0||t>=this._arr.length)throw new B(this._field,`list item #${t+1}: out of range`);if(this.check){const r=Bt(this._field,t,n);if(r)throw r}this._arr[t]=Ct(this._field,n)}add(t){if(this.check){const n=Bt(this._field,this._arr.length,t);if(n)throw n}this._arr.push(Ct(this._field,t))}clear(){this._arr.splice(0,this._arr.length)}[Symbol.iterator](){return this.values()}keys(){return this._arr.keys()}*values(){for(const t of this._arr)yield Ke(this._field,t,this.check)}*entries(){for(let t=0;t<this._arr.length;t++)yield[t,Ke(this._field,this._arr[t],this.check)]}}class ya{constructor(t,n,r=!0){this.obj=this[P]=n??{},this.check=r,this._field=t}field(){return this._field}set(t,n){if(this.check){const r=ga(this._field,t,n);if(r)throw r}return this.obj[Ie(t)]=Ea(this._field,n),this}delete(t){const n=Ie(t),r=Object.prototype.hasOwnProperty.call(this.obj,n);return r&&delete this.obj[n],r}clear(){for(const t of Object.keys(this.obj))delete this.obj[t]}get(t){let n=this.obj[Ie(t)];return n!==void 0&&(n=xe(this._field,n,this.check)),n}has(t){return Object.prototype.hasOwnProperty.call(this.obj,Ie(t))}*keys(){for(const t of Object.keys(this.obj))yield Vt(t,this._field.mapKey)}*entries(){for(const t of Object.entries(this.obj))yield[Vt(t[0],this._field.mapKey),xe(this._field,t[1],this.check)]}[Symbol.iterator](){return this.entries()}get size(){return Object.keys(this.obj).length}*values(){for(const t of Object.values(this.obj))yield xe(this._field,t,this.check)}forEach(t,n){for(const r of this.entries())t.call(n,r[1],r[0],this)}}function it(e,t){return tt(t)?ra(t.message)&&!e.oneof&&e.fieldKind=="message"?t.message.value:t.desc.typeName=="google.protobuf.Struct"&&e.parent.typeName!="google.protobuf.Value"?Hn(t.message):t.message:t}function ut(e,t,n){return t!==void 0&&(ge(e.message)&&!e.oneof&&e.fieldKind=="message"?t={$typeName:e.message.typeName,value:ct(e.message.fields[0],t)}:e.message.typeName=="google.protobuf.Struct"&&e.parent.typeName!="google.protobuf.Value"&&X(t)&&(t=zn(t))),new jn(e.message,t,n)}function Ct(e,t){return e.listKind=="message"?it(e,t):lt(e,t)}function Ke(e,t,n){return e.listKind=="message"?ut(e,t,n):ct(e,t)}function Ea(e,t){return e.mapKind=="message"?it(e,t):lt(e,t)}function xe(e,t,n){return e.mapKind=="message"?ut(e,t,n):t}function Ie(e){return typeof e=="string"||typeof e=="number"?e:String(e)}function Vt(e,t){switch(t){case u.STRING:return e;case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:{const n=Number.parseInt(e);if(Number.isFinite(n))return n;break}case u.BOOL:switch(e){case"true":return!0;case"false":return!1}break;case u.UINT64:case u.FIXED64:try{return R.uParse(e)}catch{}break;default:try{return R.parse(e)}catch{}break}return e}function ct(e,t){switch(e.scalar){case u.INT64:case u.SFIXED64:case u.SINT64:"longAsString"in e&&e.longAsString&&typeof t=="string"&&(t=R.parse(t));break;case u.FIXED64:case u.UINT64:"longAsString"in e&&e.longAsString&&typeof t=="string"&&(t=R.uParse(t));break}return t}function lt(e,t){switch(e.scalar){case u.INT64:case u.SFIXED64:case u.SINT64:"longAsString"in e&&e.longAsString?t=String(t):(typeof t=="string"||typeof t=="number")&&(t=R.parse(t));break;case u.FIXED64:case u.UINT64:"longAsString"in e&&e.longAsString?t=String(t):(typeof t=="string"||typeof t=="number")&&(t=R.uParse(t));break}return t}function zn(e){const t={$typeName:"google.protobuf.Struct",fields:{}};if(X(e))for(const[n,r]of Object.entries(e))t.fields[n]=qn(r);return t}function Hn(e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=Qn(r);return t}function Qn(e){switch(e.kind.case){case"structValue":return Hn(e.kind.value);case"listValue":return e.kind.value.values.map(Qn);case"nullValue":case void 0:return null;default:return e.kind.value}}function qn(e){const t={$typeName:"google.protobuf.Value",kind:{case:void 0}};switch(typeof e){case"number":t.kind={case:"numberValue",value:e};break;case"string":t.kind={case:"stringValue",value:e};break;case"boolean":t.kind={case:"boolValue",value:e};break;case"object":if(e===null)t.kind={case:"nullValue",value:0};else if(Array.isArray(e)){const n={$typeName:"google.protobuf.ListValue",values:[]};if(Array.isArray(e))for(const r of e)n.values.push(qn(r));t.kind={case:"listValue",value:n}}else t.kind={case:"structValue",value:zn(e)};break}return t}function ft(e){const t=Ia();let n=e.length*3/4;e[e.length-2]=="="?n-=2:e[e.length-1]=="="&&(n-=1);let r=new Uint8Array(n),a=0,s=0,o,i=0;for(let c=0;c<e.length;c++){if(o=t[e.charCodeAt(c)],o===void 0)switch(e[c]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string")}switch(s){case 0:i=o,s=1;break;case 1:r[a++]=i<<2|(o&48)>>4,i=o,s=2;break;case 2:r[a++]=(i&15)<<4|(o&60)>>2,i=o,s=3;break;case 3:r[a++]=(i&3)<<6|o,s=0;break}}if(s==1)throw Error("invalid base64 string");return r.subarray(0,a)}function Na(e,t="std"){const n=er(t),r=t=="std";let a="",s=0,o,i=0;for(let c=0;c<e.length;c++)switch(o=e[c],s){case 0:a+=n[o>>2],i=(o&3)<<4,s=1;break;case 1:a+=n[i|o>>4],i=(o&15)<<2,s=2;break;case 2:a+=n[i|o>>6],a+=n[o&63],s=0;break}return s&&(a+=n[i],r&&(a+="=",s==1&&(a+="="))),a}let Ae,Gt,Q;function er(e){return Ae||(Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Gt=Ae.slice(0,-2).concat("-","_")),e=="url"?Gt:Ae}function Ia(){if(!Q){Q=[];const e=er("std");for(let t=0;t<e.length;t++)Q[e[t].charCodeAt(0)]=t;Q[45]=e.indexOf("+"),Q[95]=e.indexOf("/")}return Q}function fe(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let a=e.charAt(r);switch(a){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(a),t=!1;break;default:t&&(t=!1,a=a.toUpperCase()),n.push(a);break}}return n.join("")}const Aa=new Set(["constructor","toString","toJSON","valueOf"]);function de(e){return Aa.has(e)?e+"$":e}function dt(e){for(const t of e.field)le(t,"jsonName")||(t.jsonName=fe(t.name));e.nestedType.forEach(dt)}function Sa(e,t){const n=e.values.find(r=>r.name===t);if(!n)throw new Error(`cannot parse ${e} default value: ${t}`);return n.number}function va(e,t){switch(e){case u.STRING:return t;case u.BYTES:{const n=wa(t);if(n===!1)throw new Error(`cannot parse ${u[e]} default value: ${t}`);return n}case u.INT64:case u.SFIXED64:case u.SINT64:return R.parse(t);case u.UINT64:case u.FIXED64:return R.uParse(t);case u.DOUBLE:case u.FLOAT:switch(t){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(t)}case u.BOOL:return t==="true";case u.INT32:case u.UINT32:case u.SINT32:case u.FIXED32:case u.SFIXED32:return parseInt(t,10)}}function wa(e){const t=[],n={tail:e,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(r){if(this.tail.length>=r){const a=this.tail.substring(0,r);return this.tail=this.tail.substring(r),a}return!1}};for(;n.next();)switch(n.c){case"\\":if(n.next())switch(n.c){case"\\":t.push(n.c.charCodeAt(0));break;case"b":t.push(8);break;case"f":t.push(12);break;case"n":t.push(10);break;case"r":t.push(13);break;case"t":t.push(9);break;case"v":t.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const r=n.c,a=n.take(2);if(a===!1)return!1;const s=parseInt(r+a,8);if(Number.isNaN(s))return!1;t.push(s);break}case"x":{const r=n.c,a=n.take(2);if(a===!1)return!1;const s=parseInt(r+a,16);if(Number.isNaN(s))return!1;t.push(s);break}case"u":{const r=n.c,a=n.take(4);if(a===!1)return!1;const s=parseInt(r+a,16);if(Number.isNaN(s))return!1;const o=new Uint8Array(4);new DataView(o.buffer).setInt32(0,s,!0),t.push(o[0],o[1],o[2],o[3]);break}case"U":{const r=n.c,a=n.take(8);if(a===!1)return!1;const s=R.uEnc(r+a),o=new Uint8Array(8),i=new DataView(o.buffer);i.setInt32(0,s.lo,!0),i.setInt32(4,s.hi,!0),t.push(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);break}}break;default:t.push(n.c.charCodeAt(0))}return new Uint8Array(t)}function*Pe(e){switch(e.kind){case"file":for(const t of e.messages)yield t,yield*Pe(t);yield*e.enums,yield*e.services,yield*e.extensions;break;case"message":for(const t of e.nestedMessages)yield t,yield*Pe(t);yield*e.nestedEnums,yield*e.nestedExtensions;break}}function tr(...e){const t=Ta();if(!e.length)return t;if("$typeName"in e[0]&&e[0].$typeName=="google.protobuf.FileDescriptorSet"){for(const r of e[0].file)Kt(r,t);return t}if("$typeName"in e[0]){let o=function(i){const c=[];for(const l of i.dependency){if(t.getFile(l)!=null||s.has(l))continue;const g=a(l);if(!g)throw new Error(`Unable to resolve ${l}, imported by ${i.name}`);"kind"in g?t.addFile(g,!1,!0):(s.add(g.name),c.push(g))}return c.concat(...c.map(o))};var n=o;const r=e[0],a=e[1],s=new Set;for(const i of[r,...o(r)].reverse())Kt(i,t)}else for(const r of e)for(const a of r.files)t.addFile(a);return t}function Ta(){const e=new Map,t=new Map,n=new Map;return{kind:"registry",types:e,extendees:t,[Symbol.iterator](){return e.values()},get files(){return n.values()},addFile(r,a,s){if(n.set(r.proto.name,r),!a)for(const o of Pe(r))this.add(o);if(s)for(const o of r.dependencies)this.addFile(o,a,s)},add(r){if(r.kind=="extension"){let a=t.get(r.extendee.typeName);a||t.set(r.extendee.typeName,a=new Map),a.set(r.number,r)}e.set(r.typeName,r)},get(r){return e.get(r)},getFile(r){return n.get(r)},getMessage(r){const a=e.get(r);return a?.kind=="message"?a:void 0},getEnum(r){const a=e.get(r);return a?.kind=="enum"?a:void 0},getExtension(r){const a=e.get(r);return a?.kind=="extension"?a:void 0},getExtensionFor(r,a){var s;return(s=t.get(r.typeName))===null||s===void 0?void 0:s.get(a)},getService(r){const a=e.get(r);return a?.kind=="service"?a:void 0}}}const _a=998,Ra=999,ka=9,me=10,ce=11,Oa=12,Yt=14,mt=3,La=2,Dt=1,Ua=0,Ze=1,Ft=2,Ba=3,Ca=1,Va=2,Ga=1,nr={998:{fieldPresence:1,enumType:2,repeatedFieldEncoding:2,utf8Validation:3,messageEncoding:1,jsonFormat:2,enforceNamingStyle:2},999:{fieldPresence:2,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2},1e3:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2}};function Kt(e,t){var n,r;const a={kind:"file",proto:e,deprecated:(r=(n=e.options)===null||n===void 0?void 0:n.deprecated)!==null&&r!==void 0?r:!1,edition:Ka(e),name:e.name.replace(/\.proto$/,""),dependencies:xa(e,t),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${e.name}`}},s=new Map,o={get(i){return s.get(i)},add(i){var c;D(((c=i.proto.options)===null||c===void 0?void 0:c.mapEntry)===!0),s.set(i.typeName,i)}};for(const i of e.enumType)rr(i,a,void 0,t);for(const i of e.messageType)ar(i,a,void 0,t,o);for(const i of e.service)Ya(i,a,t);Je(a,t);for(const i of s.values())Xe(i,t,o);for(const i of a.messages)Xe(i,t,o),Je(i,t);t.addFile(a,!0)}function Je(e,t){switch(e.kind){case"file":for(const n of e.proto.extension){const r=$e(n,e,t);e.extensions.push(r),t.add(r)}break;case"message":for(const n of e.proto.extension){const r=$e(n,e,t);e.nestedExtensions.push(r),t.add(r)}for(const n of e.nestedMessages)Je(n,t);break}}function Xe(e,t,n){const r=e.proto.oneofDecl.map(s=>Fa(s,e)),a=new Set;for(const s of e.proto.field){const o=Wa(s,r),i=$e(s,e,t,o,n);e.fields.push(i),e.field[i.localName]=i,o===void 0?e.members.push(i):(o.fields.push(i),a.has(o)||(a.add(o),e.members.push(o)))}for(const s of r.filter(o=>a.has(o)))e.oneofs.push(s);for(const s of e.nestedMessages)Xe(s,t,n)}function rr(e,t,n,r){var a,s,o,i,c;const l=Za(e.name,e.value),g={kind:"enum",proto:e,deprecated:(s=(a=e.options)===null||a===void 0?void 0:a.deprecated)!==null&&s!==void 0?s:!1,file:t,parent:n,open:!0,name:e.name,typeName:ke(e,n,t),value:{},values:[],sharedPrefix:l,toString(){return`enum ${this.typeName}`}};g.open=$a(g),r.add(g);for(const E of e.value){const S=E.name;g.values.push(g.value[E.number]={kind:"enum_value",proto:E,deprecated:(i=(o=E.options)===null||o===void 0?void 0:o.deprecated)!==null&&i!==void 0?i:!1,parent:g,name:S,localName:de(l==null?S:S.substring(l.length)),number:E.number,toString(){return`enum value ${g.typeName}.${S}`}})}((c=n?.nestedEnums)!==null&&c!==void 0?c:t.enums).push(g)}function ar(e,t,n,r,a){var s,o,i,c;const l={kind:"message",proto:e,deprecated:(o=(s=e.options)===null||s===void 0?void 0:s.deprecated)!==null&&o!==void 0?o:!1,file:t,parent:n,name:e.name,typeName:ke(e,n,t),fields:[],field:{},oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`}};((i=e.options)===null||i===void 0?void 0:i.mapEntry)===!0?a.add(l):(((c=n?.nestedMessages)!==null&&c!==void 0?c:t.messages).push(l),r.add(l));for(const g of e.enumType)rr(g,t,l,r);for(const g of e.nestedType)ar(g,t,l,r,a)}function Ya(e,t,n){var r,a;const s={kind:"service",proto:e,deprecated:(a=(r=e.options)===null||r===void 0?void 0:r.deprecated)!==null&&a!==void 0?a:!1,file:t,name:e.name,typeName:ke(e,void 0,t),methods:[],method:{},toString(){return`service ${this.typeName}`}};t.services.push(s),n.add(s);for(const o of e.method){const i=Da(o,s,n);s.methods.push(i),s.method[i.localName]=i}}function Da(e,t,n){var r,a,s,o;let i;e.clientStreaming&&e.serverStreaming?i="bidi_streaming":e.clientStreaming?i="client_streaming":e.serverStreaming?i="server_streaming":i="unary";const c=n.getMessage(W(e.inputType)),l=n.getMessage(W(e.outputType));D(c,`invalid MethodDescriptorProto: input_type ${e.inputType} not found`),D(l,`invalid MethodDescriptorProto: output_type ${e.inputType} not found`);const g=e.name;return{kind:"rpc",proto:e,deprecated:(a=(r=e.options)===null||r===void 0?void 0:r.deprecated)!==null&&a!==void 0?a:!1,parent:t,name:g,localName:de(g.length?de(g[0].toLowerCase()+g.substring(1)):g),methodKind:i,input:c,output:l,idempotency:(o=(s=e.options)===null||s===void 0?void 0:s.idempotencyLevel)!==null&&o!==void 0?o:Ua,toString(){return`rpc ${t.typeName}.${g}`}}}function Fa(e,t){return{kind:"oneof",proto:e,deprecated:!1,parent:t,fields:[],name:e.name,localName:de(fe(e.name)),toString(){return`oneof ${t.typeName}.${this.name}`}}}function $e(e,t,n,r,a){var s,o,i;const c=a===void 0,l={kind:"field",proto:e,deprecated:(o=(s=e.options)===null||s===void 0?void 0:s.deprecated)!==null&&o!==void 0?o:!1,name:e.name,number:e.number,scalar:void 0,message:void 0,enum:void 0,presence:Pa(e,r,c,t),listKind:void 0,mapKind:void 0,mapKey:void 0,delimitedEncoding:void 0,packed:void 0,longAsString:!1,getDefaultValue:void 0};if(c){const f=t.kind=="file"?t:t.file,p=t.kind=="file"?void 0:t,N=ke(e,p,f);l.kind="extension",l.file=f,l.parent=p,l.oneof=void 0,l.typeName=N,l.jsonName=`[${N}]`,l.toString=()=>`extension ${N}`;const _=n.getMessage(W(e.extendee));D(_,`invalid FieldDescriptorProto: extendee ${e.extendee} not found`),l.extendee=_}else{const f=t;D(f.kind=="message"),l.parent=f,l.oneof=r,l.localName=r?fe(e.name):de(fe(e.name)),l.jsonName=e.jsonName,l.toString=()=>`field ${f.typeName}.${e.name}`}const g=e.label,E=e.type,S=(i=e.options)===null||i===void 0?void 0:i.jstype;if(g===mt){const f=E==ce?a?.get(W(e.typeName)):void 0;if(f){l.fieldKind="map";const{key:p,value:N}=Xa(f);return l.mapKey=p.scalar,l.mapKind=N.fieldKind,l.message=N.message,l.delimitedEncoding=!1,l.enum=N.enum,l.scalar=N.scalar,l}switch(l.fieldKind="list",E){case ce:case me:l.listKind="message",l.message=n.getMessage(W(e.typeName)),D(l.message),l.delimitedEncoding=xt(e,t);break;case Yt:l.listKind="enum",l.enum=n.getEnum(W(e.typeName)),D(l.enum);break;default:l.listKind="scalar",l.scalar=E,l.longAsString=S==Dt;break}return l.packed=Ja(e,t),l}switch(E){case ce:case me:l.fieldKind="message",l.message=n.getMessage(W(e.typeName)),D(l.message,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),l.delimitedEncoding=xt(e,t),l.getDefaultValue=()=>{};break;case Yt:{const f=n.getEnum(W(e.typeName));D(f!==void 0,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),l.fieldKind="enum",l.enum=n.getEnum(W(e.typeName)),l.getDefaultValue=()=>le(e,"defaultValue")?Sa(f,e.defaultValue):void 0;break}default:{l.fieldKind="scalar",l.scalar=E,l.longAsString=S==Dt,l.getDefaultValue=()=>le(e,"defaultValue")?va(E,e.defaultValue):void 0;break}}return l}function Ka(e){switch(e.syntax){case"":case"proto2":return _a;case"proto3":return Ra;case"editions":if(e.edition in nr)return e.edition;throw new Error(`${e.name}: unsupported edition`);default:throw new Error(`${e.name}: unsupported syntax "${e.syntax}"`)}}function xa(e,t){return e.dependency.map(n=>{const r=t.getFile(n);if(!r)throw new Error(`Cannot find ${n}, imported by ${e.name}`);return r})}function Za(e,t){const n=Ma(e)+"_";for(const r of t){if(!r.name.toLowerCase().startsWith(n))return;const a=r.name.substring(n.length);if(a.length==0||/^\d/.test(a))return}return n}function Ma(e){return(e.substring(0,1)+e.substring(1).replace(/[A-Z]/g,t=>"_"+t)).toLowerCase()}function ke(e,t,n){let r;return t?r=`${t.typeName}.${e.name}`:n.proto.package.length>0?r=`${n.proto.package}.${e.name}`:r=`${e.name}`,r}function W(e){return e.startsWith(".")?e.substring(1):e}function Wa(e,t){if(!le(e,"oneofIndex")||e.proto3Optional)return;const n=t[e.oneofIndex];return D(n,`invalid FieldDescriptorProto: oneof #${e.oneofIndex} for field #${e.number} not found`),n}function Pa(e,t,n,r){if(e.label==La)return Ba;if(e.label==mt)return Ft;if(t||e.proto3Optional||n)return Ze;const a=te("fieldPresence",{proto:e,parent:r});return a==Ft&&(e.type==ce||e.type==me)?Ze:a}function Ja(e,t){if(e.label!=mt)return!1;switch(e.type){case ka:case Oa:case me:case ce:return!1}const n=e.options;return n&&le(n,"packed")?n.packed:Ca==te("repeatedFieldEncoding",{proto:e,parent:t})}function Xa(e){const t=e.fields.find(r=>r.number===1),n=e.fields.find(r=>r.number===2);return D(t&&t.fieldKind=="scalar"&&t.scalar!=u.BYTES&&t.scalar!=u.FLOAT&&t.scalar!=u.DOUBLE&&n&&n.fieldKind!="list"&&n.fieldKind!="map"),{key:t,value:n}}function $a(e){var t;return Ga==te("enumType",{proto:e.proto,parent:(t=e.parent)!==null&&t!==void 0?t:e.file})}function xt(e,t){return e.type==me?!0:Va==te("messageEncoding",{proto:e,parent:t})}function te(e,t){var n,r;const a=(n=t.proto.options)===null||n===void 0?void 0:n.features;if(a){const s=a[e];if(s!=0)return s}if("kind"in t){if(t.kind=="message")return te(e,(r=t.parent)!==null&&r!==void 0?r:t.file);const s=nr[t.edition];if(!s)throw new Error(`feature default for edition ${t.edition} not found`);return s[e]}return te(e,t.parent)}function D(e,t){if(!e)throw new Error(t)}function ja(e){const t=za(e);return t.messageType.forEach(dt),tr(t,()=>{}).getFile(t.name)}function za(e){return Object.assign(Object.create({syntax:"",edition:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FileDescriptorProto",dependency:[],publicDependency:[],weakDependency:[],service:[],extension:[]},e),{messageType:e.messageType.map(sr),enumType:e.enumType.map(or)}))}function sr(e){var t,n,r,a,s,o,i,c;return{$typeName:"google.protobuf.DescriptorProto",name:e.name,field:(n=(t=e.field)===null||t===void 0?void 0:t.map(Ha))!==null&&n!==void 0?n:[],extension:[],nestedType:(a=(r=e.nestedType)===null||r===void 0?void 0:r.map(sr))!==null&&a!==void 0?a:[],enumType:(o=(s=e.enumType)===null||s===void 0?void 0:s.map(or))!==null&&o!==void 0?o:[],extensionRange:(c=(i=e.extensionRange)===null||i===void 0?void 0:i.map(l=>Object.assign({$typeName:"google.protobuf.DescriptorProto.ExtensionRange"},l)))!==null&&c!==void 0?c:[],oneofDecl:[],reservedRange:[],reservedName:[]}}function Ha(e){return Object.assign(Object.create({label:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldDescriptorProto"},e),{options:e.options?Qa(e.options):void 0}))}function Qa(e){var t,n,r;return Object.assign(Object.create({ctype:0,packed:!1,jstype:0,lazy:!1,unverifiedLazy:!1,deprecated:!1,weak:!1,debugRedact:!1,retention:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldOptions"},e),{targets:(t=e.targets)!==null&&t!==void 0?t:[],editionDefaults:(r=(n=e.editionDefaults)===null||n===void 0?void 0:n.map(s=>Object.assign({$typeName:"google.protobuf.FieldOptions.EditionDefault"},s)))!==null&&r!==void 0?r:[],uninterpretedOption:[]}))}function or(e){return{$typeName:"google.protobuf.EnumDescriptorProto",name:e.name,reservedName:[],reservedRange:[],value:e.value.map(t=>Object.assign({$typeName:"google.protobuf.EnumValueDescriptorProto"},t))}}function pe(e,t,...n){return n.reduce((r,a)=>r.nestedMessages[a],e.messages[t])}const qa=ja({name:"google/protobuf/descriptor.proto",package:"google.protobuf",messageType:[{name:"FileDescriptorSet",field:[{name:"file",number:1,type:11,label:3,typeName:".google.protobuf.FileDescriptorProto"}],extensionRange:[{start:536e6,end:536000001}]},{name:"FileDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"package",number:2,type:9,label:1},{name:"dependency",number:3,type:9,label:3},{name:"public_dependency",number:10,type:5,label:3},{name:"weak_dependency",number:11,type:5,label:3},{name:"message_type",number:4,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:5,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"service",number:6,type:11,label:3,typeName:".google.protobuf.ServiceDescriptorProto"},{name:"extension",number:7,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FileOptions"},{name:"source_code_info",number:9,type:11,label:1,typeName:".google.protobuf.SourceCodeInfo"},{name:"syntax",number:12,type:9,label:1},{name:"edition",number:14,type:14,label:1,typeName:".google.protobuf.Edition"}]},{name:"DescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"field",number:2,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"extension",number:6,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"nested_type",number:3,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"extension_range",number:5,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ExtensionRange"},{name:"oneof_decl",number:8,type:11,label:3,typeName:".google.protobuf.OneofDescriptorProto"},{name:"options",number:7,type:11,label:1,typeName:".google.protobuf.MessageOptions"},{name:"reserved_range",number:9,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ReservedRange"},{name:"reserved_name",number:10,type:9,label:3}],nestedType:[{name:"ExtensionRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ExtensionRangeOptions"}]},{name:"ReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"ExtensionRangeOptions",field:[{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"},{name:"declaration",number:2,type:11,label:3,typeName:".google.protobuf.ExtensionRangeOptions.Declaration",options:{retention:2}},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"verification",number:3,type:14,label:1,typeName:".google.protobuf.ExtensionRangeOptions.VerificationState",defaultValue:"UNVERIFIED",options:{retention:2}}],nestedType:[{name:"Declaration",field:[{name:"number",number:1,type:5,label:1},{name:"full_name",number:2,type:9,label:1},{name:"type",number:3,type:9,label:1},{name:"reserved",number:5,type:8,label:1},{name:"repeated",number:6,type:8,label:1}]}],enumType:[{name:"VerificationState",value:[{name:"DECLARATION",number:0},{name:"UNVERIFIED",number:1}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:3,type:5,label:1},{name:"label",number:4,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Label"},{name:"type",number:5,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Type"},{name:"type_name",number:6,type:9,label:1},{name:"extendee",number:2,type:9,label:1},{name:"default_value",number:7,type:9,label:1},{name:"oneof_index",number:9,type:5,label:1},{name:"json_name",number:10,type:9,label:1},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FieldOptions"},{name:"proto3_optional",number:17,type:8,label:1}],enumType:[{name:"Type",value:[{name:"TYPE_DOUBLE",number:1},{name:"TYPE_FLOAT",number:2},{name:"TYPE_INT64",number:3},{name:"TYPE_UINT64",number:4},{name:"TYPE_INT32",number:5},{name:"TYPE_FIXED64",number:6},{name:"TYPE_FIXED32",number:7},{name:"TYPE_BOOL",number:8},{name:"TYPE_STRING",number:9},{name:"TYPE_GROUP",number:10},{name:"TYPE_MESSAGE",number:11},{name:"TYPE_BYTES",number:12},{name:"TYPE_UINT32",number:13},{name:"TYPE_ENUM",number:14},{name:"TYPE_SFIXED32",number:15},{name:"TYPE_SFIXED64",number:16},{name:"TYPE_SINT32",number:17},{name:"TYPE_SINT64",number:18}]},{name:"Label",value:[{name:"LABEL_OPTIONAL",number:1},{name:"LABEL_REPEATED",number:3},{name:"LABEL_REQUIRED",number:2}]}]},{name:"OneofDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"options",number:2,type:11,label:1,typeName:".google.protobuf.OneofOptions"}]},{name:"EnumDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"value",number:2,type:11,label:3,typeName:".google.protobuf.EnumValueDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumOptions"},{name:"reserved_range",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto.EnumReservedRange"},{name:"reserved_name",number:5,type:9,label:3}],nestedType:[{name:"EnumReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"EnumValueDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumValueOptions"}]},{name:"ServiceDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"method",number:2,type:11,label:3,typeName:".google.protobuf.MethodDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ServiceOptions"}]},{name:"MethodDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"input_type",number:2,type:9,label:1},{name:"output_type",number:3,type:9,label:1},{name:"options",number:4,type:11,label:1,typeName:".google.protobuf.MethodOptions"},{name:"client_streaming",number:5,type:8,label:1,defaultValue:"false"},{name:"server_streaming",number:6,type:8,label:1,defaultValue:"false"}]},{name:"FileOptions",field:[{name:"java_package",number:1,type:9,label:1},{name:"java_outer_classname",number:8,type:9,label:1},{name:"java_multiple_files",number:10,type:8,label:1,defaultValue:"false"},{name:"java_generate_equals_and_hash",number:20,type:8,label:1,options:{deprecated:!0}},{name:"java_string_check_utf8",number:27,type:8,label:1,defaultValue:"false"},{name:"optimize_for",number:9,type:14,label:1,typeName:".google.protobuf.FileOptions.OptimizeMode",defaultValue:"SPEED"},{name:"go_package",number:11,type:9,label:1},{name:"cc_generic_services",number:16,type:8,label:1,defaultValue:"false"},{name:"java_generic_services",number:17,type:8,label:1,defaultValue:"false"},{name:"py_generic_services",number:18,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:23,type:8,label:1,defaultValue:"false"},{name:"cc_enable_arenas",number:31,type:8,label:1,defaultValue:"true"},{name:"objc_class_prefix",number:36,type:9,label:1},{name:"csharp_namespace",number:37,type:9,label:1},{name:"swift_prefix",number:39,type:9,label:1},{name:"php_class_prefix",number:40,type:9,label:1},{name:"php_namespace",number:41,type:9,label:1},{name:"php_metadata_namespace",number:44,type:9,label:1},{name:"ruby_package",number:45,type:9,label:1},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"OptimizeMode",value:[{name:"SPEED",number:1},{name:"CODE_SIZE",number:2},{name:"LITE_RUNTIME",number:3}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"MessageOptions",field:[{name:"message_set_wire_format",number:1,type:8,label:1,defaultValue:"false"},{name:"no_standard_descriptor_accessor",number:2,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"map_entry",number:7,type:8,label:1},{name:"deprecated_legacy_json_field_conflicts",number:11,type:8,label:1,options:{deprecated:!0}},{name:"features",number:12,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldOptions",field:[{name:"ctype",number:1,type:14,label:1,typeName:".google.protobuf.FieldOptions.CType",defaultValue:"STRING"},{name:"packed",number:2,type:8,label:1},{name:"jstype",number:6,type:14,label:1,typeName:".google.protobuf.FieldOptions.JSType",defaultValue:"JS_NORMAL"},{name:"lazy",number:5,type:8,label:1,defaultValue:"false"},{name:"unverified_lazy",number:15,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"weak",number:10,type:8,label:1,defaultValue:"false"},{name:"debug_redact",number:16,type:8,label:1,defaultValue:"false"},{name:"retention",number:17,type:14,label:1,typeName:".google.protobuf.FieldOptions.OptionRetention"},{name:"targets",number:19,type:14,label:3,typeName:".google.protobuf.FieldOptions.OptionTargetType"},{name:"edition_defaults",number:20,type:11,label:3,typeName:".google.protobuf.FieldOptions.EditionDefault"},{name:"features",number:21,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"feature_support",number:22,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],nestedType:[{name:"EditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"value",number:2,type:9,label:1}]},{name:"FeatureSupport",field:[{name:"edition_introduced",number:1,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"edition_deprecated",number:2,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"deprecation_warning",number:3,type:9,label:1},{name:"edition_removed",number:4,type:14,label:1,typeName:".google.protobuf.Edition"}]}],enumType:[{name:"CType",value:[{name:"STRING",number:0},{name:"CORD",number:1},{name:"STRING_PIECE",number:2}]},{name:"JSType",value:[{name:"JS_NORMAL",number:0},{name:"JS_STRING",number:1},{name:"JS_NUMBER",number:2}]},{name:"OptionRetention",value:[{name:"RETENTION_UNKNOWN",number:0},{name:"RETENTION_RUNTIME",number:1},{name:"RETENTION_SOURCE",number:2}]},{name:"OptionTargetType",value:[{name:"TARGET_TYPE_UNKNOWN",number:0},{name:"TARGET_TYPE_FILE",number:1},{name:"TARGET_TYPE_EXTENSION_RANGE",number:2},{name:"TARGET_TYPE_MESSAGE",number:3},{name:"TARGET_TYPE_FIELD",number:4},{name:"TARGET_TYPE_ONEOF",number:5},{name:"TARGET_TYPE_ENUM",number:6},{name:"TARGET_TYPE_ENUM_ENTRY",number:7},{name:"TARGET_TYPE_SERVICE",number:8},{name:"TARGET_TYPE_METHOD",number:9}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"OneofOptions",field:[{name:"features",number:1,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumOptions",field:[{name:"allow_alias",number:2,type:8,label:1},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"deprecated_legacy_json_field_conflicts",number:6,type:8,label:1,options:{deprecated:!0}},{name:"features",number:7,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumValueOptions",field:[{name:"deprecated",number:1,type:8,label:1,defaultValue:"false"},{name:"features",number:2,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"debug_redact",number:3,type:8,label:1,defaultValue:"false"},{name:"feature_support",number:4,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"ServiceOptions",field:[{name:"features",number:34,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"MethodOptions",field:[{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"idempotency_level",number:34,type:14,label:1,typeName:".google.protobuf.MethodOptions.IdempotencyLevel",defaultValue:"IDEMPOTENCY_UNKNOWN"},{name:"features",number:35,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"IdempotencyLevel",value:[{name:"IDEMPOTENCY_UNKNOWN",number:0},{name:"NO_SIDE_EFFECTS",number:1},{name:"IDEMPOTENT",number:2}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"UninterpretedOption",field:[{name:"name",number:2,type:11,label:3,typeName:".google.protobuf.UninterpretedOption.NamePart"},{name:"identifier_value",number:3,type:9,label:1},{name:"positive_int_value",number:4,type:4,label:1},{name:"negative_int_value",number:5,type:3,label:1},{name:"double_value",number:6,type:1,label:1},{name:"string_value",number:7,type:12,label:1},{name:"aggregate_value",number:8,type:9,label:1}],nestedType:[{name:"NamePart",field:[{name:"name_part",number:1,type:9,label:2},{name:"is_extension",number:2,type:8,label:2}]}]},{name:"FeatureSet",field:[{name:"field_presence",number:1,type:14,label:1,typeName:".google.protobuf.FeatureSet.FieldPresence",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPLICIT",edition:900},{value:"IMPLICIT",edition:999},{value:"EXPLICIT",edition:1e3}]}},{name:"enum_type",number:2,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnumType",options:{retention:1,targets:[6,1],editionDefaults:[{value:"CLOSED",edition:900},{value:"OPEN",edition:999}]}},{name:"repeated_field_encoding",number:3,type:14,label:1,typeName:".google.protobuf.FeatureSet.RepeatedFieldEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPANDED",edition:900},{value:"PACKED",edition:999}]}},{name:"utf8_validation",number:4,type:14,label:1,typeName:".google.protobuf.FeatureSet.Utf8Validation",options:{retention:1,targets:[4,1],editionDefaults:[{value:"NONE",edition:900},{value:"VERIFY",edition:999}]}},{name:"message_encoding",number:5,type:14,label:1,typeName:".google.protobuf.FeatureSet.MessageEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"LENGTH_PREFIXED",edition:900}]}},{name:"json_format",number:6,type:14,label:1,typeName:".google.protobuf.FeatureSet.JsonFormat",options:{retention:1,targets:[3,6,1],editionDefaults:[{value:"LEGACY_BEST_EFFORT",edition:900},{value:"ALLOW",edition:999}]}},{name:"enforce_naming_style",number:7,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnforceNamingStyle",options:{retention:2,targets:[1,2,3,4,5,6,7,8,9],editionDefaults:[{value:"STYLE_LEGACY",edition:900},{value:"STYLE2024",edition:1001}]}}],enumType:[{name:"FieldPresence",value:[{name:"FIELD_PRESENCE_UNKNOWN",number:0},{name:"EXPLICIT",number:1},{name:"IMPLICIT",number:2},{name:"LEGACY_REQUIRED",number:3}]},{name:"EnumType",value:[{name:"ENUM_TYPE_UNKNOWN",number:0},{name:"OPEN",number:1},{name:"CLOSED",number:2}]},{name:"RepeatedFieldEncoding",value:[{name:"REPEATED_FIELD_ENCODING_UNKNOWN",number:0},{name:"PACKED",number:1},{name:"EXPANDED",number:2}]},{name:"Utf8Validation",value:[{name:"UTF8_VALIDATION_UNKNOWN",number:0},{name:"VERIFY",number:2},{name:"NONE",number:3}]},{name:"MessageEncoding",value:[{name:"MESSAGE_ENCODING_UNKNOWN",number:0},{name:"LENGTH_PREFIXED",number:1},{name:"DELIMITED",number:2}]},{name:"JsonFormat",value:[{name:"JSON_FORMAT_UNKNOWN",number:0},{name:"ALLOW",number:1},{name:"LEGACY_BEST_EFFORT",number:2}]},{name:"EnforceNamingStyle",value:[{name:"ENFORCE_NAMING_STYLE_UNKNOWN",number:0},{name:"STYLE2024",number:1},{name:"STYLE_LEGACY",number:2}]}],extensionRange:[{start:1e3,end:9995},{start:9995,end:1e4},{start:1e4,end:10001}]},{name:"FeatureSetDefaults",field:[{name:"defaults",number:1,type:11,label:3,typeName:".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},{name:"minimum_edition",number:4,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"maximum_edition",number:5,type:14,label:1,typeName:".google.protobuf.Edition"}],nestedType:[{name:"FeatureSetEditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"overridable_features",number:4,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"fixed_features",number:5,type:11,label:1,typeName:".google.protobuf.FeatureSet"}]}]},{name:"SourceCodeInfo",field:[{name:"location",number:1,type:11,label:3,typeName:".google.protobuf.SourceCodeInfo.Location"}],nestedType:[{name:"Location",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"span",number:2,type:5,label:3,options:{packed:!0}},{name:"leading_comments",number:3,type:9,label:1},{name:"trailing_comments",number:4,type:9,label:1},{name:"leading_detached_comments",number:6,type:9,label:3}]}],extensionRange:[{start:536e6,end:536000001}]},{name:"GeneratedCodeInfo",field:[{name:"annotation",number:1,type:11,label:3,typeName:".google.protobuf.GeneratedCodeInfo.Annotation"}],nestedType:[{name:"Annotation",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"source_file",number:2,type:9,label:1},{name:"begin",number:3,type:5,label:1},{name:"end",number:4,type:5,label:1},{name:"semantic",number:5,type:14,label:1,typeName:".google.protobuf.GeneratedCodeInfo.Annotation.Semantic"}],enumType:[{name:"Semantic",value:[{name:"NONE",number:0},{name:"SET",number:1},{name:"ALIAS",number:2}]}]}]}],enumType:[{name:"Edition",value:[{name:"EDITION_UNKNOWN",number:0},{name:"EDITION_LEGACY",number:900},{name:"EDITION_PROTO2",number:998},{name:"EDITION_PROTO3",number:999},{name:"EDITION_2023",number:1e3},{name:"EDITION_2024",number:1001},{name:"EDITION_1_TEST_ONLY",number:1},{name:"EDITION_2_TEST_ONLY",number:2},{name:"EDITION_99997_TEST_ONLY",number:99997},{name:"EDITION_99998_TEST_ONLY",number:99998},{name:"EDITION_99999_TEST_ONLY",number:99999},{name:"EDITION_MAX",number:2147483647}]}]}),es=pe(qa,1);var Zt;(function(e){e[e.DECLARATION=0]="DECLARATION",e[e.UNVERIFIED=1]="UNVERIFIED"})(Zt||(Zt={}));var Mt;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.GROUP=10]="GROUP",e[e.MESSAGE=11]="MESSAGE",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.ENUM=14]="ENUM",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(Mt||(Mt={}));var Wt;(function(e){e[e.OPTIONAL=1]="OPTIONAL",e[e.REPEATED=3]="REPEATED",e[e.REQUIRED=2]="REQUIRED"})(Wt||(Wt={}));var Pt;(function(e){e[e.SPEED=1]="SPEED",e[e.CODE_SIZE=2]="CODE_SIZE",e[e.LITE_RUNTIME=3]="LITE_RUNTIME"})(Pt||(Pt={}));var Jt;(function(e){e[e.STRING=0]="STRING",e[e.CORD=1]="CORD",e[e.STRING_PIECE=2]="STRING_PIECE"})(Jt||(Jt={}));var Xt;(function(e){e[e.JS_NORMAL=0]="JS_NORMAL",e[e.JS_STRING=1]="JS_STRING",e[e.JS_NUMBER=2]="JS_NUMBER"})(Xt||(Xt={}));var $t;(function(e){e[e.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",e[e.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",e[e.RETENTION_SOURCE=2]="RETENTION_SOURCE"})($t||($t={}));var jt;(function(e){e[e.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",e[e.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",e[e.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",e[e.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",e[e.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",e[e.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",e[e.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",e[e.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",e[e.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",e[e.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(jt||(jt={}));var zt;(function(e){e[e.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",e[e.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",e[e.IDEMPOTENT=2]="IDEMPOTENT"})(zt||(zt={}));var Ht;(function(e){e[e.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",e[e.EXPLICIT=1]="EXPLICIT",e[e.IMPLICIT=2]="IMPLICIT",e[e.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(Ht||(Ht={}));var Qt;(function(e){e[e.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED"})(Qt||(Qt={}));var qt;(function(e){e[e.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",e[e.PACKED=1]="PACKED",e[e.EXPANDED=2]="EXPANDED"})(qt||(qt={}));var en;(function(e){e[e.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",e[e.VERIFY=2]="VERIFY",e[e.NONE=3]="NONE"})(en||(en={}));var tn;(function(e){e[e.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",e[e.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",e[e.DELIMITED=2]="DELIMITED"})(tn||(tn={}));var nn;(function(e){e[e.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",e[e.ALLOW=1]="ALLOW",e[e.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(nn||(nn={}));var rn;(function(e){e[e.ENFORCE_NAMING_STYLE_UNKNOWN=0]="ENFORCE_NAMING_STYLE_UNKNOWN",e[e.STYLE2024=1]="STYLE2024",e[e.STYLE_LEGACY=2]="STYLE_LEGACY"})(rn||(rn={}));var an;(function(e){e[e.NONE=0]="NONE",e[e.SET=1]="SET",e[e.ALIAS=2]="ALIAS"})(an||(an={}));var sn;(function(e){e[e.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",e[e.EDITION_LEGACY=900]="EDITION_LEGACY",e[e.EDITION_PROTO2=998]="EDITION_PROTO2",e[e.EDITION_PROTO3=999]="EDITION_PROTO3",e[e.EDITION_2023=1e3]="EDITION_2023",e[e.EDITION_2024=1001]="EDITION_2024",e[e.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",e[e.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",e[e.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",e[e.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",e[e.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY",e[e.EDITION_MAX=2147483647]="EDITION_MAX"})(sn||(sn={}));const on={readUnknownFields:!0};function ts(e){return e?Object.assign(Object.assign({},on),e):on}function he(e,t,n){const r=V(e,void 0,!1);return ir(r,new st(t),ts(n),!1,t.byteLength),r.message}function ir(e,t,n,r,a){var s;const o=r?t.len:t.pos+a;let i,c;const l=(s=e.getUnknown())!==null&&s!==void 0?s:[];for(;t.pos<o&&([i,c]=t.tag(),!(r&&c==k.EndGroup));){const g=e.findNumber(i);if(!g){const E=t.skip(c,i);n.readUnknownFields&&l.push({no:i,wireType:c,data:E});continue}ur(e,t,g,c,n)}if(r&&(c!=k.EndGroup||i!==a))throw new Error("invalid end group tag");l.length>0&&e.setUnknown(l)}function ur(e,t,n,r,a){switch(n.fieldKind){case"scalar":e.set(n,ne(t,n.scalar));break;case"enum":e.set(n,ne(t,u.INT32));break;case"message":e.set(n,bt(t,a,n,e.get(n)));break;case"list":rs(t,r,e.get(n),a);break;case"map":ns(t,e.get(n),a);break}}function ns(e,t,n){const r=t.field();let a,s;const o=e.pos+e.uint32();for(;e.pos<o;){const[i]=e.tag();switch(i){case 1:a=ne(e,r.mapKey);break;case 2:switch(r.mapKind){case"scalar":s=ne(e,r.scalar);break;case"enum":s=e.int32();break;case"message":s=bt(e,n,r);break}break}}if(a===void 0&&(a=z(r.mapKey,!1)),s===void 0)switch(r.mapKind){case"scalar":s=z(r.scalar,!1);break;case"enum":s=r.enum.values[0].number;break;case"message":s=V(r.message,void 0,!1);break}t.set(a,s)}function rs(e,t,n,r){var a;const s=n.field();if(s.listKind==="message"){n.add(bt(e,r,s));return}const o=(a=s.scalar)!==null&&a!==void 0?a:u.INT32;if(!(t==k.LengthDelimited&&o!=u.STRING&&o!=u.BYTES)){n.add(ne(e,o));return}const c=e.uint32()+e.pos;for(;e.pos<c;)n.add(ne(e,o))}function bt(e,t,n,r){const a=n.delimitedEncoding,s=r??V(n.message,void 0,!1);return ir(s,e,t,a,a?n.number:e.uint32()),s}function ne(e,t){switch(t){case u.STRING:return e.string();case u.BOOL:return e.bool();case u.DOUBLE:return e.double();case u.FLOAT:return e.float();case u.INT32:return e.int32();case u.INT64:return e.int64();case u.UINT64:return e.uint64();case u.FIXED64:return e.fixed64();case u.BYTES:return e.bytes();case u.FIXED32:return e.fixed32();case u.SFIXED32:return e.sfixed32();case u.SFIXED64:return e.sfixed64();case u.SINT64:return e.sint64();case u.UINT32:return e.uint32();case u.SINT32:return e.sint32()}}function H(e,t){var n;const r=he(es,ft(e));return r.messageType.forEach(dt),r.dependency=(n=t?.map(s=>s.proto.name))!==null&&n!==void 0?n:[],tr(r,s=>t?.find(o=>o.proto.name===s)).getFile(r.name)}const cr=H("Chlnb29nbGUvcHJvdG9idWYvYW55LnByb3RvEg9nb29nbGUucHJvdG9idWYiJgoDQW55EhAKCHR5cGVfdXJsGAEgASgJEg0KBXZhbHVlGAIgASgMQnYKE2NvbS5nb29nbGUucHJvdG9idWZCCEFueVByb3RvUAFaLGdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2FueXBiogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),as=pe(cr,0),ss=3,un={writeUnknownFields:!0};function os(e){return e?Object.assign(Object.assign({},un),e):un}function lr(e,t,n){return _e(new Wn,os(n),V(e,t)).finish()}function _e(e,t,n){var r;for(const a of n.sortedFields){if(!n.isSet(a)){if(a.presence==ss)throw new Error(`cannot encode ${a} to binary: required field not set`);continue}fr(e,t,n,a)}if(t.writeUnknownFields)for(const{no:a,wireType:s,data:o}of(r=n.getUnknown())!==null&&r!==void 0?r:[])e.tag(a,s).raw(o);return e}function fr(e,t,n,r){var a;switch(r.fieldKind){case"scalar":case"enum":Re(e,n.desc.typeName,r.name,(a=r.scalar)!==null&&a!==void 0?a:u.INT32,r.number,n.get(r));break;case"list":is(e,t,r,n.get(r));break;case"message":dr(e,t,r,n.get(r));break;case"map":for(const[s,o]of n.get(r))us(e,t,r,s,o);break}}function Re(e,t,n,r,a,s){mr(e.tag(a,cs(r)),t,n,r,s)}function dr(e,t,n,r){n.delimitedEncoding?_e(e.tag(n.number,k.StartGroup),t,r).tag(n.number,k.EndGroup):_e(e.tag(n.number,k.LengthDelimited).fork(),t,r).join()}function is(e,t,n,r){var a;if(n.listKind=="message"){for(const o of r)dr(e,t,n,o);return}const s=(a=n.scalar)!==null&&a!==void 0?a:u.INT32;if(n.packed){if(!r.size)return;e.tag(n.number,k.LengthDelimited).fork();for(const o of r)mr(e,n.parent.typeName,n.name,s,o);e.join();return}for(const o of r)Re(e,n.parent.typeName,n.name,s,n.number,o)}function us(e,t,n,r,a){var s;switch(e.tag(n.number,k.LengthDelimited).fork(),Re(e,n.parent.typeName,n.name,n.mapKey,1,r),n.mapKind){case"scalar":case"enum":Re(e,n.parent.typeName,n.name,(s=n.scalar)!==null&&s!==void 0?s:u.INT32,2,a);break;case"message":_e(e.tag(2,k.LengthDelimited).fork(),t,a).join();break}e.join()}function mr(e,t,n,r,a){try{switch(r){case u.STRING:e.string(a);break;case u.BOOL:e.bool(a);break;case u.DOUBLE:e.double(a);break;case u.FLOAT:e.float(a);break;case u.INT32:e.int32(a);break;case u.INT64:e.int64(a);break;case u.UINT64:e.uint64(a);break;case u.FIXED64:e.fixed64(a);break;case u.BYTES:e.bytes(a);break;case u.FIXED32:e.fixed32(a);break;case u.SFIXED32:e.sfixed32(a);break;case u.SFIXED64:e.sfixed64(a);break;case u.SINT64:e.sint64(a);break;case u.UINT32:e.uint32(a);break;case u.SINT32:e.sint32(a);break}}catch(s){throw s instanceof Error?new Error(`cannot encode field ${t}.${n} to binary: ${s.message}`):s}}function cs(e){switch(e){case u.BYTES:case u.STRING:return k.LengthDelimited;case u.DOUBLE:case u.FIXED64:case u.SFIXED64:return k.Bit64;case u.FIXED32:case u.SFIXED32:case u.FLOAT:return k.Bit32;default:return k.Varint}}function ls(e,t,n){let r=!1;return n||(n=F(as),r=!0),n.value=lr(e,t),n.typeUrl=ms(t.$typeName),r?n:void 0}function fs(e,t){if(e.typeUrl==="")return!1;const n=typeof t=="string"?t:t.typeName,r=br(e.typeUrl);return n===r}function ds(e,t){if(e.typeUrl==="")return;const n=t.kind=="message"?t:t.getMessage(br(e.typeUrl));if(!(!n||!fs(e,n)))return he(n,e.value)}function ms(e){return`type.googleapis.com/${e}`}function br(e){const t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw new Error(`invalid type url: ${e}`);return n}const gt=H("Chxnb29nbGUvcHJvdG9idWYvc3RydWN0LnByb3RvEg9nb29nbGUucHJvdG9idWYihAEKBlN0cnVjdBIzCgZmaWVsZHMYASADKAsyIy5nb29nbGUucHJvdG9idWYuU3RydWN0LkZpZWxkc0VudHJ5GkUKC0ZpZWxkc0VudHJ5EgsKA2tleRgBIAEoCRIlCgV2YWx1ZRgCIAEoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZToCOAEi6gEKBVZhbHVlEjAKCm51bGxfdmFsdWUYASABKA4yGi5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlSAASFgoMbnVtYmVyX3ZhbHVlGAIgASgBSAASFgoMc3RyaW5nX3ZhbHVlGAMgASgJSAASFAoKYm9vbF92YWx1ZRgEIAEoCEgAEi8KDHN0cnVjdF92YWx1ZRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIABIwCgpsaXN0X3ZhbHVlGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZUgAQgYKBGtpbmQiMwoJTGlzdFZhbHVlEiYKBnZhbHVlcxgBIAMoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZSobCglOdWxsVmFsdWUSDgoKTlVMTF9WQUxVRRAAQn8KE2NvbS5nb29nbGUucHJvdG9idWZCC1N0cnVjdFByb3RvUAFaL2dvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3N0cnVjdHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),bs=pe(gt,0),gr=pe(gt,1),gs=pe(gt,2);var je;(function(e){e[e.NULL_VALUE=0]="NULL_VALUE"})(je||(je={}));function ps(e,t){pr(t,e);const n=ys(e.$unknown,t),[r,a,s]=Oe(t);for(const o of n)ur(r,new st(o.data),a,o.wireType,{readUnknownFields:!0});return s()}function hs(e,t,n){var r;pr(t,e);const a=((r=e.$unknown)!==null&&r!==void 0?r:[]).filter(l=>l.no!==t.number),[s,o]=Oe(t,n),i=new Wn;fr(i,{writeUnknownFields:!0},s,o);const c=new st(i.finish());for(;c.pos<c.len;){const[l,g]=c.tag(),E=c.skip(g,l);a.push({no:l,wireType:g,data:E})}e.$unknown=a}function ys(e,t){if(e===void 0)return[];if(t.fieldKind==="enum"||t.fieldKind==="scalar"){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.number)return[e[n]];return[]}return e.filter(n=>n.no===t.number)}function Oe(e,t){const n=e.typeName,r=Object.assign(Object.assign({},e),{kind:"field",parent:e.extendee,localName:n}),a=Object.assign(Object.assign({},e.extendee),{fields:[r],members:[r],oneofs:[]}),s=F(a,t!==void 0?{[n]:t}:void 0);return[V(a,s),r,()=>{const o=s[n];if(o===void 0){const i=e.message;return ge(i)?z(i.fields[0].scalar,i.fields[0].longAsString):F(i)}return o}]}function pr(e,t){if(e.extendee.typeName!=t.$typeName)throw new Error(`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}const Es=3,Ns=2,cn={alwaysEmitImplicit:!1,enumAsInteger:!1,useProtoFieldName:!1};function Is(e){return e?Object.assign(Object.assign({},cn),e):cn}function As(e,t,n){return ye(V(e,t),Is(n))}function Ss(e,t,n){var r;const a=As(e,t,n);return JSON.stringify(a,null,(r=n?.prettySpaces)!==null&&r!==void 0?r:0)}function ye(e,t){var n;const r=_s(e,t);if(r!==void 0)return r;const a={};for(const s of e.sortedFields){if(!e.isSet(s)){if(s.presence==Es)throw new Error(`cannot encode ${s} to JSON: required field not set`);if(!t.alwaysEmitImplicit||s.presence!==Ns)continue}const o=ln(s,e.get(s),t);o!==void 0&&(a[Ts(s,t)]=o)}if(t.registry){const s=new Set;for(const{no:o}of(n=e.getUnknown())!==null&&n!==void 0?n:[])if(!s.has(o)){s.add(o);const i=t.registry.getExtensionFor(e.desc,o);if(!i)continue;const c=ps(e.message,i),[l,g]=Oe(i,c),E=ln(g,l.get(g),t);E!==void 0&&(a[i.jsonName]=E)}}return a}function ln(e,t,n){switch(e.fieldKind){case"scalar":return Le(e,t);case"message":return ye(t,n);case"enum":return pt(e.enum,t,n.enumAsInteger);case"list":return ws(t,n);case"map":return vs(t,n)}}function vs(e,t){const n=e.field(),r={};switch(n.mapKind){case"scalar":for(const[a,s]of e)r[a]=Le(n,s);break;case"message":for(const[a,s]of e)r[a]=ye(s,t);break;case"enum":for(const[a,s]of e)r[a]=pt(n.enum,s,t.enumAsInteger);break}return t.alwaysEmitImplicit||e.size>0?r:void 0}function ws(e,t){const n=e.field(),r=[];switch(n.listKind){case"scalar":for(const a of e)r.push(Le(n,a));break;case"enum":for(const a of e)r.push(pt(n.enum,a,t.enumAsInteger));break;case"message":for(const a of e)r.push(ye(a,t));break}return t.alwaysEmitImplicit||r.length>0?r:void 0}function pt(e,t,n){var r;if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: expected number, got ${L(t)}`);if(e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const a=e.value[t];return(r=a?.name)!==null&&r!==void 0?r:t}function Le(e,t){var n,r,a,s,o,i;switch(e.scalar){case u.INT32:case u.SFIXED32:case u.SINT32:case u.FIXED32:case u.UINT32:if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: ${(n=$(e,t))===null||n===void 0?void 0:n.message}`);return t;case u.FLOAT:case u.DOUBLE:if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: ${(r=$(e,t))===null||r===void 0?void 0:r.message}`);return Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case u.STRING:if(typeof t!="string")throw new Error(`cannot encode ${e} to JSON: ${(a=$(e,t))===null||a===void 0?void 0:a.message}`);return t;case u.BOOL:if(typeof t!="boolean")throw new Error(`cannot encode ${e} to JSON: ${(s=$(e,t))===null||s===void 0?void 0:s.message}`);return t;case u.UINT64:case u.FIXED64:case u.INT64:case u.SFIXED64:case u.SINT64:if(typeof t!="bigint"&&typeof t!="string")throw new Error(`cannot encode ${e} to JSON: ${(o=$(e,t))===null||o===void 0?void 0:o.message}`);return t.toString();case u.BYTES:if(t instanceof Uint8Array)return Na(t);throw new Error(`cannot encode ${e} to JSON: ${(i=$(e,t))===null||i===void 0?void 0:i.message}`)}}function Ts(e,t){return t.useProtoFieldName?e.name:e.jsonName}function _s(e,t){if(e.desc.typeName.startsWith("google.protobuf."))switch(e.desc.typeName){case"google.protobuf.Any":return Rs(e.message,t);case"google.protobuf.Timestamp":return Ls(e.message);case"google.protobuf.Duration":return ks(e.message);case"google.protobuf.FieldMask":return Os(e.message);case"google.protobuf.Struct":return hr(e.message);case"google.protobuf.Value":return ht(e.message);case"google.protobuf.ListValue":return yr(e.message);default:if(ge(e.desc)){const n=e.desc.fields[0];return Le(n,e.get(n))}return}}function Rs(e,t){if(e.typeUrl==="")return{};const{registry:n}=t;let r,a;if(n&&(r=ds(e,n),r&&(a=n.getMessage(r.$typeName))),!a||!r)throw new Error(`cannot encode message ${e.$typeName} to JSON: "${e.typeUrl}" is not in the type registry`);let s=ye(V(a,r),t);return(a.typeName.startsWith("google.protobuf.")||s===null||Array.isArray(s)||typeof s!="object")&&(s={value:s}),s["@type"]=e.typeUrl,s}function ks(e){if(Number(e.seconds)>315576e6||Number(e.seconds)<-315576e6)throw new Error(`cannot encode message ${e.$typeName} to JSON: value out of range`);let t=e.seconds.toString();if(e.nanos!==0){let n=Math.abs(e.nanos).toString();n="0".repeat(9-n.length)+n,n.substring(3)==="000000"?n=n.substring(0,3):n.substring(6)==="000"&&(n=n.substring(0,6)),t+="."+n,e.nanos<0&&Number(e.seconds)==0&&(t="-"+t)}return t+"s"}function Os(e){return e.paths.map(t=>{if(t.match(/_[0-9]?_/g)||t.match(/[A-Z]/g))throw new Error(`cannot encode message ${e.$typeName} to JSON: lowerCamelCase of path name "`+t+'" is irreversible');return fe(t)}).join(",")}function hr(e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=ht(r);return t}function ht(e){switch(e.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(e.kind.value))throw new Error(`${e.$typeName} cannot be NaN or Infinity`);return e.kind.value;case"boolValue":return e.kind.value;case"stringValue":return e.kind.value;case"structValue":return hr(e.kind.value);case"listValue":return yr(e.kind.value);default:throw new Error(`${e.$typeName} must have a value`)}}function yr(e){return e.values.map(ht)}function Ls(e){const t=Number(e.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot encode message ${e.$typeName} to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);if(e.nanos<0)throw new Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be negative`);let n="Z";if(e.nanos>0){const r=(e.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?n="."+r.substring(0,3)+"Z":r.substring(6)==="000"?n="."+r.substring(0,6)+"Z":n="."+r+"Z"}return new Date(t).toISOString().replace(".000Z",n)}const fn={ignoreUnknownFields:!1};function Us(e){return e?Object.assign(Object.assign({},fn),e):fn}function Bs(e,t,n){return Cs(e,xs(t,e.typeName),n)}function Cs(e,t,n){const r=V(e);try{re(r,t,Us(n))}catch(a){throw ma(a)?new Error(`cannot decode ${a.field()} from JSON: ${a.message}`,{cause:a}):a}return r.message}function re(e,t,n){var r;if(Zs(e,t,n))return;if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode ${e.desc} from JSON: ${L(t)}`);const a=new Map,s=new Map;for(const o of e.desc.fields)s.set(o.name,o).set(o.jsonName,o);for(const[o,i]of Object.entries(t)){const c=s.get(o);if(c){if(c.oneof){if(i===null&&c.fieldKind=="scalar")continue;const l=a.get(c.oneof);if(l!==void 0)throw new B(c.oneof,`oneof set multiple times by ${l.name} and ${c.name}`);a.set(c.oneof,c)}dn(e,c,i,n)}else{let l;if(o.startsWith("[")&&o.endsWith("]")&&(l=(r=n.registry)===null||r===void 0?void 0:r.getExtension(o.substring(1,o.length-1)))&&l.extendee.typeName===e.desc.typeName){const[g,E,S]=Oe(l);dn(g,E,i,n),hs(e.message,l,S())}if(!l&&!n.ignoreUnknownFields)throw new Error(`cannot decode ${e.desc} from JSON: key "${o}" is unknown`)}}}function dn(e,t,n,r){switch(t.fieldKind){case"scalar":Fs(e,t,n);break;case"enum":Ds(e,t,n,r);break;case"message":Ys(e,t,n,r);break;case"list":Gs(e.get(t),n,r);break;case"map":Vs(e.get(t),n,r);break}}function Vs(e,t,n){if(t===null)return;const r=e.field();if(typeof t!="object"||Array.isArray(t))throw new B(r,"expected object, got "+L(t));for(const[a,s]of Object.entries(t)){if(s===null)throw new B(r,"map value must not be null");let o;switch(r.mapKind){case"message":const c=V(r.message);re(c,s,n),o=c;break;case"enum":if(o=yt(r.enum,s,n.ignoreUnknownFields,!0),o===Ue)return;break;case"scalar":o=Ce(r,s,!0);break}const i=Ks(r.mapKey,a);e.set(i,o)}}function Gs(e,t,n){if(t===null)return;const r=e.field();if(!Array.isArray(t))throw new B(r,"expected Array, got "+L(t));for(const a of t){if(a===null)throw new B(r,"list item must not be null");switch(r.listKind){case"message":const s=V(r.message);re(s,a,n),e.add(s);break;case"enum":const o=yt(r.enum,a,n.ignoreUnknownFields,!0);o!==Ue&&e.add(o);break;case"scalar":e.add(Ce(r,a,!0));break}}}function Ys(e,t,n,r){if(n===null&&t.message.typeName!="google.protobuf.Value"){e.clear(t);return}const a=e.isSet(t)?e.get(t):V(t.message);re(a,n,r),e.set(t,a)}function Ds(e,t,n,r){const a=yt(t.enum,n,r.ignoreUnknownFields,!1);a===Be?e.clear(t):a!==Ue&&e.set(t,a)}function Fs(e,t,n){const r=Ce(t,n,!1);r===Be?e.clear(t):e.set(t,r)}const Ue=Symbol();function yt(e,t,n,r){if(t===null)return e.typeName=="google.protobuf.NullValue"?0:r?e.values[0].number:Be;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const a=e.values.find(s=>s.name===t);if(a!==void 0)return a.number;if(n)return Ue;break}throw new Error(`cannot decode ${e} from JSON: ${L(t)}`)}const Be=Symbol();function Ce(e,t,n){if(t===null)return n?z(e.scalar,!1):Be;switch(e.scalar){case u.DOUBLE:case u.FLOAT:if(t==="NaN")return NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(typeof t=="number"){if(Number.isNaN(t))throw new B(e,"unexpected NaN number");if(!Number.isFinite(t))throw new B(e,"unexpected infinite number");break}if(typeof t=="string"){if(t===""||t.trim().length!==t.length)break;const r=Number(t);if(!Number.isFinite(r))break;return r}break;case u.INT32:case u.FIXED32:case u.SFIXED32:case u.SINT32:case u.UINT32:return Er(t);case u.BYTES:if(typeof t=="string"){if(t==="")return new Uint8Array(0);try{return ft(t)}catch(r){const a=r instanceof Error?r.message:String(r);throw new B(e,a)}}break}return t}function Ks(e,t){switch(e){case u.BOOL:switch(t){case"true":return!0;case"false":return!1}return t;case u.INT32:case u.FIXED32:case u.UINT32:case u.SFIXED32:case u.SINT32:return Er(t);default:return t}}function Er(e){if(typeof e=="string"){if(e===""||e.trim().length!==e.length)return e;const t=Number(e);return Number.isNaN(t)?e:t}return e}function xs(e,t){try{return JSON.parse(e)}catch(n){const r=n instanceof Error?n.message:String(n);throw new Error(`cannot decode message ${t} from JSON: ${r}`,{cause:n})}}function Zs(e,t,n){if(!e.desc.typeName.startsWith("google.protobuf."))return!1;switch(e.desc.typeName){case"google.protobuf.Any":return Ms(e.message,t,n),!0;case"google.protobuf.Timestamp":return Ws(e.message,t),!0;case"google.protobuf.Duration":return Ps(e.message,t),!0;case"google.protobuf.FieldMask":return Js(e.message,t),!0;case"google.protobuf.Struct":return Nr(e.message,t),!0;case"google.protobuf.Value":return Et(e.message,t),!0;case"google.protobuf.ListValue":return Ir(e.message,t),!0;default:if(ge(e.desc)){const r=e.desc.fields[0];return t===null?e.clear(r):e.set(r,Ce(r,t,!0)),!0}return!1}}function Ms(e,t,n){var r;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${e.$typeName} from JSON: expected object but got ${L(t)}`);if(Object.keys(t).length==0)return;const a=t["@type"];if(typeof a!="string"||a=="")throw new Error(`cannot decode message ${e.$typeName} from JSON: "@type" is empty`);const s=a.includes("/")?a.substring(a.lastIndexOf("/")+1):a;if(!s.length)throw new Error(`cannot decode message ${e.$typeName} from JSON: "@type" is invalid`);const o=(r=n.registry)===null||r===void 0?void 0:r.getMessage(s);if(!o)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${a} is not in the type registry`);const i=V(o);if(s.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value")){const c=t.value;re(i,c,n)}else{const c=Object.assign({},t);delete c["@type"],re(i,c,n)}ls(i.desc,i.message,e)}function Ws(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);const n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]{1,9}))?(?:Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);const r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw new Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot decode message ${e.$typeName} from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);e.seconds=R.parse(r/1e3),e.nanos=0,n[7]&&(e.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9)}function Ps(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);const n=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);const r=Number(n[1]);if(r>315576e6||r<-315576e6)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);if(e.seconds=R.parse(r),typeof n[2]!="string")return;const a=n[2]+"0".repeat(9-n[2].length);e.nanos=parseInt(a),(r<0||Object.is(r,-0))&&(e.nanos=-e.nanos)}function Js(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${L(t)}`);if(t==="")return;function n(r){if(r.includes("_"))throw new Error(`cannot decode message ${e.$typeName} from JSON: path names must be lowerCamelCase`);const a=r.replace(/[A-Z]/g,s=>"_"+s.toLowerCase());return a[0]==="_"?a.substring(1):a}e.paths=t.split(",").map(n)}function Nr(e,t){if(typeof t!="object"||t==null||Array.isArray(t))throw new Error(`cannot decode message ${e.$typeName} from JSON ${L(t)}`);for(const[n,r]of Object.entries(t)){const a=F(gr);Et(a,r),e.fields[n]=a}}function Et(e,t){switch(typeof t){case"number":e.kind={case:"numberValue",value:t};break;case"string":e.kind={case:"stringValue",value:t};break;case"boolean":e.kind={case:"boolValue",value:t};break;case"object":if(t===null)e.kind={case:"nullValue",value:je.NULL_VALUE};else if(Array.isArray(t)){const n=F(gs);Ir(n,t),e.kind={case:"listValue",value:n}}else{const n=F(bs);Nr(n,t),e.kind={case:"structValue",value:n}}break;default:throw new Error(`cannot decode message ${e.$typeName} from JSON ${L(t)}`)}return e}function Ir(e,t){if(!Array.isArray(t))throw new Error(`cannot decode message ${e.$typeName} from JSON ${L(t)}`);for(const n of t){const r=F(gr);Et(r,n),e.values.push(r)}}function mn(e){const t=A[e];return typeof t!="string"?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}class T extends Error{constructor(t,n=A.Unknown,r,a,s){super(Xs(t,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=n,this.metadata=new Headers(r??{}),this.details=a??[],this.cause=s}static from(t,n=A.Unknown){return t instanceof T?t:t instanceof Error?t.name=="AbortError"?new T(t.message,A.Canceled):new T(t.message,n,void 0,void 0,t):new T(String(t),n,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===T.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const n=t.kind==="message"?{getMessage:a=>a===t.typeName?t:void 0}:t,r=[];for(const a of this.details){if("desc"in a){n.getMessage(a.desc.typeName)&&r.push(F(a.desc,a.value));continue}const s=n.getMessage(a.type);if(s)try{r.push(he(s,a.value))}catch{}}return r}}function Xs(e,t){return e.length?`[${mn(t)}] ${e}`:`[${mn(t)}]`}function $s(e,t,n){try{const r=ft(e);return t?he(t,r,n):r}catch(r){throw T.from(r,A.DataLoss)}}function js(e,t){const n={};for(const r of e.methods){const a=t(r);a!=null&&(n[r.localName]=a)}return n}const bn=1;function gn(e){let t,n=new Uint8Array(0);function r(a){const s=new Uint8Array(n.length+a.length);s.set(n),s.set(a,n.length),n=s}return new ReadableStream({start(){t=e.getReader()},async pull(a){let s;for(;;){if(s===void 0&&n.byteLength>=5){let c=0;for(let l=1;l<5;l++)c=(c<<8)+n[l];s={flags:n[0],length:c}}if(s!==void 0&&n.byteLength>=s.length+5)break;const i=await t.read();if(i.done)break;r(i.value)}if(s===void 0){if(n.byteLength==0){a.close();return}a.error(new T("premature end of stream",A.DataLoss));return}const o=n.subarray(5,5+s.length);n=n.subarray(5+s.length),a.enqueue({flags:s.flags,data:o})}})}function pn(e,t){const n=new Uint8Array(t.length+5);n.set(t,5);const r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.setUint8(0,e),r.setUint32(1,t.length),n}var zs=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(i,c){o=e[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(l){s({value:l,done:i})},o)}},be=function(e){return this instanceof be?(this.v=e,this):new be(e)},Hs=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(f){return function(p){return Promise.resolve(p).then(f,E)}}function i(f,p){r[f]&&(a[f]=function(N){return new Promise(function(_,O){s.push([f,N,_,O])>1||c(f,N)})},p&&(a[f]=p(a[f])))}function c(f,p){try{l(r[f](p))}catch(N){S(s[0][3],N)}}function l(f){f.value instanceof be?Promise.resolve(f.value.v).then(g,E):S(s[0][2],f)}function g(f){c("next",f)}function E(f){c("throw",f)}function S(f,p){f(p),s.shift(),s.length&&c(s[0][0],s[0][1])}},Qs=function(e){var t,n;return t={},r("next"),r("throw",function(a){throw a}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(a,s){t[a]=e[a]?function(o){return(n=!n)?{value:be(e[a](o)),done:!1}:s?s(o):o}:s}};function qs(e){return Hs(this,arguments,function*(){yield be(yield*Qs(zs(e)))})}var Ar=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(i,c){o=e[s](o),a(i,c,o.done,o.value)})}}function a(s,o,i,c){Promise.resolve(c).then(function(l){s({value:l,done:i})},o)}},ae=function(e){return this instanceof ae?(this.v=e,this):new ae(e)},eo=function(e){var t,n;return t={},r("next"),r("throw",function(a){throw a}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(a,s){t[a]=e[a]?function(o){return(n=!n)?{value:ae(e[a](o)),done:!1}:s?s(o):o}:s}},to=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(f){return function(p){return Promise.resolve(p).then(f,E)}}function i(f,p){r[f]&&(a[f]=function(N){return new Promise(function(_,O){s.push([f,N,_,O])>1||c(f,N)})},p&&(a[f]=p(a[f])))}function c(f,p){try{l(r[f](p))}catch(N){S(s[0][3],N)}}function l(f){f.value instanceof ae?Promise.resolve(f.value.v).then(g,E):S(s[0][2],f)}function g(f){c("next",f)}function E(f){c("throw",f)}function S(f,p){f(p),s.shift(),s.length&&c(s[0][0],s[0][1])}};function no(e,t){return js(e,n=>{switch(n.methodKind){case"unary":return ro(t,n);case"server_streaming":return ao(t,n);case"client_streaming":return so(t,n);case"bidi_streaming":return oo(t,n);default:return null}})}function ro(e,t){return async function(n,r){var a,s;const o=await e.unary(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues);return(a=r?.onHeader)===null||a===void 0||a.call(r,o.header),(s=r?.onTrailer)===null||s===void 0||s.call(r,o.trailer),o.message}}function ao(e,t){return function(n,r){return Sr(e.stream(t,r?.signal,r?.timeoutMs,r?.headers,qs([n]),r?.contextValues),r)}}function so(e,t){return async function(n,r){var a,s,o,i,c,l;const g=await e.stream(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues);(c=r?.onHeader)===null||c===void 0||c.call(r,g.header);let E,S=0;try{for(var f=!0,p=Ar(g.message),N;N=await p.next(),a=N.done,!a;f=!0)i=N.value,f=!1,E=i,S++}catch(_){s={error:_}}finally{try{!f&&!a&&(o=p.return)&&await o.call(p)}finally{if(s)throw s.error}}if(!E)throw new T("protocol error: missing response message",A.Unimplemented);if(S>1)throw new T("protocol error: received extra messages for client streaming method",A.Unimplemented);return(l=r?.onTrailer)===null||l===void 0||l.call(r,g.trailer),E}}function oo(e,t){return function(n,r){return Sr(e.stream(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues),r)}}function Sr(e,t){const n=function(){return to(this,arguments,function*(){var r,a;const s=yield ae(e);(r=t?.onHeader)===null||r===void 0||r.call(t,s.header),yield ae(yield*eo(Ar(s.message))),(a=t?.onTrailer)===null||a===void 0||a.call(t,s.trailer)})}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function io(...e){const t=new AbortController,n=e.filter(a=>a!==void 0).concat(t.signal);for(const a of n){if(a.aborted){r.apply(a);break}a.addEventListener("abort",r)}function r(){t.signal.aborted||t.abort(vr(this));for(const a of n)a.removeEventListener("abort",r)}return t}function uo(e){const t=new AbortController,n=()=>{t.abort(new T("the operation timed out",A.DeadlineExceeded))};let r;return e!==void 0&&(e<=0?n():r=setTimeout(n,e)),{signal:t.signal,cleanup:()=>clearTimeout(r)}}function vr(e){if(!e.aborted)return;if(e.reason!==void 0)return e.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function hn(){return{get(e){return e.id in this?this[e.id]:e.defaultValue},set(e,t){return this[e.id]=t,this},delete(e){return delete this[e.id],this}}}const Me=128;function yn(e){const t=new Headers,n=new TextDecoder().decode(e).split(`\r
`);for(const r of n){if(r==="")continue;const a=r.indexOf(":");if(a>0){const s=r.substring(0,a).trim(),o=r.substring(a+1).trim();t.append(s,o)}}return t}const co="Content-Type",lo="Grpc-Timeout",se="Grpc-Status",wr="Grpc-Message",fo="Grpc-Status-Details-Bin",En="User-Agent",We="X-User-Agent",mo="X-Grpc-Web",bo="application/grpc-web+proto",go="application/grpc-web+json";function po(e,t,...n){return n.reduce((r,a)=>r.nestedMessages[a],e.messages[t])}function ho(e,t,...n){if(n.length>0)throw new Error;return e.services[t]}const yo=H("CgxzdGF0dXMucHJvdG8SCmdvb2dsZS5ycGMiTgoGU3RhdHVzEgwKBGNvZGUYASABKAUSDwoHbWVzc2FnZRgCIAEoCRIlCgdkZXRhaWxzGAMgAygLMhQuZ29vZ2xlLnByb3RvYnVmLkFueUJeCg5jb20uZ29vZ2xlLnJwY0ILU3RhdHVzUHJvdG9QAVo3Z29vZ2xlLmdvbGFuZy5vcmcvZ2VucHJvdG8vZ29vZ2xlYXBpcy9ycGMvc3RhdHVzO3N0YXR1c6ICA1JQQ2IGcHJvdG8z",[cr]),Eo=po(yo,0),No="0";function Tr(e){var t;const n=e.get(fo);if(n!=null){const a=$s(n,Eo);if(a.code==0)return;const s=new T(a.message,a.code,e);return s.details=a.details.map(o=>({type:o.typeUrl.substring(o.typeUrl.lastIndexOf("/")+1),value:o.value})),s}const r=e.get(se);if(r!=null){if(r===No)return;const a=parseInt(r,10);return a in A?new T(decodeURIComponent((t=e.get(wr))!==null&&t!==void 0?t:""),a,e):new T(`invalid grpc-status: ${r}`,A.Internal,e)}}function Nn(e,t){return e.toString().replace(/\/?$/,`/${t.parent.typeName}/${t.name}`)}function _r(e,t){return F(e,t)}function Io(e,t){function n(r){return r.done===!0?r:{done:r.done,value:_r(e,r.value)}}return{[Symbol.asyncIterator](){const r=t[Symbol.asyncIterator](),a={next:()=>r.next().then(n)};return r.throw!==void 0&&(a.throw=s=>r.throw(s).then(n)),r.return!==void 0&&(a.return=s=>r.return(s).then(n)),a}}}function Rr(e,t){var n;return(n=t?.concat().reverse().reduce((r,a)=>a(r),e))!==null&&n!==void 0?n:e}function Ao(e){var t;const n=Object.assign({},e);return(t=n.ignoreUnknownFields)!==null&&t!==void 0||(n.ignoreUnknownFields=!0),n}function In(e,t,n,r){const a=t?An(e.input,r):Sn(e.input,n);return{parse:(t?An(e.output,r):Sn(e.output,n)).parse,serialize:a.serialize}}function An(e,t){return{parse(n){try{return he(e,n,t)}catch(r){const a=r instanceof Error?r.message:String(r);throw new T(`parse binary: ${a}`,A.Internal)}},serialize(n){try{return lr(e,n,t)}catch(r){const a=r instanceof Error?r.message:String(r);throw new T(`serialize binary: ${a}`,A.Internal)}}}}function Sn(e,t){var n,r;const a=(n=t?.textEncoder)!==null&&n!==void 0?n:new TextEncoder,s=(r=t?.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=Ao(t);return{parse(i){try{const c=s.decode(i);return Bs(e,c,o)}catch(c){throw T.from(c,A.InvalidArgument)}},serialize(i){try{const c=Ss(e,i,o);return a.encode(c)}catch(c){throw T.from(c,A.Internal)}}}}function So(e){const t=Rr(e.next,e.interceptors),[n,r,a]=kr(e),s=Object.assign(Object.assign({},e.req),{message:_r(e.req.method.input,e.req.message),signal:n});return t(s).then(o=>(a(),o),r)}function vo(e){const t=Rr(e.next,e.interceptors),[n,r,a]=kr(e),s=Object.assign(Object.assign({},e.req),{message:Io(e.req.method.input,e.req.message),signal:n});let o=!1;return n.addEventListener("abort",function(){var i,c;const l=e.req.message[Symbol.asyncIterator]();o||(i=l.throw)===null||i===void 0||i.call(l,this.reason).catch(()=>{}),(c=l.return)===null||c===void 0||c.call(l).catch(()=>{})}),t(s).then(i=>Object.assign(Object.assign({},i),{message:{[Symbol.asyncIterator](){const c=i.message[Symbol.asyncIterator]();return{next(){return c.next().then(l=>(l.done==!0&&(o=!0,a()),l),r)}}}}}),r)}function kr(e){const{signal:t,cleanup:n}=uo(e.timeoutMs),r=io(e.signal,t);return[r.signal,function(s){const o=T.from(t.aborted?vr(t):s);return r.abort(o),n(),Promise.reject(o)},function(){n(),r.abort()}]}function wo(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}function vn(e,t){const n=Tr(e);if(n)throw t.forEach((r,a)=>{n.metadata.append(a,r)}),n;if(!t.has(se)&&!e.has(se))throw new T("protocol error: missing status",A.Internal)}function wn(e,t,n,r){const a=new Headers(n??{});a.set(co,e?bo:go),a.set(mo,"1");let s="connect-es/2.0.2";return s=a.has(En)?a.get(En):a.has(We)?a.get(We):s,a.set(We,s),t!==void 0&&a.set(lo,`${t}m`),a}function To(e){switch(e){case 400:return A.Internal;case 401:return A.Unauthenticated;case 403:return A.PermissionDenied;case 404:return A.Unimplemented;case 429:return A.Unavailable;case 502:return A.Unavailable;case 503:return A.Unavailable;case 504:return A.Unavailable;default:return A.Unknown}}function Tn(e,t){var n;if(e>=200&&e<300)return{foundStatus:t.has(se),headerError:Tr(t)};throw new T(decodeURIComponent((n=t.get(wr))!==null&&n!==void 0?n:`HTTP ${e}`),To(e),t)}var j=function(e){return this instanceof j?(this.v=e,this):new j(e)},_o=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(f){return function(p){return Promise.resolve(p).then(f,E)}}function i(f,p){r[f]&&(a[f]=function(N){return new Promise(function(_,O){s.push([f,N,_,O])>1||c(f,N)})},p&&(a[f]=p(a[f])))}function c(f,p){try{l(r[f](p))}catch(N){S(s[0][3],N)}}function l(f){f.value instanceof j?Promise.resolve(f.value.v).then(g,E):S(s[0][2],f)}function g(f){c("next",f)}function E(f){c("throw",f)}function S(f,p){f(p),s.shift(),s.length&&c(s[0][0],s[0][1])}};const _n={redirect:"error"};function Ro(e){var t;wo();const n=(t=e.useBinaryFormat)!==null&&t!==void 0?t:!0;return{async unary(r,a,s,o,i,c){const{serialize:l,parse:g}=In(r,n,e.jsonOptions,e.binaryOptions);return s=s===void 0?e.defaultTimeoutMs:s<=0?void 0:s,await So({interceptors:e.interceptors,signal:a,timeoutMs:s,req:{stream:!1,service:r.parent,method:r,requestMethod:"POST",url:Nn(e.baseUrl,r),header:wn(n,s,o),contextValues:c??hn(),message:i},next:async E=>{var S;const p=await((S=e.fetch)!==null&&S!==void 0?S:globalThis.fetch)(E.url,Object.assign(Object.assign({},_n),{method:E.requestMethod,headers:E.header,signal:E.signal,body:pn(0,l(E.message))})),{headerError:N}=Tn(p.status,p.headers);if(!p.body)throw N!==void 0?N:"missing response body";const _=gn(p.body).getReader();let O,K;for(;;){const G=await _.read();if(G.done)break;const{flags:m,data:d}=G.value;if((m&bn)===bn)throw new T("protocol error: received unsupported compressed output",A.Internal);if(m===Me){if(O!==void 0)throw"extra trailer";O=yn(d);continue}if(K!==void 0)throw new T("extra message",A.Unimplemented);K=g(d)}if(O===void 0)throw N!==void 0?N:new T("missing trailer",p.headers.has(se)?A.Unimplemented:A.Unknown);if(vn(O,p.headers),K===void 0)throw new T("missing message",O.has(se)?A.Unimplemented:A.Unknown);return{stream:!1,service:r.parent,method:r,header:p.headers,message:K,trailer:O}}})},async stream(r,a,s,o,i,c){const{serialize:l,parse:g}=In(r,n,e.jsonOptions,e.binaryOptions);function E(f,p,N,_,O){return _o(this,arguments,function*(){const G=gn(f).getReader();if(p){if(!(yield j(G.read())).done)throw"extra data for trailers-only";return yield j(void 0)}let m=!1;for(;;){const d=yield j(G.read());if(d.done)break;const{flags:b,data:h}=d.value;if((b&Me)===Me){if(m)throw"extra trailer";m=!0;const y=yn(h);vn(y,_),y.forEach((w,I)=>N.set(I,w));continue}if(m)throw"extra message";yield yield j(g(h))}if("throwIfAborted"in O&&O.throwIfAborted(),!m)throw"missing trailer"})}async function S(f){if(r.methodKind!="server_streaming")throw"The fetch API does not support streaming request bodies";const p=await f[Symbol.asyncIterator]().next();if(p.done==!0)throw"missing request message";return pn(0,l(p.value))}return s=s===void 0?e.defaultTimeoutMs:s<=0?void 0:s,vo({interceptors:e.interceptors,signal:a,timeoutMs:s,req:{stream:!0,service:r.parent,method:r,requestMethod:"POST",url:Nn(e.baseUrl,r),header:wn(n,s,o),contextValues:c??hn(),message:i},next:async f=>{var p;const _=await((p=e.fetch)!==null&&p!==void 0?p:globalThis.fetch)(f.url,Object.assign(Object.assign({},_n),{method:f.requestMethod,headers:f.header,signal:f.signal,body:await S(f.message)})),{foundStatus:O,headerError:K}=Tn(_.status,_.headers);if(K!=null)throw K;if(!_.body)throw"missing response body";const G=new Headers;return Object.assign(Object.assign({},f),{header:_.headers,trailer:G,message:E(_.body,O,G,_.headers,f.signal)})}})}}}const ko=H("CgxvcmRlcnMucHJvdG8SBm9yZGVycyILCglQb3NpdGlvbnMiKQoMRGVsZXRlT3JkZXJzEgwKBG1pbnQYASABKAkSCwoDaWRzGAIgAygDIkEKGFBsYWNlTGltaXRPcmRlcnNSZXNwb25jZRIYChB0b2tlbl9vcmRlcnNfbnVtGAEgASgNEgsKA2lkcxgCIAMoAyJCChBUb2tlbkxpbWl0T3JkZXJzEgwKBG1pbnQYASABKAkSIAoGb3JkZXJzGAIgAygLMhAub3JkZXJzLkFwaU9yZGVyIsMBCghBcGlPcmRlchIPCgJpZBgBIAEoA0gAiAEBEhQKDHNsaXBwYWdlX2JwcxgCIAEoDRILCgN0aXAYAyABKAQSHgoGdGFyZ2V0GAQgASgLMg4ub3JkZXJzLlRhcmdldBIaCgRzaWRlGAUgASgOMgwub3JkZXJzLlNpZGUSHgoGYW1vdW50GAYgASgLMg4ub3JkZXJzLkFtb3VudBIgCgd0cmlnZ2VyGAcgASgOMg8ub3JkZXJzLlRyaWdnZXJCBQoDX2lkIrgBCgZUYXJnZXQSJAoFcHJpY2UYASABKAsyEy5vcmRlcnMuVGFyZ2V0UHJpY2VIABImCgZwcm9maXQYAiABKAsyFC5vcmRlcnMuVGFyZ2V0UHJvZml0SAASLwoLbW92aW5nX3BlcmMYAyABKAsyGC5vcmRlcnMuVGFyZ2V0TW92aW5nUGVyY0gAEiAKBm1hcmtldBgEIAEoCzIOLm9yZGVycy5NYXJrZXRIAEINCgt0YXJnZXRfdHlwZSJCCgtUYXJnZXRQcmljZRINCgVwcmljZRgBIAEoAhIkCglkaXJlY3Rpb24YAiABKA4yES5vcmRlcnMuRGlyZWN0aW9uIkkKDFRhcmdldFByb2ZpdBITCgtwcm9maXRfcGVyYxgBIAEoAhIkCglkaXJlY3Rpb24YAiABKA4yES5vcmRlcnMuRGlyZWN0aW9uInIKEFRhcmdldE1vdmluZ1BlcmMSEgoKcHJpY2VfcGVyYxgBIAEoAhIWCglsb2NhbF9hdGgYAiABKAJIAIgBARIkCglkaXJlY3Rpb24YAyABKA4yES5vcmRlcnMuRGlyZWN0aW9uQgwKCl9sb2NhbF9hdGgiCAoGTWFya2V0IjwKBkFtb3VudBISCghwZXJjX2JwcxgBIAEoDUgAEg8KBWZpeGVkGAIgASgESABCDQoLYW1vdW50X3R5cGUqJwoHVHJpZ2dlchINCglJTU1FRElBVEUQABINCglNSUdSQVRJT04QASoZCgRTaWRlEgcKA0JVWRAAEggKBFNFTEwQASohCglEaXJlY3Rpb24SCQoFQUJPVkUQABIJCgVCRUxPVxABYgZwcm90bzM");var Or=(e=>(e[e.IMMEDIATE=0]="IMMEDIATE",e[e.MIGRATION=1]="MIGRATION",e))(Or||{}),Lr=(e=>(e[e.BUY=0]="BUY",e[e.SELL=1]="SELL",e))(Lr||{}),Ur=(e=>(e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW",e))(Ur||{});const Br=H("Cgxjb21tb24ucHJvdG8SBmNvbW1vbiIxCg1Ub2tlbkxhbXBvcnRzEg4KBmFtb3VudBgBIAEoBBIQCghkZWNpbWFscxgCIAEoDSIYCgdEZWNpbWFsEg0KBXZhbHVlGAEgASgJIhwKDFRva2VuQWRkcmVzcxIMCgRtaW50GAEgASgJIiIKDVVuaXhUaW1lc3RhbXASEQoJdGltZXN0YW1wGAEgASgDKh4KCVF1b3RlS2luZBIHCgNTT0wQABIICgRVU0RDEAFiBnByb3RvMw"),Oo=H("Cgt0eG5jYi5wcm90bxIFdHhuY2IigwEKDkxhbmRlZFR4blN0YXRlEh8KBmZhaWxlZBgBIAEoCzINLnR4bmNiLkZhaWxlZEgAEiUKCWNvbmZpcm1lZBgCIAEoCzIQLnR4bmNiLkNvbmZpcm1lZEgAEhsKBGxvc3QYAyABKAsyCy50eG5jYi5Mb3N0SABCDAoKc3RhdGVfdHlwZSI+CgRMb3N0EhIKCnNpZ25hdHVyZXMYASADKAkSFQoIb3JkZXJfaWQYAiABKANIAIgBAUILCglfb3JkZXJfaWQiiQEKBkZhaWxlZBIRCglzbG90X2RpZmYYASABKAUSHAoEdGlwcxgCIAEoCzIOLnR4bmNiLlR4blRpcHMSCgoCY3UYAyABKA0SCwoDZXJyGAQgASgJEhEKCXNpZ25hdHVyZRgFIAEoCRIVCghvcmRlcl9pZBgGIAEoA0gAiAEBQgsKCV9vcmRlcl9pZCKjAQoJQ29uZmlybWVkEhEKCXNsb3RfZGlmZhgBIAEoBRIiCgZ0cmFkZXMYAiADKAsyEi50eG5jYi5QYXJzZWRUcmFkZRIcCgR0aXBzGAMgASgLMg4udHhuY2IuVHhuVGlwcxIKCgJjdRgEIAEoDRIRCglzaWduYXR1cmUYBSABKAkSFQoIb3JkZXJfaWQYBiABKANIAIgBAUILCglfb3JkZXJfaWQiUwoLUGFyc2VkVHJhZGUSGQoDYnV5GAEgASgLMgoudHhuY2IuQnV5SAASGwoEc2VsbBgCIAEoCzILLnR4bmNiLlNlbGxIAEIMCgp0cmFkZV90eXBlIrsBCgNCdXkSDAoEbWludBgBIAEoCRIOCgZ0aWNrZXIYAiABKAkSIwoEYmFzZRgDIAEoCzIVLmNvbW1vbi5Ub2tlbkxhbXBvcnRzEg0KBXF1b3RlGAQgASgEEhsKAm1jGAUgASgLMg8uY29tbW9uLkRlY2ltYWwSHgoFcHJpY2UYBiABKAsyDy5jb21tb24uRGVjaW1hbBIlCgpxb3V0ZV9raW5kGAcgASgOMhEuY29tbW9uLlF1b3RlS2luZCK1AQoEU2VsbBIMCgRtaW50GAEgASgJEg4KBnRpY2tlchgCIAEoCRIlCgZ0b2tlbnMYAyABKAsyFS5jb21tb24uVG9rZW5MYW1wb3J0cxINCgVxdW90ZRgEIAEoBBIcCgNwbmwYBSABKAsyDy5jb21tb24uRGVjaW1hbBIbCgJtYxgGIAEoCzIPLmNvbW1vbi5EZWNpbWFsEh4KBXByaWNlGAcgASgLMg8uY29tbW9uLkRlY2ltYWwiKQoHVHhuVGlwcxIQCghwcmlvcml0eRgBIAEoBBIMCgRqaXRvGAIgASgEIiMKEFRyYW5zYWN0aW9uRXJyb3ISDwoHbWVzc2FnZRgBIAEoCWIGcHJvdG8z",[Br]),Lo=H("CgtjYWJhbC5wcm90bxIFY2FiYWwixwEKClVzZXJBY3Rpb24SGQoDYnV5GAEgASgLMgouY2FiYWwuQnV5SAASGwoEc2VsbBgCIAEoCzILLmNhYmFsLlNlbGxIABIzChF0b2tlbl90cmFkZV9zdGF0cxgDIAEoCzIWLmNhYmFsLlRva2VuVHJhZGVTdGF0c0gAEhsKBHBpbmcYBCABKAsyCy5jYWJhbC5QaW5nSAASGwoEcG9uZxgFIAEoCzILLmNhYmFsLlBvbmdIAEISChB1c2VyX2FjdGlvbl9raW5kIg8KDVRyYWRlRXZlbnRTdWIiDwoNVXNlckFjdGlvblN1YiIeCgtFY2hvUmVxdWVzdBIPCgdtZXNzYWdlGAEgASgJIh8KDEVjaG9SZXNwb25zZRIPCgdtZXNzYWdlGAEgASgJIpMBChFUcmFkZUV2ZW50UmVxdWVzdBIoCgNzdWIYASABKAsyGS5jYWJhbC5Ub2tlblRyYWRlRXZlbnRTdWJIABIbCgRwaW5nGAIgASgLMgsuY2FiYWwuUGluZ0gAEhsKBHBvbmcYAyABKAsyCy5jYWJhbC5Qb25nSABCGgoYdHJhZGVfZXZlbnRfcmVxdWVzdF9raW5kIiIKElRva2VuVHJhZGVFdmVudFN1YhIMCgRtaW50GAEgASgJIiIKElRva2VuU3RhdHVzUmVxdWVzdBIMCgRtaW50GAEgASgJIsEBChJUcmFkZUV2ZW50UmVzcG9uc2USKAoLdHJhZGVfZXZlbnQYASABKAsyES5jYWJhbC5UcmFkZUV2ZW50SAASKgoMdG9rZW5fc3RhdHVzGAIgASgLMhIuY2FiYWwuVG9rZW5TdGF0dXNIABIbCgRwaW5nGAMgASgLMgsuY2FiYWwuUGluZ0gAEhsKBHBvbmcYBCABKAsyCy5jYWJhbC5Qb25nSABCGwoZdHJhZGVfZXZlbnRfcmVzcG9uc2Vfa2luZCIVCgRQaW5nEg0KBWNvdW50GAEgASgEIhUKBFBvbmcSDQoFY291bnQYASABKAQi5AEKDFVzZXJSZXNwb25zZRIsCgx0cmFkZV9zdGF0dXMYASABKAsyFC5jYWJhbC5UcmFkZVJlc3BvbnNlSAASLQoLdHJhZGVfc3RhdHMYAiABKAsyFi5jYWJhbC5Ub2tlblRyYWRlU3RhdHNIABInCgZ0eG5fY2IYAyABKAsyFS50eG5jYi5MYW5kZWRUeG5TdGF0ZUgAEhsKBHBpbmcYBCABKAsyCy5jYWJhbC5QaW5nSAASGwoEcG9uZxgFIAEoCzILLmNhYmFsLlBvbmdIAEIUChJ1c2VyX3Jlc3BvbnNlX2tpbmQiIwoTVG9rZW5UcmFkZVN0YXRzQ2FsbBIMCgRtaW50GAEgASgJIh0KDVRyYWRlUmVzcG9uc2USDAoEc2xvdBgCIAEoBCKQAgoLVG9rZW5TdGF0dXMSDAoEbWludBgBIAEoCRIPCgdwb29sX2lkGAIgASgJEiIKCXBvb2xfa2luZBgDIAEoDjIPLmNhYmFsLlBvb2xLaW5kEjAKEG1pZ3JhdGlvbl9zdGF0dXMYBCABKA4yFi5jYWJhbC5NaWdyYXRpb25TdGF0dXMSDgoGc3VwcGx5GAUgASgEEhAKCGJhc2VfbGlxGAYgASgEEhEKCXF1b3RlX2xpcRgHIAEoBBIlCgpxb3V0ZV9raW5kGAggASgOMhEuY29tbW9uLlF1b3RlS2luZBIUCgd0YXhfYnBzGAkgASgNSACIAQESDgoGdGlja2VyGAogASgJQgoKCF90YXhfYnBzIo0CCg9Ub2tlblRyYWRlU3RhdHMSDAoEbWludBgBIAEoCRIVCg10b2tlbl9iYWxhbmNlGAIgASgEEhEKCWJ1eV9xb3V0ZRgDIAEoBBISCgpzZWxsX3FvdXRlGAQgASgEEhAKCGJ1eV9iYXNlGAUgASgEEhEKCXNlbGxfYmFzZRgGIAEoBBIMCgRidXlzGAcgASgNEg0KBXNlbGxzGAggASgNEhMKC3NvbF9iYWxhbmNlGAkgASgEEhgKEGxhc3RfdHJhZGVkX3Nsb3QYCiABKAQSFgoOdG9rZW5fZGVjaW1hbHMYCyABKA0SJQoKcW91dGVfa2luZBgMIAEoDjIRLmNvbW1vbi5RdW90ZUtpbmQi+QIKClRyYWRlRXZlbnQSJAoDYnV5GAEgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIlCgRzZWxsGAIgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIoCgdkZXBvc2l0GAMgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIpCgh3aXRoZHJhdxgEIAEoCzIVLmNhYmFsLlRyYWRlRXZlbnREYXRhSAASMAoPbWlncmF0aW9uX3N0YXJ0GAUgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIuCg1taWdyYXRpb25fZW5kGAYgASgLMhUuY2FiYWwuVHJhZGVFdmVudERhdGFIABIoCghidXJuX2xpcRgHIAEoCzIULmNhYmFsLkJ1cm5FdmVudERhdGFIABIpCglidXJuX21pbnQYCCABKAsyFC5jYWJhbC5CdXJuRXZlbnREYXRhSABCEgoQdHJhZGVfZXZlbnRfa2luZCJtCg5UcmFkZUV2ZW50RGF0YRISCgphbW91bnRfc29sGAEgASgEEhAKCGJhc2VfbGlxGAIgASgEEhEKCXF1b3RlX2xpcRgDIAEoBBIiCglwb29sX2tpbmQYBCABKA4yDy5jYWJhbC5Qb29sS2luZCItCg1CdXJuRXZlbnREYXRhEg4KBmFtb3VudBgBIAEoBBIMCgRsZWZ0GAIgASgEIrQCCgNCdXkSDgoGYW1vdW50GAEgASgEEgwKBG1pbnQYAiABKAkSFAoMc2xpcHBhZ2VfYnBzGAMgASgNEgsKA3RpcBgEIAEoBBIZCgxwcmlvcml0eV9mZWUYBSABKARIAIgBARISCgVub25jZRgGIAEoBEgBiAEBEhkKDHNsb3RfbGF0ZW5jeRgHIAEoDUgCiAEBEi0KCWV4cGlyZV9hdBgIIAEoCzIVLmNvbW1vbi5Vbml4VGltZXN0YW1wSAOIAQESKgoKcW91dGVfa2luZBgJIAEoDjIRLmNvbW1vbi5RdW90ZUtpbmRIBIgBAUIPCg1fcHJpb3JpdHlfZmVlQggKBl9ub25jZUIPCg1fc2xvdF9sYXRlbmN5QgwKCl9leHBpcmVfYXRCDQoLX3FvdXRlX2tpbmQi/gEKBFNlbGwSEgoKYW1vdW50X2JwcxgBIAEoDRIMCgRtaW50GAIgASgJEhQKDHNsaXBwYWdlX2JwcxgDIAEoDRILCgN0aXAYBCABKAQSGQoMcHJpb3JpdHlfZmVlGAUgASgESACIAQESEgoFbm9uY2UYBiABKARIAYgBARIZCgxzbG90X2xhdGVuY3kYByABKA1IAogBARItCglleHBpcmVfYXQYCCABKAsyFS5jb21tb24uVW5peFRpbWVzdGFtcEgDiAEBQg8KDV9wcmlvcml0eV9mZWVCCAoGX25vbmNlQg8KDV9zbG90X2xhdGVuY3lCDAoKX2V4cGlyZV9hdCotCg9Vc2VyVHJhZGVTdGF0dXMSDAoIYWNjZXB0ZWQQABIMCghyZWplY3RlZBABKlUKD01pZ3JhdGlvblN0YXR1cxIMCghtaWdyYXRlZBAAEg0KCW1pZ3JhdGluZxABEhEKDXByZV9taWdyYXRpb24QAhISCg5ub25fbWlncmF0YWJsZRADKnIKCFBvb2xLaW5kEggKBHB1bXAQABILCgdyYXlfYW1tEAESDAoIbW9vbnNob3QQAhILCgdtZXRlb3JhEAMSDAoIcmF5X2NsbW0QBBIMCghyYXlfY3BtbRAFEgwKCHB1bXBfYW1tEAYSCgoGcmF5X2xsEAcy8gQKCENhYmFsUnBjEkAKD1VzZXJBY3Rpdml0eVVuaRIULmNhYmFsLlVzZXJBY3Rpb25TdWIaEy5jYWJhbC5Vc2VyUmVzcG9uc2UiADABEkAKCVRyYWRlc1VuaRIULmNhYmFsLlRyYWRlRXZlbnRTdWIaGS5jYWJhbC5UcmFkZUV2ZW50UmVzcG9uc2UiADABEkMKDlN1YnNjcmliZVRva2VuEhkuY2FiYWwuVG9rZW5UcmFkZUV2ZW50U3ViGhQuY2FiYWwuVHJhZGVSZXNwb25zZSIAEicKCVRyYWRlUGluZxILLmNhYmFsLlBpbmcaCy5jYWJhbC5Qb25nIgASJgoIVXNlclBpbmcSCy5jYWJhbC5QaW5nGgsuY2FiYWwuUG9uZyIAEjEKCk1hcmtldFNlbGwSCy5jYWJhbC5TZWxsGhQuY2FiYWwuVHJhZGVSZXNwb25zZSIAEi8KCU1hcmtldEJ1eRIKLmNhYmFsLkJ1eRoULmNhYmFsLlRyYWRlUmVzcG9uc2UiABJHChNHZXRUb2tlbkxpbWl0T3JkZXJzEhQuY29tbW9uLlRva2VuQWRkcmVzcxoYLm9yZGVycy5Ub2tlbkxpbWl0T3JkZXJzIgASUAoQUGxhY2VMaW1pdE9yZGVycxIYLm9yZGVycy5Ub2tlbkxpbWl0T3JkZXJzGiAub3JkZXJzLlBsYWNlTGltaXRPcmRlcnNSZXNwb25jZSIAEk0KEURlbGV0ZUxpbWl0T3JkZXJzEhQub3JkZXJzLkRlbGV0ZU9yZGVycxogLm9yZGVycy5QbGFjZUxpbWl0T3JkZXJzUmVzcG9uY2UiAGIGcHJvdG8z",[ko,Oo,Br]),Uo=ho(Lo,0),Bo=({apiKey:e,apiUrl:t})=>Ro({baseUrl:t,interceptors:[n=>async r=>(r.header.set("auth",e),await n(r))]}),Co=({apiKey:e,apiUrl:t})=>{const n=Bo({apiKey:e,apiUrl:t});return no(Uo,n)},Vo={log:()=>{},info:()=>{}};var Cr=(e=>(e[e.pingUserInterval=8e3]="pingUserInterval",e[e.pingTradeInterval=8e3]="pingTradeInterval",e))(Cr||{});const q={api_secret_key:"",quick_buy_amount:.001,quick_sell_amount:.001,buy_presets:[.5,1,2,5],sell_presets:[.5,1,2,5],buy_tip:.001,sell_tip:.001,buy_slippage:20,sell_slippage:20};var ze=(e=>(e.UA="UA",e.TRADE="TRADE",e))(ze||{}),ue=(e=>(e.ping="ping",e.pingFinally="pingFinally",e))(ue||{}),C=(e=>(e.userActivityConnected="userActivityConnected",e.userActivityStreamMessage="userActivityStreamMessage",e.userActivityPing="userActivityPing",e.userActivityPong="userActivityPong",e.userActivityError="userActivityError",e.tradeStats="tradeStats",e))(C||{}),U=(e=>(e.tradeConnected="tradeConnected",e.tradeDisconnected="tradeDisconnected",e.tradeStreamMessage="tradeStreamMessage",e.tradePing="tradePing",e.tradePong="tradePong",e.tradeError="tradeError",e.tradeEvent="tradeEvent",e.tokenStatus="tokenStatus",e))(U||{}),J=(e=>(e.connected="connected",e.message="message",e.ping="ping",e.pong="pong",e.error="error",e))(J||{});class Rn{nameStream;streamInstance;reconnect=!0;onMessage;pingUserTimeout;isPinging=!1;log;onePongReceived;_resolveOnePong;_rejectedOnePong;clientConnectToStream;clientIsPong;streamPinger;constructor({nameStream:t,clientConnectToStream:n,clientIsPong:r,streamPinger:a,onMessage:s,debug:o=!1}){this.nameStream=t,this.log=o?console:Vo,this.clientConnectToStream=n,this.clientIsPong=r,this.streamPinger=a,this.onMessage=s,this.isPinging=!1}async start(){try{this.log.log(`[${this.nameStream}]: start`),this.streamInstance=this.connectToStream(),this.onePongReceived=new Promise((t,n)=>{this._resolveOnePong=t,this._rejectedOnePong=n}),setTimeout(()=>this.listen(),0),this.isPinging=!0,setTimeout(()=>this.ping(),0),await this.onePongReceived,this.onMessage("connected")}catch(t){console.error(t),this.onErrorAndDestoy("start error",t.message),this._rejectedOnePong&&this._rejectedOnePong()}}connectToStream(){try{return this.log.log(`[${this.nameStream}]: start connect`),this.clientConnectToStream()}catch(t){throw new Error(t.message)}}async listen(){if(this.log.log(`[${this.nameStream}]: start listening`),!this.streamInstance)throw new Error(`[${this.nameStream}]: streamInstance is undefined error`);try{for await(const t of this.streamInstance)this.log.log(`[${this.nameStream}]: received message`,t),this.clientIsPong(t)&&this._resolveOnePong&&this._resolveOnePong(),this.onMessage("message",t)}catch(t){console.error(t)}}async ping(){try{this.log.log(`[${this.nameStream}]: start ping`);const t=this.checkForError({errorCase:ue.ping});if(t)throw console.error("!!!",t),new Error(t);const n=await this.streamPinger({count:BigInt(Date.now())});this.log.log(`[${this.nameStream}]: ping result `,n)}catch(t){this.onErrorAndDestoy(`[${this.nameStream}]: ping error `,t)}finally{this.log.log(`[${this.nameStream}]: ping finally`);const t=this.checkForError({errorCase:ue.pingFinally});if(t){console.error(t);return}t||(clearTimeout(this.pingUserTimeout),this.pingUserTimeout=setTimeout(()=>this.ping(),Cr.pingUserInterval))}}checkForError({errorCase:t}){if(!this.streamInstance)return`[${this.nameStream}]: streamInstance is undefined error`;if(t===ue.ping||t===ue.pingFinally){if(!this.isPinging)return`[${this.nameStream}]: isPinging: ${this.isPinging}`;if(!this.streamPinger)return`[${this.nameStream}]: streamInstance is undefined error`}}destroy(){this.log.log("destroy cabal UAStream"),this.streamInstance=void 0,this.onePongReceived=void 0,this.isPinging=!1,clearTimeout(this.pingUserTimeout),this.pingUserTimeout=void 0}onErrorAndDestoy(t,n){console.error(t),this.onMessage("error",n.message),this.destroy()}}function Se(e){return BigInt(Math.round(e*1e9))}class Go extends $r.EventEmitter{client;userActivityStream;tradesStream;ready;constructor({apiKey:t,apiUrl:n}){super(),this.client=Co({apiKey:t,apiUrl:n}),this.ready=!1}createUAStream(){return this.handleUserActivityMessage=this.handleUserActivityMessage.bind(this),this.userActivityStream=new Rn({nameStream:ze.UA,clientConnectToStream:()=>this.client.userActivityUni({}),clientIsPong:t=>t.userResponseKind.case==="pong",streamPinger:({count:t})=>this.client.userPing({count:t}),onMessage:this.handleUserActivityMessage,debug:!0}),this.userActivityStream}destroyUAStrem(){this.ready=!1,this.userActivityStream?.destroy(),this.userActivityStream=void 0}createTradeStream(){this.handleTradeMessage=this.handleTradeMessage.bind(this),this.tradesStream=new Rn({nameStream:ze.TRADE,clientConnectToStream:()=>this.client.tradesUni({}),clientIsPong:t=>t.tradeEventResponseKind.case==="pong",streamPinger:({count:t})=>this.client.tradePing({count:t}),onMessage:this.handleTradeMessage,debug:!0})}destroyTStrem(){this.ready=!1,this.tradesStream?.destroy(),this.tradesStream=void 0}async start(){try{this.ready=!0,this.createUAStream(),await this.userActivityStream?.start(),this.handleUserActivityMessage(J.connected),this.createTradeStream(),await this.tradesStream?.start()}catch{this.ready=!1,console.log("Cabal Service Error"),this.stop()}}stop(){this.destroyUAStrem(),this.destroyTStrem()}async subscribeToken(t){try{const n=await this.client.subscribeToken({mint:t});return console.log("subscribeToken",n),n}catch(n){console.error("subscribeToken",n)}}async placeLimitOrders({mint:t}){try{debugger;const n=await this.client.placeLimitOrders({mint:t,orders:[{slippageBps:q.sell_slippage,tip:Se(q.sell_tip),target:{targetType:{case:"price",value:{price:.0027,direction:Ur.ABOVE}}},side:Lr.SELL,amount:{amountType:{case:"percBps",value:500}},trigger:Or.IMMEDIATE}]});return console.log("sell result::::",n),n}catch(n){console.error("error token sell",n)}}async marketSell({mint:t,percents:n}){try{debugger;if(n>100||n<=0)throw new Error("should be in range of [0;100]");const r={amountBps:n*100,mint:t,slippageBps:q.sell_slippage,tip:Se(q.sell_tip)};console.log("### sell params",r);const a=await this.client.marketSell(r);return console.log("sell result::::",a),a}catch(r){console.error("error token sell",r)}}async marketBuy({amount:t,mint:n}){try{debugger;const r={amount:Se(t),mint:n,slippageBps:q.buy_slippage,tip:Se(q.buy_tip)};console.log("### buy params",r);const a=await this.client.marketBuy(r);return console.log("buy",a),a}catch(r){console.error("token buy",r)}}handleTradeMessage=(t,n)=>{if(this.ready)switch(t){case J.connected:this.emit(U.tradeConnected);break;case J.error:console.error("[[CabalService]]: trade stream error"),this.stop(),this.emit(U.tradeError);break;case J.message:this.processTradeMessage(n);break;default:console.log(`[handleUserActivityMessage]: unknown message type ${t}`)}};handleUserActivityMessage=(t,n)=>{if(this.ready)switch(t){case J.connected:this.emit(C.userActivityConnected);break;case J.error:console.error("[[CabalService]]: UA stream error"),this.stop(),this.emit(C.userActivityError);break;case J.message:this.processUserActivityMessage(n);break;default:console.log(`[handleUserActivityMessage]: unknown message type ${t}`)}};processUserActivityMessage(t){const n=t.userResponseKind.case;switch(n){case"tradeStatus":break;case"tradeStats":this.emit(C.tradeStats,t.userResponseKind);break;case"txnCb":break;case"ping":break;case"pong":this.emit(C.userActivityPong,{count:t.userResponseKind.value});break;default:console.log(`[handleUserActivityMessage]: unknown case message: ${n}`)}}processTradeMessage(t){const n=t.tradeEventResponseKind.case;switch(n){case"tradeEvent":this.emit(U.tradeEvent,{value:t.tradeEventResponseKind.value.tradeEventKind});break;case"tokenStatus":this.emit(U.tokenStatus,{value:t.tradeEventResponseKind});break;case"ping":this.emit(U.tradePing,{value:t.tradeEventResponseKind.value});break;case"pong":this.emit(U.tradePong,{count:t.tradeEventResponseKind.value});break;default:console.log(`[processTradeMessage]: unknown case message: ${n}`)}}}const Ee={apiUrl:"https://cabalbot.tech:11111",showUAConnected:!0,showTradeEventLog:!0,showTokenStatus:!0,showSendMessageResponseLog:!0,showSubscribeTokenReceiveMsg:!0,showTradeStats:!0,showReceivedMessages:!0,showStreamConnected:!0};var Vr=(e=>(e[e.reconnectTimeout=500]="reconnectTimeout",e))(Vr||{});const Yo={apiKey:""};var x=(e=>(e.CabalEvent="CABAL_EVENT",e))(x||{}),ee=(e=>(e.INIT_CABAL="INIT_CABAL",e.SUBSCRIBE_TOKEN="SUBSCRIBE_TOKEN",e.BUY_MARKET="BUY_MARKET",e.SELL_MARKET="SELL_MARKET",e.SET_APIKEY="SET_APIKEY",e))(ee||{}),Gr=(e=>(e.readyStatus="readyStatus",e))(Gr||{});const Do=({cabalTradeEvent:e,mint:t})=>{try{const n=Date.now(),r=e.value.value,a=e.value.case,{amountSol:s,baseLiq:o,quoteLiq:i,poolKind:c}=r;return{type:a,value:{mint:t,timestamp:n,amountSol:s.toString(),baseLiq:o.toString(),quoteLiq:i.toString(),poolKind:c}}}catch{console.error("error while parsing ",e)}},Fo=e=>{const t=e.value,n=t.mint;return{type:x.CabalEvent,eventName:C.tradeStats,data:{mint:n,tokenBalance:t.tokenBalance.toString(),buyQoute:t.buyQoute.toString(),sellQoute:t.sellQoute.toString(),buyBase:t.buyBase.toString(),sellBase:t.sellBase.toString(),buys:t.buys,sells:t.sells,solBalance:t.solBalance.toString(),lastTradedSlot:t.lastTradedSlot.toString(),tokenDecimals:t.tokenDecimals,qouteKind:t.qouteKind}}},Ko=e=>{const t=e.value.value;return{mint:t.mint,poolId:t.poolId,poolKind:t.poolKind,migrationStatus:t.migrationStatus,supply:t.supply.toString(),baseLiq:t.baseLiq.toString(),quoteLiq:t.quoteLiq.toString(),qouteKind:t.qouteKind,taxBps:t.taxBps,ticker:t.ticker}},Ve=()=>new Promise((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},n=>{if(chrome.runtime.lastError)return console.log("$$$"),t(chrome.runtime.lastError);e(n)})}),xo=async({sendResponse:e,getListener:t,getCabalInstance:n,getIsReady:r,message:a})=>{const o=(await Ve())[0]?.id,i=t(o);console.log("### Buy Market ###",o,i?.mint);const c=n(),{mint:l,amountSol:g}=a.data;c&&l&&g&&c.marketBuy({amount:g,mint:l}),e({isReady:r()})},Zo=async({sendResponse:e,getListener:t,getCabalInstance:n,getIsReady:r,message:a})=>{const o=(await Ve())[0]?.id,i=t(o);console.log("### Buy Market ###",o,i?.mint);const c=n(),{mint:l,amountBps:g}=a.data;c&&l&&g&&c.marketSell({percents:g,mint:l}),e({isReady:r()})},Mo=async({sendResponse:e,getListener:t,getCabalInstance:n,getIsReady:r,message:a})=>{try{const o=(await Ve())[0]?.id,i=t(o);Ee.showSubscribeTokenReceiveMsg&&console.log("### SUBSCRIBE_TOKEN ###",o,a);const c=n(),l=a.data.mint;c&&i&&l&&c.subscribeToken(l),e({isReady:r()})}catch(s){console.error("handleSubscribeTokenMessage error",s)}};var Yr=(e=>(e.gmgnai="https://gmgn.ai/sol/token/",e))(Yr||{});const Wo=e=>e.split(Yr.gmgnai)[1],Po=async({sendResponse:e,message:t,state:n,setActiveTab:r})=>{try{const s=(await Ve())[0]?.id;if(console.log("### INIT_CABAL ###",s,t),!s)return;r(s);const o=Wo(t.data.url),{apiKey:i}=await n.cabalStorage.getApiKey();n.tabListeners.push({tabId:s,url:t.data.url,mint:o}),e({apiKey:i,isReady:n.isReady,url:t?.data?.url,mint:o})}catch(a){console.error("initCabalOnTab",a)}},Jo=async({sendResponse:e,message:t,state:n})=>{await n.cabalStorage.setApiKey({apiKey:t.data.apiKey}),n.apiKey=t.data.apiKey,e({status:"ok"})},Xo=({getIsReady:e,getListener:t,getCabalInstance:n,setActiveTab:r,state:a})=>(s,o,i)=>{switch(console.log("%%% %%% receive",s,o),s.type){case ee.SET_APIKEY:return console.log("!!!",s),Jo({sendResponse:i,message:s,state:a}),!0;case ee.INIT_CABAL:return Po({sendResponse:i,message:s,state:a,setActiveTab:r}),!0;case ee.SUBSCRIBE_TOKEN:return Mo({sendResponse:i,getListener:t,getCabalInstance:n,getIsReady:e,message:s}),!0;case ee.BUY_MARKET:return xo({sendResponse:i,getListener:t,getCabalInstance:n,getIsReady:e,message:s}),!0;case ee.SELL_MARKET:return Zo({sendResponse:i,getListener:t,getCabalInstance:n,getIsReady:e,message:s}),!0;default:console.log("no handler for event",s);break}},$o=({getListener:e,setActiveTab:t})=>n=>{console.log("  . ID :",n.tabId);const r=e(n.tabId);r&&(t(r.tabId),chrome.tabs.get(n.tabId,function(a){console.log("URL   :",a.url),console.log("URL listener",r.url),console.log("mint",r.mint)}))},Z=({message:e,getActiveTab:t})=>{const n=t();n&&chrome.tabs.sendMessage(n,e,r=>{chrome.runtime.lastError?console.error("Error sending message:",chrome.runtime.lastError.message):console.log("Message sent to active tab:",e)})};class jo{async init(){return chrome.storage.local.set(Yo)}async getApiKey(){return chrome.storage.local.get(["apiKey"])}async setApiKey({apiKey:t}){return chrome.storage.local.set({apiKey:t})}}const Dr=({state:e})=>({type:x.CabalEvent,eventName:Gr.readyStatus,data:{isReady:e.isReady,shouldSetApiKey:!e.apiKey}});console.log("start background service 5");const v={cabal:null,isUserActivityConnected:!1,isTradeConnected:!1,isReady:!1,reconnectTimeout:void 0,mint:null,activeTab:void 0,tabListeners:[],cabalStorage:new jo,apiKey:null},Nt=()=>v.isReady,Fr=()=>v.cabal,Kr=e=>v.cabal=e,kn=e=>{v.activeTab=e},xr=e=>v.mint=e,zo=()=>v.mint,M=()=>v.activeTab,On=e=>e?v.tabListeners.find(t=>t.tabId===e):void 0,Ho=e=>v.isReady=e,Qo=()=>{console.log("UA CONNECTED"),v.isUserActivityConnected=!0,Mr()},qo=e=>{try{Z({getActiveTab:M,message:{type:x.CabalEvent,eventName:C.userActivityPong,data:{count:e.count.count.toString(),isReady:Nt()}}})}catch(t){console.error("error in handleUserActivityPong",t)}},ei=e=>{try{Ee.showTradeStats&&console.log("handleUserActivityTradeStats",e);const t=Fo(e),n=t.data.mint;xr(n),Z({getActiveTab:M,message:t})}catch(t){console.error("error in handleUserActivityTradeStats",t)}},ti=()=>{console.error("User Activity Stream Error"),It(),Z({getActiveTab:M,message:{type:x.CabalEvent,eventName:C.userActivityError}})},ni=()=>{v.isTradeConnected=!0,Mr(),Z({getActiveTab:M,message:{type:x.CabalEvent,eventName:U.tradeConnected}})},ri=e=>{Z({getActiveTab:M,message:{type:x.CabalEvent,eventName:U.tradePong,data:{count:e.count.count.toString(),isReady:Nt()}}})},ai=e=>{try{Ee.showTokenStatus&&console.log("handleTradeTokenStatus",e);const t=Ko(e);xr(t.mint);const n={type:x.CabalEvent,eventName:U.tokenStatus,data:t};Z({getActiveTab:M,message:n})}catch(t){console.error("error in handleTradeTokenStatus",t)}},si=e=>{try{const t=Do({mint:zo()||"!no mint!",cabalTradeEvent:e});if(!t)throw new Error("cant parse trade event",t);Ee.showTradeEventLog&&console.log("handleTradeEvent",t);const n={type:x.CabalEvent,eventName:U.tradeEvent,data:t};Z({getActiveTab:M,message:n})}catch(t){console.error("error in handleTradeEvent",t)}},oi=()=>{console.error("Trade Stream Error"),It();const e={type:x.CabalEvent,eventName:U.tradeError};Z({getActiveTab:M,message:e})},Zr={[C.userActivityConnected]:Qo,[C.userActivityPong]:qo,[C.tradeStats]:ei,[C.userActivityError]:ti,[U.tradeConnected]:ni,[U.tradePong]:ri,[U.tokenStatus]:ai,[U.tradeEvent]:si,[U.tradeError]:oi},ii=e=>{for(let[t,n]of Object.entries(Zr))e.on(t,n)},ui=e=>{for(let[t,n]of Object.entries(Zr))e.off(t,n)};function Mr(){v.isUserActivityConnected&&v.isTradeConnected&&(Ho(!0),Z({getActiveTab:M,message:Dr({state:v})}))}const Wr=()=>{try{v.isReady=!1,v.reconnectTimeout&&clearTimeout(v.reconnectTimeout),v.isUserActivityConnected=!1,v.isTradeConnected=!1;const e=Fr();e&&(ui(e),e.stop(),Kr(null)),Z({getActiveTab:M,message:Dr({state:v})})}catch(e){console.error("cleanCabalService",e)}},Pr=()=>{if(console.log("initializeCabalService",v.apiKey),Wr(),v.apiKey){const e=new Go({apiKey:v.apiKey,apiUrl:Ee.apiUrl});ii(e),e.start(),Kr(e)}};function It(){Wr(),v.reconnectTimeout=setTimeout(()=>{console.log("Attempting to reconnect..."),Pr()},Vr.reconnectTimeout)}const ci=async()=>{const e=await v.cabalStorage.getApiKey();v.apiKey=e.apiKey,console.log("###",e.apiKey);const t=Xo({getIsReady:Nt,getListener:On,getCabalInstance:Fr,setActiveTab:kn,state:v}),n=$o({getListener:On,setActiveTab:kn});chrome.runtime.onMessage.addListener(t),chrome.tabs.onActivated.addListener(n),chrome.runtime.onInstalled.addListener(async r=>{r.reason==="install"&&v.cabalStorage?.init()}),chrome.storage.onChanged.addListener((r,a)=>{if(console.log("storage changes!"),a==="local"&&r.apiKey){const s=r.apiKey.newValue;console.log("API- :",s),v.apiKey=s,v.apiKey&&It()}}),Pr()};ci();
